import{a as V,b as xe,c as gf,d as R,e as Jw,f as fc,g as Xw,h as eI,i as tI,j as mf,k as nI,l as oa,m as yf,n as pc,o as rI,p as iI,q as vf,r as Le,s as oi,t as wn,u as gc,v as sa,w as oI,x as sI,y as yr,z as jt}from"./chunk-4ZHOUZTK.js";var wf=null;var _f=1,aI=Symbol("SIGNAL");function Ce(n){let e=wf;return wf=n,e}function uI(){return wf}var If={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Yx(n){if(!(bf(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===_f)){if(!n.producerMustRecompute(n)&&!Df(n)){n.dirty=!1,n.lastCleanEpoch=_f;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=_f}}function Ef(n){return n&&(n.nextProducerIndex=0),Ce(n)}function cI(n,e){if(Ce(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(bf(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Tf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Df(n){Sf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Yx(t),r!==t.version))return!0}return!1}function Cf(n){if(Sf(n),bf(n))for(let e=0;e<n.producerNode.length;e++)Tf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Tf(n,e){if(Zx(n),n.liveConsumerNode.length===1&&Jx(n))for(let r=0;r<n.producerNode.length;r++)Tf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Sf(i),i.producerIndexOfThis[r]=e}}function bf(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Sf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Zx(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Jx(n){return n.producerNode!==void 0}function Xx(){throw new Error}var eR=Xx;function lI(n){eR=n}function te(n){return typeof n=="function"}function oo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var mc=oo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function si(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var $e=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){e=o instanceof mc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{dI(o)}catch(s){e=e??[],s instanceof mc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new mc(e)}}add(e){var t;if(e&&e!==this)if(this.closed)dI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&si(t,e)}remove(e){let{_finalizers:t}=this;t&&si(t,e),e instanceof n&&e._removeParent(this)}};$e.EMPTY=(()=>{let n=new $e;return n.closed=!0,n})();var Af=$e.EMPTY;function yc(n){return n instanceof $e||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function dI(n){te(n)?n():n.unsubscribe()}var an={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var so={setTimeout(n,e,...t){let{delegate:r}=so;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=so;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function vc(n){so.setTimeout(()=>{let{onUnhandledError:e}=an;if(e)e(n);else throw n})}function aa(){}var hI=xf("C",void 0,void 0);function fI(n){return xf("E",void 0,n)}function pI(n){return xf("N",n,void 0)}function xf(n,e,t){return{kind:n,value:e,error:t}}var ai=null;function ao(n){if(an.useDeprecatedSynchronousErrorHandling){let e=!ai;if(e&&(ai={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ai;if(ai=null,t)throw r}}else n()}function gI(n){an.useDeprecatedSynchronousErrorHandling&&ai&&(ai.errorThrown=!0,ai.error=n)}var ui=class extends $e{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,yc(e)&&e.add(this)):this.destination=rR}static create(e,t,r){return new Hn(e,t,r)}next(e){this.isStopped?Mf(pI(e),this):this._next(e)}error(e){this.isStopped?Mf(fI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Mf(hI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},tR=Function.prototype.bind;function Rf(n,e){return tR.call(n,e)}var Nf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){_c(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){_c(r)}else _c(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){_c(t)}}},Hn=class extends ui{constructor(e,t,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&an.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Rf(e.next,o),error:e.error&&Rf(e.error,o),complete:e.complete&&Rf(e.complete,o)}):i=e}this.destination=new Nf(i)}};function _c(n){an.useDeprecatedSynchronousErrorHandling?gI(n):vc(n)}function nR(n){throw n}function Mf(n,e){let{onStoppedNotification:t}=an;t&&so.setTimeout(()=>t(n,e))}var rR={closed:!0,next:aa,error:nR,complete:aa};var uo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function It(n){return n}function Pf(...n){return kf(n)}function kf(n){return n.length===0?It:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var le=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=oR(t)?t:new Hn(t,r,i);return ao(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=mI(r),new r((i,o)=>{let s=new Hn({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[uo](){return this}pipe(...t){return kf(t)(this)}toPromise(t){return t=mI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function mI(n){var e;return(e=n??an.Promise)!==null&&e!==void 0?e:Promise}function iR(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function oR(n){return n&&n instanceof ui||iR(n)&&yc(n)}function Of(n){return te(n?.lift)}function se(n){return e=>{if(Of(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(n,e,t,r,i){return new Ff(n,e,t,r,i)}var Ff=class extends ui{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function co(){return se((n,e)=>{let t=null;n._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var lo=class extends le{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Of(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $e;let t=this.getSubject();e.add(this.source.subscribe(ue(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$e.EMPTY)}return e}refCount(){return co()(this)}};var yI=oo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ze=(()=>{class n extends le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new wc(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new yI}next(t){ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Af:(this.currentObservers=null,o.push(t),new $e(()=>{this.currentObservers=null,si(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new le;return t.source=this,t}}return n.create=(e,t)=>new wc(e,t),n})(),wc=class extends ze{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Af}};var ct=class extends ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ua={now(){return(ua.delegate||Date).now()},delegate:void 0};var Ic=class extends ze{constructor(e=1/0,t=1/0,r=ua){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Ec=class extends $e{constructor(e,t){super()}schedule(e,t=0){return this}};var ca={setInterval(n,e,...t){let{delegate:r}=ca;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ca;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ho=class extends Ec{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return ca.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ca.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,si(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var fo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};fo.now=ua.now;var po=class extends fo{constructor(e,t=fo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var la=new po(ho);var Dc=class extends ho{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Cc=class extends po{};var Lf=new Cc(Dc);var Et=new le(n=>n.complete());function vI(n){return n&&te(n.schedule)}function Vf(n){return n[n.length-1]}function _I(n){return te(Vf(n))?n.pop():void 0}function In(n){return vI(Vf(n))?n.pop():void 0}function wI(n,e){return typeof Vf(n)=="number"?n.pop():e}var Tc=n=>n&&typeof n.length=="number"&&typeof n!="function";function bc(n){return te(n?.then)}function Sc(n){return te(n[uo])}function Ac(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function xc(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function sR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Rc=sR();function Mc(n){return te(n?.[Rc])}function Nc(n){return Xw(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield fc(t.read());if(i)return yield fc(void 0);yield yield fc(r)}}finally{t.releaseLock()}})}function Pc(n){return te(n?.getReader)}function Ve(n){if(n instanceof le)return n;if(n!=null){if(Sc(n))return aR(n);if(Tc(n))return uR(n);if(bc(n))return cR(n);if(Ac(n))return II(n);if(Mc(n))return lR(n);if(Pc(n))return dR(n)}throw xc(n)}function aR(n){return new le(e=>{let t=n[uo]();if(te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function uR(n){return new le(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function cR(n){return new le(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,vc)})}function lR(n){return new le(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function II(n){return new le(e=>{hR(n,e).catch(t=>e.error(t))})}function dR(n){return II(Nc(n))}function hR(n,e){var t,r,i,o;return Jw(this,void 0,void 0,function*(){try{for(t=eI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Mt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Wt(n,e=0){return se((t,r)=>{t.subscribe(ue(r,i=>Mt(r,n,()=>r.next(i),e),()=>Mt(r,n,()=>r.complete(),e),i=>Mt(r,n,()=>r.error(i),e)))})}function un(n,e=0){return se((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function EI(n,e){return Ve(n).pipe(un(e),Wt(e))}function DI(n,e){return Ve(n).pipe(un(e),Wt(e))}function CI(n,e){return new le(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function TI(n,e){return new le(t=>{let r;return Mt(t,e,()=>{r=n[Rc](),Mt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function kc(n,e){if(!n)throw new Error("Iterable cannot be null");return new le(t=>{Mt(t,e,()=>{let r=n[Symbol.asyncIterator]();Mt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function bI(n,e){return kc(Nc(n),e)}function SI(n,e){if(n!=null){if(Sc(n))return EI(n,e);if(Tc(n))return CI(n,e);if(bc(n))return DI(n,e);if(Ac(n))return kc(n,e);if(Mc(n))return TI(n,e);if(Pc(n))return bI(n,e)}throw xc(n)}function Ee(n,e){return e?SI(n,e):Ve(n)}function J(...n){let e=In(n);return Ee(n,e)}function go(n,e){let t=te(n)?n:()=>n,r=i=>i.error(t());return new le(e?i=>e.schedule(r,0,i):r)}function jf(n){return!!n&&(n instanceof le||te(n.lift)&&te(n.subscribe))}var qn=oo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function G(n,e){return se((t,r)=>{let i=0;t.subscribe(ue(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:fR}=Array;function pR(n,e){return fR(e)?n(...e):n(e)}function AI(n){return G(e=>pR(n,e))}var{isArray:gR}=Array,{getPrototypeOf:mR,prototype:yR,keys:vR}=Object;function xI(n){if(n.length===1){let e=n[0];if(gR(e))return{args:e,keys:null};if(_R(e)){let t=vR(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function _R(n){return n&&typeof n=="object"&&mR(n)===yR}function RI(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function da(...n){let e=In(n),t=_I(n),{args:r,keys:i}=xI(n);if(r.length===0)return Ee([],e);let o=new le(wR(r,e,i?s=>RI(i,s):It));return t?o.pipe(AI(t)):o}function wR(n,e,t=It){return r=>{MI(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)MI(e,()=>{let l=Ee(n[u],e),h=!1;l.subscribe(ue(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function MI(n,e,t){n?Mt(t,n,e):e()}function NI(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},v=M=>l<r?b(M):u.push(M),b=M=>{o&&e.next(M),l++;let N=!1;Ve(t(M,h++)).subscribe(ue(e,B=>{i?.(B),o?v(B):e.next(B)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let B=u.shift();s?Mt(e,s,()=>b(B)):b(B)}m()}catch(B){e.error(B)}}))};return n.subscribe(ue(e,v,()=>{p=!0,m()})),()=>{a?.()}}function Ye(n,e,t=1/0){return te(e)?Ye((r,i)=>G((o,s)=>e(r,o,i,s))(Ve(n(r,i))),t):(typeof e=="number"&&(t=e),se((r,i)=>NI(r,i,n,t)))}function vr(n=1/0){return Ye(It,n)}function PI(){return vr(1)}function mo(...n){return PI()(Ee(n,In(n)))}function Oc(n){return new le(e=>{Ve(n()).subscribe(e)})}function Bf(...n){let e=In(n),t=wI(n,1/0),r=n;return r.length?r.length===1?Ve(r[0]):vr(t)(Ee(r,e)):Et}function lt(n,e){return se((t,r)=>{let i=0;t.subscribe(ue(r,o=>n.call(e,o,i++)&&r.next(o)))})}function _r(n){return se((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ue(t,void 0,void 0,s=>{o=Ve(n(s,_r(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function kI(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(ue(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function ci(n,e){return te(e)?Ye(n,e,1):Ye(n,1)}function wr(n){return se((e,t)=>{let r=!1;e.subscribe(ue(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function zn(n){return n<=0?()=>Et:se((e,t)=>{let r=0;e.subscribe(ue(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Uf(n){return G(()=>n)}function $f(n,e=It){return n=n??IR,se((t,r)=>{let i,o=!0;t.subscribe(ue(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function IR(n,e){return n===e}function Fc(n=ER){return se((e,t)=>{let r=!1;e.subscribe(ue(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function ER(){return new qn}function ha(n){return se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Kt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?lt((i,o)=>n(i,o,r)):It,zn(1),t?wr(e):Fc(()=>new qn))}function yo(n){return n<=0?()=>Et:se((e,t)=>{let r=[];e.subscribe(ue(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Hf(n,e){let t=arguments.length>=2;return r=>r.pipe(n?lt((i,o)=>n(i,o,r)):It,yo(1),t?wr(e):Fc(()=>new qn))}function fa(){return se((n,e)=>{let t,r=!1;n.subscribe(ue(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function li(n,e){return se(kI(n,e,arguments.length>=2,!0))}function OI(n={}){let{connector:e=()=>new ze,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},v=()=>{m(),s=u=void 0,h=p=!1},b=()=>{let M=s;v(),M?.unsubscribe()};return se((M,N)=>{l++,!p&&!h&&m();let B=u=u??e();N.add(()=>{l--,l===0&&!p&&!h&&(a=qf(b,i))}),B.subscribe(N),!s&&l>0&&(s=new Hn({next:q=>B.next(q),error:q=>{p=!0,m(),a=qf(v,t,q),B.error(q)},complete:()=>{h=!0,m(),a=qf(v,r),B.complete()}}),Ve(M).subscribe(s))})(o)}}function qf(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Hn({next:()=>{r.unsubscribe(),n()}});return Ve(e(...t)).subscribe(r)}function Lc(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,OI({connector:()=>new Ic(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function di(...n){let e=In(n);return se((t,r)=>{(e?mo(n,t,e):mo(n,t)).subscribe(r)})}function He(n,e){return se((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ue(r,u=>{i?.unsubscribe();let l=0,h=o++;Ve(n(u,h)).subscribe(i=ue(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Vc(n,e){return te(e)?He(()=>n,e):He(()=>n)}function zf(n){return se((e,t)=>{Ve(n).subscribe(ue(t,()=>t.complete(),aa)),!t.closed&&e.subscribe(t)})}function rt(n,e,t){let r=te(n)||e||t?{next:n,error:e,complete:t}:n;return r?se((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ue(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):It}var wE="https://g.co/ng/security#xss",X=class extends Error{constructor(e,t){super($p(e,t)),this.code=e}};function $p(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Sa(n){return{toString:n}.toString()}var jc="__parameters__";function DR(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function IE(n,e,t){return Sa(()=>{let r=DR(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(jc)?u[jc]:Object.defineProperty(u,jc,{value:[]})[jc];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Qn=globalThis;function Se(n){for(let e in n)if(n[e]===Se)return e;throw Error("Could not find renamed property on target object.")}function Nt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Nt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function FI(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var CR=Se({__forward_ref__:Se});function EE(n){return n.__forward_ref__=EE,n.toString=function(){return Nt(this())},n}function Yt(n){return DE(n)?n():n}function DE(n){return typeof n=="function"&&n.hasOwnProperty(CR)&&n.__forward_ref__===EE}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function bt(n){return{providers:n.providers||[],imports:n.imports||[]}}function _l(n){return LI(n,TE)||LI(n,bE)}function CE(n){return _l(n)!==null}function LI(n,e){return n.hasOwnProperty(e)?n[e]:null}function TR(n){let e=n&&(n[TE]||n[bE]);return e||null}function VI(n){return n&&(n.hasOwnProperty(jI)||n.hasOwnProperty(bR))?n[jI]:null}var TE=Se({\u0275prov:Se}),jI=Se({\u0275inj:Se}),bE=Se({ngInjectableDef:Se}),bR=Se({ngInjectorDef:Se}),W=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function SE(n){return n&&!!n.\u0275providers}var SR=Se({\u0275cmp:Se}),AR=Se({\u0275dir:Se}),xR=Se({\u0275pipe:Se}),RR=Se({\u0275mod:Se}),Wc=Se({\u0275fac:Se}),ga=Se({__NG_ELEMENT_ID__:Se}),BI=Se({__NG_ENV_ID__:Se});function ya(n){return typeof n=="string"?n:n==null?"":String(n)}function MR(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ya(n)}function NR(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new X(-200,n)}function Hp(n,e){throw new X(-201,!1)}var ae=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ae||{}),rp;function AE(){return rp}function Qt(n){let e=rp;return rp=n,e}function xE(n,e,t){let r=_l(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ae.Optional)return null;if(e!==void 0)return e;Hp(n,"Injector")}var PR={},va=PR,ip="__NG_DI_FLAG__",Kc="ngTempTokenPath",kR="ngTokenPath",OR=/\n/gm,FR="\u0275",UI="__source",Eo;function LR(){return Eo}function Ir(n){let e=Eo;return Eo=n,e}function VR(n,e=ae.Default){if(Eo===void 0)throw new X(-203,!1);return Eo===null?xE(n,void 0,e):Eo.get(n,e&ae.Optional?null:void 0,e)}function O(n,e=ae.Default){return(AE()||VR)(Yt(n),e)}function j(n,e=ae.Default){return O(n,wl(e))}function wl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function op(n){let e=[];for(let t=0;t<n.length;t++){let r=Yt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new X(900,!1);let i,o=ae.Default;for(let s=0;s<r.length;s++){let a=r[s],u=jR(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(O(i,o))}else e.push(O(r))}return e}function RE(n,e){return n[ip]=e,n.prototype[ip]=e,n}function jR(n){return n[ip]}function BR(n,e,t,r){let i=n[Kc];throw e[UI]&&i.unshift(e[UI]),n.message=UR(`
`+n.message,i,t,r),n[kR]=i,n[Kc]=null,n}function UR(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==FR?n.slice(2):n;let i=Nt(e);if(Array.isArray(e))i=e.map(Nt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Nt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(OR,`
  `)}`}var ko=RE(IE("Optional"),8);var qp=RE(IE("SkipSelf"),4);function Co(n,e){let t=n.hasOwnProperty(Wc);return t?n[Wc]:null}function zp(n,e){n.forEach(t=>Array.isArray(t)?zp(t,e):e(t))}function ME(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Qc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function $R(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function HR(n,e,t){let r=Aa(n,e);return r>=0?n[r|1]=t:(r=~r,$R(n,r,e,t)),r}function Gf(n,e){let t=Aa(n,e);if(t>=0)return n[t|1]}function Aa(n,e){return qR(n,e,1)}function qR(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var _a={},ln=[],To=new W(""),NE=new W("",-1),PE=new W(""),Yc=class{get(e,t=va){if(t===va){let r=new Error(`NullInjectorError: No provider for ${Nt(e)}!`);throw r.name="NullInjectorError",r}return t}},kE=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(kE||{}),Dn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Dn||{}),Cr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Cr||{});function zR(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function sp(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];WR(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function GR(n){return n===3||n===4||n===6}function WR(n){return n.charCodeAt(0)===64}function Gp(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?$I(n,t,i,null,e[++r]):$I(n,t,i,null,null))}}return n}function $I(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var OE="ng-template";function KR(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&zR(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Wp(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Wp(n){return n.type===4&&n.value!==OE}function QR(n,e,t){let r=n.type===4&&!t?OE:n.value;return e===r}function YR(n,e,t){let r=4,i=n.attrs,o=i!==null?XR(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!cn(r)&&!cn(u))return!1;if(s&&cn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!QR(n,u,t)||u===""&&e.length===1){if(cn(r))return!1;s=!0}}else if(r&8){if(i===null||!KR(n,i,u,t)){if(cn(r))return!1;s=!0}}else{let l=e[++a],h=ZR(u,i,Wp(n),t);if(h===-1){if(cn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(cn(r))return!1;s=!0}}}}return cn(r)||s}function cn(n){return(n&1)===0}function ZR(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return eM(e,n)}function JR(n,e,t=!1){for(let r=0;r<e.length;r++)if(YR(n,e[r],t))return!0;return!1}function XR(n){for(let e=0;e<n.length;e++){let t=n[e];if(GR(t))return e}return n.length}function eM(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function HI(n,e){return n?":not("+e.trim()+")":e}function tM(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!cn(s)&&(e+=HI(o,i),i=""),r=s,o=o||!cn(r);t++}return i!==""&&(e+=HI(o,i)),e}function nM(n){return n.map(tM).join(",")}function rM(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!cn(i))break;i=o}r++}return{attrs:e,classes:t}}function st(n){return Sa(()=>{let e=BE(n),t=xe(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===kE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Dn.Emulated,styles:n.styles||ln,_:null,schemas:n.schemas||null,tView:null,id:""});UE(t);let r=n.dependencies;return t.directiveDefs=zI(r,!1),t.pipeDefs=zI(r,!0),t.id=sM(t),t})}function iM(n){return Tr(n)||FE(n)}function oM(n){return n!==null}function St(n){return Sa(()=>({type:n.type,bootstrap:n.bootstrap||ln,declarations:n.declarations||ln,imports:n.imports||ln,exports:n.exports||ln,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function qI(n,e){if(n==null)return _a;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Cr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Cr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Il(n){return Sa(()=>{let e=BE(n);return UE(e),e})}function Tr(n){return n[SR]||null}function FE(n){return n[AR]||null}function LE(n){return n[xR]||null}function VE(n){let e=Tr(n)||FE(n)||LE(n);return e!==null?e.standalone:!1}function jE(n,e){let t=n[RR]||null;if(!t&&e===!0)throw new Error(`Type ${Nt(n)} does not have '\u0275mod' property.`);return t}function BE(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||_a,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||ln,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:qI(n.inputs,e),outputs:qI(n.outputs),debugInfo:null}}function UE(n){n.features?.forEach(e=>e(n))}function zI(n,e){if(!n)return null;let t=e?LE:iM;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(oM)}function sM(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function aM(...n){return{\u0275providers:$E(!0,n),\u0275fromNgModule:!0}}function $E(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return zp(e,s=>{let a=s;ap(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&HE(i,o),t}function HE(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Kp(i,o=>{e(o,r)})}}function ap(n,e,t,r){if(n=Yt(n),!n)return!1;let i=null,o=VI(n),s=!o&&Tr(n);if(!o&&!s){let u=n.ngModule;if(o=VI(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)ap(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{zp(o.imports,h=>{ap(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&HE(l,e)}if(!a){let l=Co(i)||(()=>new i);e({provide:i,useFactory:l,deps:ln},i),e({provide:PE,useValue:i,multi:!0},i),e({provide:To,useValue:()=>O(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Kp(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Kp(n,e){for(let t of n)SE(t)&&(t=t.\u0275providers),Array.isArray(t)?Kp(t,e):e(t)}var uM=Se({provide:String,useValue:Se});function qE(n){return n!==null&&typeof n=="object"&&uM in n}function cM(n){return!!(n&&n.useExisting)}function lM(n){return!!(n&&n.useFactory)}function up(n){return typeof n=="function"}var El=new W(""),Hc={},dM={},Wf;function Qp(){return Wf===void 0&&(Wf=new Yc),Wf}var Bt=class{},wa=class extends Bt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,lp(e,s=>this.processProvider(s)),this.records.set(NE,vo(void 0,this)),i.has("environment")&&this.records.set(Bt,vo(void 0,this));let o=this.records.get(El);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(PE,ln,ae.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ce(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Ir(this),r=Qt(void 0),i;try{return e()}finally{Ir(t),Qt(r)}}get(e,t=va,r=ae.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(BI))return e[BI](this);r=wl(r);let i,o=Ir(this),s=Qt(void 0);try{if(!(r&ae.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=yM(e)&&_l(e);l&&this.injectableDefInScope(l)?u=vo(cp(e),Hc):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ae.Self?Qp():this.parent;return t=r&ae.Optional&&t===va?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Kc]=a[Kc]||[]).unshift(Nt(e)),o)throw a;return BR(a,e,"R3InjectorError",this.source)}else throw a}finally{Qt(s),Ir(o)}}resolveInjectorInitializers(){let e=Ce(null),t=Ir(this),r=Qt(void 0),i;try{let o=this.get(To,ln,ae.Self);for(let s of o)s()}finally{Ir(t),Qt(r),Ce(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Nt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new X(205,!1)}processProvider(e){e=Yt(e);let t=up(e)?e:Yt(e&&e.provide),r=fM(e);if(!up(e)&&e.multi===!0){let i=this.records.get(t);i||(i=vo(void 0,Hc,!0),i.factory=()=>op(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ce(null);try{return t.value===Hc&&(t.value=dM,t.value=t.factory()),typeof t.value=="object"&&t.value&&mM(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ce(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Yt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function cp(n){let e=_l(n),t=e!==null?e.factory:Co(n);if(t!==null)return t;if(n instanceof W)throw new X(204,!1);if(n instanceof Function)return hM(n);throw new X(204,!1)}function hM(n){if(n.length>0)throw new X(204,!1);let t=TR(n);return t!==null?()=>t.factory(n):()=>new n}function fM(n){if(qE(n))return vo(void 0,n.useValue);{let e=pM(n);return vo(e,Hc)}}function pM(n,e,t){let r;if(up(n)){let i=Yt(n);return Co(i)||cp(i)}else if(qE(n))r=()=>Yt(n.useValue);else if(lM(n))r=()=>n.useFactory(...op(n.deps||[]));else if(cM(n))r=()=>O(Yt(n.useExisting));else{let i=Yt(n&&(n.useClass||n.provide));if(gM(n))r=()=>new i(...op(n.deps));else return Co(i)||cp(i)}return r}function vo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function gM(n){return!!n.deps}function mM(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function yM(n){return typeof n=="function"||typeof n=="object"&&n instanceof W}function lp(n,e){for(let t of n)Array.isArray(t)?lp(t,e):t&&SE(t)?lp(t.\u0275providers,e):e(t)}function bn(n,e){n instanceof wa&&n.assertNotDestroyed();let t,r=Ir(n),i=Qt(void 0);try{return e()}finally{Ir(r),Qt(i)}}function zE(){return AE()!==void 0||LR()!=null}function vM(n){if(!zE())throw new X(-203,!1)}function _M(n){let e=Qn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function wM(n){return typeof n=="function"}var Yn=0,de=1,ne=2,Ct=3,dn=4,hn=5,Zc=6,GI=7,br=8,bo=9,Cn=10,Tt=11,Ia=12,WI=13,xa=14,Tn=15,So=16,_o=17,Ao=18,Dl=19,GE=20,Dr=21,Kf=22,Zt=23,Sr=25,WE=1;var pi=7,Jc=8,Xc=9,Jt=10,el=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(el||{});function hi(n){return Array.isArray(n)&&typeof n[WE]=="object"}function Zn(n){return Array.isArray(n)&&n[WE]===!0}function KE(n){return(n.flags&4)!==0}function Cl(n){return n.componentOffset>-1}function QE(n){return(n.flags&1)===1}function Ra(n){return!!n.template}function dp(n){return(n[ne]&512)!==0}var hp=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function YE(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Tl(){return ZE}function ZE(n){return n.type.prototype.ngOnChanges&&(n.setInput=EM),IM}Tl.ngInherit=!0;function IM(){let n=XE(this),e=n?.current;if(e){let t=n.previous;if(t===_a)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function EM(n,e,t,r,i){let o=this.declaredInputs[r],s=XE(n)||DM(n,{previous:_a,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new hp(l&&l.currentValue,t,u===_a),YE(n,e,i,t)}var JE="__ngSimpleChanges__";function XE(n){return n[JE]||null}function DM(n,e){return n[JE]=e}var KI=null;var Er=function(n,e,t){KI?.(n,e,t)},CM="svg",TM="math";function Gn(n){for(;Array.isArray(n);)n=n[Yn];return n}function eD(n,e){return Gn(e[n])}function Sn(n,e){return Gn(e[n.index])}function tD(n,e){return n.data[e]}function Oo(n,e){let t=e[n];return hi(t)?t:t[Yn]}function Yp(n){return(n[ne]&128)===128}function bM(n){return Zn(n[Ct])}function tl(n,e){return e==null?null:n[e]}function nD(n){n[_o]=0}function rD(n){n[ne]&1024||(n[ne]|=1024,Yp(n)&&Sl(n))}function bl(n){return!!(n[ne]&9216||n[Zt]?.dirty)}function fp(n){n[Cn].changeDetectionScheduler?.notify(8),n[ne]&64&&(n[ne]|=1024),bl(n)&&Sl(n)}function Sl(n){n[Cn].changeDetectionScheduler?.notify(0);let e=gi(n);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!Yp(e)));)e=gi(e)}function iD(n,e){if((n[ne]&256)===256)throw new X(911,!1);n[Dr]===null&&(n[Dr]=[]),n[Dr].push(e)}function SM(n,e){if(n[Dr]===null)return;let t=n[Dr].indexOf(e);t!==-1&&n[Dr].splice(t,1)}function gi(n){let e=n[Ct];return Zn(e)?e[Ct]:e}var ye={lFrame:gD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var oD=!1;function AM(){return ye.lFrame.elementDepthCount}function xM(){ye.lFrame.elementDepthCount++}function RM(){ye.lFrame.elementDepthCount--}function sD(){return ye.bindingsEnabled}function MM(){return ye.skipHydrationRootTNode!==null}function NM(n){return ye.skipHydrationRootTNode===n}function PM(){ye.skipHydrationRootTNode=null}function Ze(){return ye.lFrame.lView}function Rr(){return ye.lFrame.tView}function An(){let n=aD();for(;n!==null&&n.type===64;)n=n.parent;return n}function aD(){return ye.lFrame.currentTNode}function kM(){let n=ye.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ma(n,e){let t=ye.lFrame;t.currentTNode=n,t.isParent=e}function uD(){return ye.lFrame.isParent}function OM(){ye.lFrame.isParent=!1}function cD(){return oD}function QI(n){oD=n}function FM(){return ye.lFrame.bindingIndex}function LM(n){return ye.lFrame.bindingIndex=n}function lD(){return ye.lFrame.bindingIndex++}function dD(n){let e=ye.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function VM(){return ye.lFrame.inI18n}function jM(n,e){let t=ye.lFrame;t.bindingIndex=t.bindingRootIndex=n,pp(e)}function BM(){return ye.lFrame.currentDirectiveIndex}function pp(n){ye.lFrame.currentDirectiveIndex=n}function UM(n){let e=ye.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function hD(n){ye.lFrame.currentQueryIndex=n}function $M(n){let e=n[de];return e.type===2?e.declTNode:e.type===1?n[hn]:null}function fD(n,e,t){if(t&ae.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ae.Host);)if(i=$M(o),i===null||(o=o[xa],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ye.lFrame=pD();return r.currentTNode=e,r.lView=n,!0}function Zp(n){let e=pD(),t=n[de];ye.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function pD(){let n=ye.lFrame,e=n===null?null:n.child;return e===null?gD(n):e}function gD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function mD(){let n=ye.lFrame;return ye.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var yD=mD;function Jp(){let n=mD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function wi(){return ye.lFrame.selectedIndex}function mi(n){ye.lFrame.selectedIndex=n}function vD(){let n=ye.lFrame;return tD(n.tView,n.selectedIndex)}function HM(){return ye.lFrame.currentNamespace}var _D=!0;function Xp(){return _D}function eg(n){_D=n}function qM(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=ZE(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function tg(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function qc(n,e,t){wD(n,e,3,t)}function zc(n,e,t,r){(n[ne]&3)===t&&wD(n,e,t,r)}function Qf(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function wD(n,e,t,r){let i=r!==void 0?n[_o]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[_o]+=65536),(a<o||o==-1)&&(zM(n,t,e,u),n[_o]=(n[_o]&4294901760)+u+2),u++}function YI(n,e){Er(4,n,e);let t=Ce(null);try{e.call(n)}finally{Ce(t),Er(5,n,e)}}function zM(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ne]>>14<n[_o]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,YI(a,o)):YI(a,o)}var Do=-1,Ea=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function GM(n){return n instanceof Ea}function WM(n){return(n.flags&8)!==0}function KM(n){return(n.flags&16)!==0}var Yf={},gp=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=wl(r);let i=this.injector.get(e,Yf,r);return i!==Yf||t===Yf?i:this.parentInjector.get(e,t,r)}};function ID(n){return n!==Do}function nl(n){return n&32767}function QM(n){return n>>16}function rl(n,e){let t=QM(n),r=e;for(;t>0;)r=r[xa],t--;return r}var mp=!0;function ZI(n){let e=mp;return mp=n,e}var YM=256,ED=YM-1,DD=5,ZM=0,En={};function JM(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ga)&&(r=t[ga]),r==null&&(r=t[ga]=ZM++);let i=r&ED,o=1<<i;e.data[n+(i>>DD)]|=o}function CD(n,e){let t=TD(n,e);if(t!==-1)return t;let r=e[de];r.firstCreatePass&&(n.injectorIndex=e.length,Zf(r.data,n),Zf(e,null),Zf(r.blueprint,null));let i=ng(n,e),o=n.injectorIndex;if(ID(i)){let s=nl(i),a=rl(i,e),u=a[de].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Zf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function TD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function ng(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=RD(i),r===null)return Do;if(t++,i=i[xa],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Do}function XM(n,e,t){JM(n,e,t)}function bD(n,e,t){if(t&ae.Optional||n!==void 0)return n;Hp(e,"NodeInjector")}function SD(n,e,t,r){if(t&ae.Optional&&r===void 0&&(r=null),!(t&(ae.Self|ae.Host))){let i=n[bo],o=Qt(void 0);try{return i?i.get(e,r,t&ae.Optional):xE(e,r,t&ae.Optional)}finally{Qt(o)}}return bD(r,e,t)}function AD(n,e,t,r=ae.Default,i){if(n!==null){if(e[ne]&2048&&!(r&ae.Self)){let s=iN(n,e,t,r,En);if(s!==En)return s}let o=xD(n,e,t,r,En);if(o!==En)return o}return SD(e,t,r,i)}function xD(n,e,t,r,i){let o=nN(t);if(typeof o=="function"){if(!fD(e,n,r))return r&ae.Host?bD(i,t,r):SD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ae.Optional))Hp(t);else return s}finally{yD()}}else if(typeof o=="number"){let s=null,a=TD(n,e),u=Do,l=r&ae.Host?e[Tn][hn]:null;for((a===-1||r&ae.SkipSelf)&&(u=a===-1?ng(n,e):e[a+8],u===Do||!XI(r,!1)?a=-1:(s=e[de],a=nl(u),e=rl(u,e)));a!==-1;){let h=e[de];if(JI(o,a,h.data)){let p=eN(a,e,t,s,r,l);if(p!==En)return p}u=e[a+8],u!==Do&&XI(r,e[de].data[a+8]===l)&&JI(o,a,e)?(s=h,a=nl(u),e=rl(u,e)):a=-1}}return i}function eN(n,e,t,r,i,o){let s=e[de],a=s.data[n+8],u=r==null?Cl(a)&&mp:r!=s&&(a.type&3)!==0,l=i&ae.Host&&o===a,h=tN(a,s,t,u,l);return h!==null?Da(e,s,h,a):En}function tN(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let b=s[v];if(v<u&&t===b||v>=u&&b.type===t)return v}if(i){let v=s[u];if(v&&Ra(v)&&v.type===t)return u}return null}function Da(n,e,t,r){let i=n[t],o=e.data;if(GM(i)){let s=i;s.resolving&&NR(MR(o[t]));let a=ZI(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Qt(s.injectImpl):null,h=fD(n,r,ae.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&qM(t,o[t],e)}finally{l!==null&&Qt(l),ZI(a),s.resolving=!1,yD()}}return i}function nN(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ga)?n[ga]:void 0;return typeof e=="number"?e>=0?e&ED:rN:e}function JI(n,e,t){let r=1<<n;return!!(t[e+(n>>DD)]&r)}function XI(n,e){return!(n&ae.Self)&&!(n&ae.Host&&e)}var fi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return AD(this._tNode,this._lView,e,wl(r),t)}};function rN(){return new fi(An(),Ze())}function rg(n){return Sa(()=>{let e=n.prototype.constructor,t=e[Wc]||yp(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Wc]||yp(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function yp(n){return DE(n)?()=>{let e=yp(Yt(n));return e&&e()}:Co(n)}function iN(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ne]&2048&&!(s[ne]&512);){let a=xD(o,s,t,r|ae.Self,En);if(a!==En)return a;let u=o.parent;if(!u){let l=s[GE];if(l){let h=l.get(t,En,r);if(h!==En)return h}u=RD(s),s=s[xa]}o=u}return i}function RD(n){let e=n[de],t=e.type;return t===2?e.declTNode:t===1?n[hn]:null}function eE(n,e=null,t=null,r){let i=MD(n,e,t,r);return i.resolveInjectorInitializers(),i}function MD(n,e=null,t=null,r,i=new Set){let o=[t||ln,aM(n)];return r=r||(typeof n=="object"?void 0:Nt(n)),new wa(o,e||Qp(),r||null,i)}var Xt=class n{static{this.THROW_IF_NOT_FOUND=va}static{this.NULL=new Yc}static create(e,t){if(Array.isArray(e))return eE({name:""},t,e,"");{let r=e.name??"";return eE({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=H({token:n,providedIn:"any",factory:()=>O(NE)})}static{this.__NG_ELEMENT_ID__=-1}};var oN=new W("");oN.__NG_ELEMENT_ID__=n=>{let e=An();if(e===null)throw new X(204,!1);if(e.type&2)return e.value;if(n&ae.Optional)return null;throw new X(204,!1)};var sN="ngOriginalError";function Jf(n){return n[sN]}var ND=!0,ig=(()=>{class n{static{this.__NG_ELEMENT_ID__=aN}static{this.__NG_ENV_ID__=t=>t}}return n})(),vp=class extends ig{constructor(e){super(),this._lView=e}onDestroy(e){return iD(this._lView,e),()=>SM(this._lView,e)}};function aN(){return new vp(Ze())}var Fo=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ct(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})();var _p=class extends ze{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,zE()&&(this.destroyRef=j(ig,{optional:!0})??void 0,this.pendingTasks=j(Fo,{optional:!0})??void 0)}emit(e){let t=Ce(null);try{super.next(e)}finally{Ce(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof $e&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Dt=_p;function il(...n){}function PD(n){let e,t;function r(){n=il;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function tE(n){return queueMicrotask(()=>n()),()=>{n=il}}var og="isAngularZone",ol=og+"_ID",uN=0,pe=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Dt(!1),this.onMicrotaskEmpty=new Dt(!1),this.onStable=new Dt(!1),this.onError=new Dt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=ND}=e;if(typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,dN(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(og)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new X(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,cN,il,il);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},cN={};function sg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function lN(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){PD(()=>{n.callbackScheduled=!1,wp(n),n.isCheckStableRunning=!0,sg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),wp(n)}function dN(n){let e=()=>{lN(n)},t=uN++;n._inner=n._inner.fork({name:"angular",properties:{[og]:!0,[ol]:t,[ol+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(hN(u))return r.invokeTask(o,s,a,u);try{return nE(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),rE(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return nE(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!fN(u)&&e(),rE(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,wp(n),sg(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function wp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function nE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function rE(n){n._nesting--,sg(n)}var sl=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Dt,this.onMicrotaskEmpty=new Dt,this.onStable=new Dt,this.onError=new Dt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function hN(n){return kD(n,"__ignore_ng_zone__")}function fN(n){return kD(n,"__scheduler_tick__")}function kD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function pN(n="zone.js",e){return n==="noop"?new sl:n==="zone.js"?new pe(e):n}var Wn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Jf(e);for(;t&&Jf(t);)t=Jf(t);return t||null}},gN=new W("",{providedIn:"root",factory:()=>{let n=j(pe),e=j(Wn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function mN(){return Al(An(),Ze())}function Al(n,e){return new xl(Sn(n,e))}var xl=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=mN}}return n})();function OD(n){return(n.flags&128)===128}var FD=new Map,yN=0;function vN(){return yN++}function _N(n){FD.set(n[Dl],n)}function Ip(n){FD.delete(n[Dl])}var iE="__ngContext__";function yi(n,e){hi(e)?(n[iE]=e[Dl],_N(e)):n[iE]=e}function LD(n){return jD(n[Ia])}function VD(n){return jD(n[dn])}function jD(n){for(;n!==null&&!Zn(n);)n=n[dn];return n}var Ep;function BD(n){Ep=n}function wN(){if(Ep!==void 0)return Ep;if(typeof document<"u")return document;throw new X(210,!1)}var Rl=new W("",{providedIn:"root",factory:()=>IN}),IN="ng",ag=new W(""),Pt=new W("",{providedIn:"platform",factory:()=>"unknown"});var ug=new W("",{providedIn:"root",factory:()=>wN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var EN="h",DN="b";var CN=()=>null;function cg(n,e,t=!1){return CN(n,e,t)}var UD=!1,TN=new W("",{providedIn:"root",factory:()=>UD});var al=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${wE})`}};function Ml(n){return n instanceof al?n.changingThisBreaksApplicationSecurity:n}function $D(n,e){let t=bN(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${wE})`)}return t===e}function bN(n){return n instanceof al&&n.getTypeName()||null}var SN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function HD(n){return n=String(n),n.match(SN)?n:"unsafe:"+n}var lg=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(lg||{});function qD(n){let e=AN();return e?e.sanitize(lg.URL,n)||"":$D(n,"URL")?Ml(n):HD(ya(n))}function AN(){let n=Ze();return n&&n[Cn].sanitizer}function zD(n){return n instanceof Function?n():n}function xN(n){return(n??j(Xt)).get(Pt)==="browser"}var Kn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Kn||{}),RN;function dg(n,e){return RN(n,e)}function wo(n,e,t,r,i){if(r!=null){let o,s=!1;Zn(r)?o=r:hi(r)&&(s=!0,r=r[Yn]);let a=Gn(r);n===0&&t!==null?i==null?YD(e,t,a):ul(e,t,a,i||null,!0):n===1&&t!==null?ul(e,t,a,i||null,!0):n===2?zN(e,a,s):n===3&&e.destroyNode(a),o!=null&&WN(e,n,o,t,i)}}function MN(n,e){return n.createText(e)}function NN(n,e,t){n.setValue(e,t)}function GD(n,e,t){return n.createElement(e,t)}function PN(n,e){WD(n,e),e[Yn]=null,e[hn]=null}function kN(n,e,t,r,i,o){r[Yn]=i,r[hn]=e,Nl(n,r,t,1,i,o)}function WD(n,e){e[Cn].changeDetectionScheduler?.notify(9),Nl(n,e,e[Tt],2,null,null)}function ON(n){let e=n[Ia];if(!e)return Xf(n[de],n);for(;e;){let t=null;if(hi(e))t=e[Ia];else{let r=e[Jt];r&&(t=r)}if(!t){for(;e&&!e[dn]&&e!==n;)hi(e)&&Xf(e[de],e),e=e[Ct];e===null&&(e=n),hi(e)&&Xf(e[de],e),t=e&&e[dn]}e=t}}function FN(n,e,t,r){let i=Jt+r,o=t.length;r>0&&(t[i-1][dn]=e),r<o-Jt?(e[dn]=t[i],ME(t,Jt+r,e)):(t.push(e),e[dn]=null),e[Ct]=t;let s=e[So];s!==null&&t!==s&&KD(s,e);let a=e[Ao];a!==null&&a.insertView(n),fp(e),e[ne]|=128}function KD(n,e){let t=n[Xc],r=e[Ct];if(hi(r))n[ne]|=el.HasTransplantedViews;else{let i=r[Ct][Tn];e[Tn]!==i&&(n[ne]|=el.HasTransplantedViews)}t===null?n[Xc]=[e]:t.push(e)}function hg(n,e){let t=n[Xc],r=t.indexOf(e);t.splice(r,1)}function Dp(n,e){if(n.length<=Jt)return;let t=Jt+e,r=n[t];if(r){let i=r[So];i!==null&&i!==n&&hg(i,r),e>0&&(n[t-1][dn]=r[dn]);let o=Qc(n,Jt+e);PN(r[de],r);let s=o[Ao];s!==null&&s.detachView(o[de]),r[Ct]=null,r[dn]=null,r[ne]&=-129}return r}function QD(n,e){if(!(e[ne]&256)){let t=e[Tt];t.destroyNode&&Nl(n,e,t,3,null,null),ON(e)}}function Xf(n,e){if(e[ne]&256)return;let t=Ce(null);try{e[ne]&=-129,e[ne]|=256,e[Zt]&&Cf(e[Zt]),VN(n,e),LN(n,e),e[de].type===1&&e[Tt].destroy();let r=e[So];if(r!==null&&Zn(e[Ct])){r!==e[Ct]&&hg(r,e);let i=e[Ao];i!==null&&i.detachView(n)}Ip(e)}finally{Ce(t)}}function LN(n,e){let t=n.cleanup,r=e[GI];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[GI]=null);let i=e[Dr];if(i!==null){e[Dr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function VN(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ea)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Er(4,a,u);try{u.call(a)}finally{Er(5,a,u)}}else{Er(4,i,o);try{o.call(i)}finally{Er(5,i,o)}}}}}function jN(n,e,t){return BN(n,e.parent,t)}function BN(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Yn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Dn.None||o===Dn.Emulated)return null}return Sn(r,t)}}function ul(n,e,t,r,i){n.insertBefore(e,t,r,i)}function YD(n,e,t){n.appendChild(e,t)}function oE(n,e,t,r,i){r!==null?ul(n,e,t,r,i):YD(n,e,t)}function ZD(n,e){return n.parentNode(e)}function UN(n,e){return n.nextSibling(e)}function $N(n,e,t){return qN(n,e,t)}function HN(n,e,t){return n.type&40?Sn(n,t):null}var qN=HN,sE;function fg(n,e,t,r){let i=jN(n,r,e),o=e[Tt],s=r.parent||e[hn],a=$N(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)oE(o,i,t[u],a,!1);else oE(o,i,t,a,!1);sE!==void 0&&sE(o,r,e,t,i)}function pa(n,e){if(e!==null){let t=e.type;if(t&3)return Sn(e,n);if(t&4)return Cp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return pa(n,r);{let i=n[e.index];return Zn(i)?Cp(-1,i):Gn(i)}}else{if(t&128)return pa(n,e.next);if(t&32)return dg(e,n)()||Gn(n[e.index]);{let r=JD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=gi(n[Tn]);return pa(i,r)}else return pa(n,e.next)}}}return null}function JD(n,e){if(e!==null){let r=n[Tn][hn],i=e.projection;return r.projection[i]}return null}function Cp(n,e){let t=Jt+n+1;if(t<e.length){let r=e[t],i=r[de].firstChild;if(i!==null)return pa(r,i)}return e[pi]}function zN(n,e,t){n.removeChild(null,e,t)}function pg(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&yi(Gn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)pg(n,e,t.child,r,i,o,!1),wo(e,n,i,a,o);else if(u&32){let l=dg(t,r),h;for(;h=l();)wo(e,n,i,h,o);wo(e,n,i,a,o)}else u&16?GN(n,e,r,t,i,o):wo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Nl(n,e,t,r,i,o){pg(t,r,n.firstChild,e,i,o,!1)}function GN(n,e,t,r,i,o){let s=t[Tn],u=s[hn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];wo(e,n,i,h,o)}else{let l=u,h=s[Ct];OD(r)&&(l.flags|=128),pg(n,e,l,h,i,o,!0)}}function WN(n,e,t,r,i){let o=t[pi],s=Gn(t);o!==s&&wo(e,n,r,o,i);for(let a=Jt;a<t.length;a++){let u=t[a];Nl(u[de],u,n,e,r,o)}}function KN(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Kn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Kn.Important),n.setStyle(t,r,i,o))}}function QN(n,e,t){n.setAttribute(e,"style",t)}function XD(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function eC(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&sp(n,e,r),i!==null&&XD(n,e,i),o!==null&&QN(n,e,o)}var Jn={};function ve(n=1){tC(Rr(),Ze(),wi()+n,!1)}function tC(n,e,t,r){if(!r)if((e[ne]&3)===3){let o=n.preOrderCheckHooks;o!==null&&qc(e,o,t)}else{let o=n.preOrderHooks;o!==null&&zc(e,o,0,t)}mi(t)}function Je(n,e=ae.Default){let t=Ze();if(t===null)return O(n,e);let r=An();return AD(r,t,Yt(n),e)}function nC(){let n="invalid";throw new Error(n)}function rC(n,e,t,r,i,o){let s=Ce(null);try{let a=null;i&Cr.SignalBased&&(a=e[r][aI]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Cr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):YE(e,a,r,o)}finally{Ce(s)}}function YN(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)mi(~i);else{let o=i,s=t[++r],a=t[++r];jM(s,o);let u=e[o];a(2,u)}}}finally{mi(-1)}}function Pl(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Yn]=i,p[ne]=r|4|128|8|64,(l!==null||n&&n[ne]&2048)&&(p[ne]|=2048),nD(p),p[Ct]=p[xa]=n,p[br]=t,p[Cn]=s||n&&n[Cn],p[Tt]=a||n&&n[Tt],p[bo]=u||n&&n[bo]||null,p[hn]=o,p[Dl]=vN(),p[Zc]=h,p[GE]=l,p[Tn]=e.type==2?n[Tn]:p,p}function kl(n,e,t,r,i){let o=n.data[e];if(o===null)o=ZN(n,e,t,r,i),VM()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=kM();o.injectorIndex=s===null?-1:s.injectorIndex}return Ma(o,!0),o}function ZN(n,e,t,r,i){let o=aD(),s=uD(),a=s?o:o&&o.parent,u=n.data[e]=nP(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function iC(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function oC(n,e,t,r,i){let o=wi(),s=r&2;try{mi(-1),s&&e.length>Sr&&tC(n,e,Sr,!1),Er(s?2:0,i),t(r,i)}finally{mi(o),Er(s?3:1,i)}}function sC(n,e,t){if(KE(e)){let r=Ce(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{Ce(r)}}}function aC(n,e,t){sD()&&(uP(n,e,t,Sn(t,e)),(t.flags&64)===64&&fC(n,e,t))}function uC(n,e,t=Sn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function cC(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=gg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function gg(n,e,t,r,i,o,s,a,u,l,h){let p=Sr+r,m=p+i,v=JN(p,m),b=typeof l=="function"?l():l;return v[de]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:h}}function JN(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Jn);return t}function XN(n,e,t,r){let o=r.get(TN,UD)||t===Dn.ShadowDom,s=n.selectRootElement(e,o);return eP(s),s}function eP(n){tP(n)}var tP=()=>null;function nP(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return MM()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function aE(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Cr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?uE(r,t,l,a,u):uE(r,t,l,a)}return r}function uE(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function rP(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,v=m?m.inputs:null,b=m?m.outputs:null;u=aE(0,p.inputs,h,u,v),l=aE(1,p.outputs,h,l,b);let M=u!==null&&s!==null&&!Wp(e)?yP(u,h,s):null;a.push(M)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function iP(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function lC(n,e,t,r,i,o,s,a){let u=Sn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(mg(n,t,h,r,i),Cl(e)&&oP(t,e.index)):e.type&3?(r=iP(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function oP(n,e){let t=Oo(e,n);t[ne]&16||(t[ne]|=64)}function dC(n,e,t,r){if(sD()){let i=r===null?null:{"":-1},o=lP(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&hC(n,e,t,s,i,a),i&&dP(t,r,i)}t.mergedAttrs=Gp(t.mergedAttrs,t.attrs)}function hC(n,e,t,r,i,o){for(let l=0;l<r.length;l++)XM(CD(t,e),n,r[l].type);fP(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=iC(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=Gp(t.mergedAttrs,h.hostAttrs),pP(n,t,e,u,h),hP(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}rP(n,t,o)}function sP(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;aP(s)!=a&&s.push(a),s.push(t,r,o)}}function aP(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function uP(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Cl(t)&&gP(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||CD(t,e),yi(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=Da(e,n,a,t);if(yi(l,e),s!==null&&mP(e,a-i,l,u,t,s),Ra(u)){let h=Oo(t.index,e);h[br]=Da(e,n,a,t)}}}function fC(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=BM();try{mi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];pp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&cP(u,l)}}finally{mi(-1),pp(s)}}function cP(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function lP(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(JR(e,s.selectors,!1))if(r||(r=[]),Ra(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;Tp(n,e,u)}else r.unshift(s),Tp(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Tp(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function dP(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new X(-301,!1);r.push(e[i],o)}}}function hP(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ra(e)&&(t[""]=n)}}function fP(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function pP(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Co(i.type,!0)),s=new Ea(o,Ra(i),Je);n.blueprint[r]=s,t[r]=s,sP(n,e,r,iC(n,t,i.hostVars,Jn),i)}function gP(n,e,t){let r=Sn(e,n),i=cC(t),o=n[Cn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Ol(n,Pl(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function mP(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];rC(r,t,u,l,h,p)}}function yP(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function pC(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function gC(n,e){let t=n.contentQueries;if(t!==null){let r=Ce(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];hD(o),a.contentQueries(2,e[s],s)}}}finally{Ce(r)}}}function Ol(n,e){return n[Ia]?n[WI][dn]=e:n[Ia]=e,n[WI]=e,e}function bp(n,e,t){hD(0);let r=Ce(null);try{e(n,t)}finally{Ce(r)}}function vP(n,e){let t=n[bo],r=t?t.get(Wn,null):null;r&&r.handleError(e)}function mg(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];rC(h,l,r,a,u,i)}}function mC(n,e,t){let r=eD(e,n);NN(n[Tt],r,t)}function _P(n,e){let t=Oo(e,n),r=t[de];wP(r,t);let i=t[Yn];i!==null&&t[Zc]===null&&(t[Zc]=cg(i,t[bo])),yg(r,t,t[br])}function wP(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function yg(n,e,t){Zp(e);try{let r=n.viewQuery;r!==null&&bp(1,r,t);let i=n.template;i!==null&&oC(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ao]?.finishViewCreation(n),n.staticContentQueries&&gC(n,e),n.staticViewQueries&&bp(2,n.viewQuery,t);let o=n.components;o!==null&&IP(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ne]&=-5,Jp()}}function IP(n,e){for(let t=0;t<e.length;t++)_P(n,e[t])}function EP(n,e,t,r){let i=Ce(null);try{let o=e.tView,a=n[ne]&4096?4096:16,u=Pl(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[So]=l;let h=n[Ao];return h!==null&&(u[Ao]=h.createEmbeddedView(o)),yg(o,u,t),u}finally{Ce(i)}}function cE(n,e){return!e||e.firstChild===null||OD(n)}function DP(n,e,t,r=!0){let i=e[de];if(FN(i,e,n,t),r){let s=Cp(t,n),a=e[Tt],u=ZD(a,n[pi]);u!==null&&kN(i,n[hn],a,e,u,s)}let o=e[Zc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function cl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Gn(o)),Zn(o)&&CP(o,r);let s=t.type;if(s&8)cl(n,e,t.child,r);else if(s&32){let a=dg(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=JD(e,t);if(Array.isArray(a))r.push(...a);else{let u=gi(e[Tn]);cl(u[de],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function CP(n,e){for(let t=Jt;t<n.length;t++){let r=n[t],i=r[de].firstChild;i!==null&&cl(r[de],r,i,e)}n[pi]!==n[Yn]&&e.push(n[pi])}var yC=[];function TP(n){return n[Zt]??bP(n)}function bP(n){let e=yC.pop()??Object.create(AP);return e.lView=n,e}function SP(n){n.lView[Zt]!==n&&(n.lView=null,yC.push(n))}var AP=xe(V({},If),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Sl(n.lView)},consumerOnSignalRead(){this.lView[Zt]=this}});function xP(n){let e=n[Zt]??Object.create(RP);return e.lView=n,e}var RP=xe(V({},If),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=gi(n.lView);for(;e&&!vC(e[de]);)e=gi(e);e&&rD(e)},consumerOnSignalRead(){this.lView[Zt]=this}});function vC(n){return n.type!==2}var MP=100;function _C(n,e=!0,t=0){let r=n[Cn],i=r.rendererFactory,o=!1;o||i.begin?.();try{NP(n,t)}catch(s){throw e&&vP(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function NP(n,e){let t=cD();try{QI(!0),Sp(n,e);let r=0;for(;bl(n);){if(r===MP)throw new X(103,!1);r++,Sp(n,1)}}finally{QI(t)}}function PP(n,e,t,r){let i=e[ne];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Cn].inlineEffectRunner?.flush(),Zp(e);let a=!0,u=null,l=null;o||(vC(n)?(l=TP(e),u=Ef(l)):uI()===null?(a=!1,l=xP(e),u=Ef(l)):e[Zt]&&(Cf(e[Zt]),e[Zt]=null));try{nD(e),LM(n.bindingStartIndex),t!==null&&oC(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let v=n.preOrderCheckHooks;v!==null&&qc(e,v,null)}else{let v=n.preOrderHooks;v!==null&&zc(e,v,0,null),Qf(e,0)}if(s||kP(e),wC(e,0),n.contentQueries!==null&&gC(n,e),!o)if(h){let v=n.contentCheckHooks;v!==null&&qc(e,v)}else{let v=n.contentHooks;v!==null&&zc(e,v,1),Qf(e,1)}YN(n,e);let p=n.components;p!==null&&EC(e,p,0);let m=n.viewQuery;if(m!==null&&bp(2,m,r),!o)if(h){let v=n.viewCheckHooks;v!==null&&qc(e,v)}else{let v=n.viewHooks;v!==null&&zc(e,v,2),Qf(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Kf]){for(let v of e[Kf])v();e[Kf]=null}o||(e[ne]&=-73)}catch(h){throw o||Sl(e),h}finally{l!==null&&(cI(l,u),a&&SP(l)),Jp()}}function wC(n,e){for(let t=LD(n);t!==null;t=VD(t))for(let r=Jt;r<t.length;r++){let i=t[r];IC(i,e)}}function kP(n){for(let e=LD(n);e!==null;e=VD(e)){if(!(e[ne]&el.HasTransplantedViews))continue;let t=e[Xc];for(let r=0;r<t.length;r++){let i=t[r];rD(i)}}}function OP(n,e,t){let r=Oo(e,n);IC(r,t)}function IC(n,e){Yp(n)&&Sp(n,e)}function Sp(n,e){let r=n[de],i=n[ne],o=n[Zt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Df(o)),s||=!1,o&&(o.dirty=!1),n[ne]&=-9217,s)PP(r,n,r.template,n[br]);else if(i&8192){wC(n,1);let a=r.components;a!==null&&EC(n,a,1)}}function EC(n,e,t){for(let r=0;r<e.length;r++)OP(n,e[r],t)}function DC(n,e){let t=cD()?64:1088;for(n[Cn].changeDetectionScheduler?.notify(e);n;){n[ne]|=t;let r=gi(n);if(dp(n)&&!r)return n;n=r}return null}var vi=class{get rootNodes(){let e=this._lView,t=e[de];return cl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[br]}set context(e){this._lView[br]=e}get destroyed(){return(this._lView[ne]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ct];if(Zn(e)){let t=e[Jc],r=t?t.indexOf(this):-1;r>-1&&(Dp(e,r),Qc(t,r))}this._attachedToViewContainer=!1}QD(this._lView[de],this._lView)}onDestroy(e){iD(this._lView,e)}markForCheck(){DC(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){fp(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,_C(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=dp(this._lView),t=this._lView[So];t!==null&&!e&&hg(t,this._lView),WD(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=e;let t=dp(this._lView),r=this._lView[So];r!==null&&!t&&KD(r,this._lView),fp(this._lView)}},vg=(()=>{class n{static{this.__NG_ELEMENT_ID__=VP}}return n})(),FP=vg,LP=class extends FP{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=EP(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new vi(i)}};function VP(){return jP(An(),Ze())}function jP(n,e){return n.type&4?new LP(e,n,Al(n,e)):null}var rz=new RegExp(`^(\\d+)*(${DN}|${EN})*(.*)`);var BP=()=>null;function lE(n,e){return BP(n,e)}var xo=class{},_g=new W("",{providedIn:"root",factory:()=>!1});var CC=new W(""),TC=new W(""),Ap=class{},ll=class{};function UP(n){let e=Error(`No component factory found for ${Nt(n)}.`);return e[$P]=n,e}var $P="ngComponent";var xp=class{resolveComponentFactory(e){throw UP(e)}},Ro=class{static{this.NULL=new xp}},Mo=class{};var HP=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>null})}}return n})();function Rp(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=FI(i,a);else if(o==2){let u=a,l=e[++s];r=FI(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var dl=class extends Ro{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Tr(e);return new No(t,this.ngModule)}};function dE(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Cr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Cr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function qP(n){let e=n.toLowerCase();return e==="svg"?CM:e==="math"?TM:null}var No=class extends ll{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=dE(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return dE(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=nM(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Ce(null);try{i=i||this.ngModule;let s=i instanceof Bt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new gp(e,s):e,u=a.get(Mo,null);if(u===null)throw new X(407,!1);let l=a.get(HP,null),h=a.get(xo,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",b=r?XN(m,r,this.componentDef.encapsulation,a):GD(m,v,qP(v)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let N=null;b!==null&&(N=cg(b,a,!0));let B=gg(0,null,null,1,0,null,null,null,null,null,null),q=Pl(null,B,null,M,null,null,p,m,a,null,N);Zp(q);let F,Y,ee=null;try{let Z=this.componentDef,I,y=null;Z.findHostDirectiveDefs?(I=[],y=new Map,Z.findHostDirectiveDefs(Z,I,y),I.push(Z)):I=[Z];let w=zP(q,b);ee=GP(w,b,Z,I,q,p,m),Y=tD(B,Sr),b&&QP(m,Z,b,r),t!==void 0&&YP(Y,this.ngContentSelectors,t),F=KP(ee,Z,I,y,q,[ZP]),yg(B,q,null)}catch(Z){throw ee!==null&&Ip(ee),Ip(q),Z}finally{Jp()}return new Mp(this.componentType,F,Al(Y,q),q,Y)}finally{Ce(o)}}},Mp=class extends Ap{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new vi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;mg(o[de],o,i,e,t),this.previousInputValues.set(e,t);let s=Oo(this._tNode.index,o);DC(s,1)}}get injector(){return new fi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function zP(n,e){let t=n[de],r=Sr;return n[r]=e,kl(t,r,2,"#host",null)}function GP(n,e,t,r,i,o,s){let a=i[de];WP(r,n,e,s);let u=null;e!==null&&(u=cg(e,i[bo]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Pl(i,cC(t),null,h,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&Tp(a,n,r.length-1),Ol(i,p),i[n.index]=p}function WP(n,e,t,r){for(let i of n)e.mergedAttrs=Gp(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Rp(e,e.mergedAttrs,!0),t!==null&&eC(r,t,e))}function KP(n,e,t,r,i,o){let s=An(),a=i[de],u=Sn(s,i);hC(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=Da(i,a,p,s);yi(m,i)}fC(a,i,s),u&&yi(u,i);let l=Da(i,a,s.directiveStart+s.componentOffset,s);if(n[br]=i[br]=l,o!==null)for(let h of o)h(l,e);return sC(a,s,i),l}function QP(n,e,t,r){if(r)sp(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=rM(e.selectors[0]);i&&sp(n,t,i),o&&o.length>0&&XD(n,t,o.join(" "))}}function YP(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function ZP(){let n=An();tg(Ze()[de],n)}var Na=(()=>{class n{static{this.__NG_ELEMENT_ID__=JP}}return n})();function JP(){let n=An();return e1(n,Ze())}var XP=Na,bC=class extends XP{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Al(this._hostTNode,this._hostLView)}get injector(){return new fi(this._hostTNode,this._hostLView)}get parentInjector(){let e=ng(this._hostTNode,this._hostLView);if(ID(e)){let t=rl(e,this._hostLView),r=nl(e),i=t[de].data[r+8];return new fi(i,t)}else return new fi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=hE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Jt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=lE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,cE(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!wM(e),a;if(s)a=t;else{let b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let u=s?e:new No(Tr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let M=(s?l:this.parentInjector).get(Bt,null);M&&(o=M)}let h=Tr(u.componentType??{}),p=lE(this._lContainer,h?.id??null),m=p?.firstChild??null,v=u.create(l,i,m,o);return this.insertImpl(v.hostView,a,cE(this._hostTNode,p)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(bM(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Ct],l=new bC(u,u[hn],u[Ct]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return DP(s,i,o,r),e.attachToViewContainerRef(),ME(ep(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=hE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Dp(this._lContainer,t);r&&(Qc(ep(this._lContainer),t),QD(r[de],r))}detach(e){let t=this._adjustIndex(e,-1),r=Dp(this._lContainer,t);return r&&Qc(ep(this._lContainer),t)!=null?new vi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function hE(n){return n[Jc]}function ep(n){return n[Jc]||(n[Jc]=[])}function e1(n,e){let t,r=e[n.index];return Zn(r)?t=r:(t=pC(r,e,null,n),e[n.index]=t,Ol(e,t)),n1(t,e,n,r),new bC(t,n,e)}function t1(n,e){let t=n[Tt],r=t.createComment(""),i=Sn(e,n),o=ZD(t,i);return ul(t,o,r,UN(t,i),!1),r}var n1=o1,r1=()=>!1;function i1(n,e,t){return r1(n,e,t)}function o1(n,e,t,r){if(n[pi])return;let i;t.type&8?i=Gn(r):i=t1(e,t),n[pi]=i}var fE=new Set;function wg(n){fE.has(n)||(fE.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function s1(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(l1))}return o}return hl.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(v=>{a[l+m]=v,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>d1(o));e.push(u)}),u1(),Promise.all(e).then(()=>{})}var hl=new Map,a1=new Set;function u1(){let n=hl;return hl=new Map,n}function c1(){return hl.size===0}function l1(n){return typeof n=="string"?n:n.text()}function d1(n){a1.delete(n)}var Ar=class{},Ca=class{};var fl=class extends Ar{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new dl(this);let o=jE(e);this._bootstrapComponents=zD(o.bootstrap),this._r3Injector=MD(e,t,[{provide:Ar,useValue:this},{provide:Ro,useValue:this.componentFactoryResolver},...r],Nt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},pl=class extends Ca{constructor(e){super(),this.moduleType=e}create(e){return new fl(this.moduleType,e,[])}};function h1(n,e,t){return new fl(n,e,t,!1)}var Np=class extends Ar{constructor(e){super(),this.componentFactoryResolver=new dl(this),this.instance=null;let t=new wa([...e.providers,{provide:Ar,useValue:this},{provide:Ro,useValue:this.componentFactoryResolver}],e.parent||Qp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Fl(n,e,t=null){return new Np({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function SC(n){return p1(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function f1(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function p1(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Ta(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function g1(n,e,t,r){let i=Ta(n,e,t);return Ta(n,e+1,r)||i}function m1(n){return(n.flags&32)===32}function y1(n,e,t,r,i,o,s,a,u){let l=e.consts,h=kl(e,n,4,s||null,a||null);dC(e,t,h,tl(l,u)),tg(e,h);let p=h.tView=gg(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function v1(n,e,t,r,i,o,s,a,u,l){let h=t+Sr,p=e.firstCreatePass?y1(h,e,n,r,i,o,s,a,u):e.data[h];Ma(p,!1);let m=_1(e,n,p,t);Xp()&&fg(e,n,m,p),yi(m,n);let v=pC(m,n,m,p);return n[h]=v,Ol(n,v),i1(v,p,n),QE(p)&&aC(e,n,p),u!=null&&uC(n,p,l),p}function Ut(n,e,t,r,i,o,s,a){let u=Ze(),l=Rr(),h=tl(l.consts,o);return v1(u,l,n,e,t,r,i,h,s,a),Ut}var _1=w1;function w1(n,e,t,r){return eg(!0),e[Tt].createComment("")}var Io=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Io||{}),AC=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Pp=class n{constructor(){this.ngZone=j(pe),this.scheduler=j(xo),this.errorHandler=j(Wn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Io.EarlyRead,Io.Write,Io.MixedReadWrite,Io.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}},kp=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Ig(n,e){!e?.injector&&vM(Ig);let t=e?.injector??j(Xt);return xN(t)?(wg("NgAfterNextRender"),E1(n,t,e,!0)):D1}function I1(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function E1(n,e,t,r){let i=e.get(AC);i.impl??=e.get(Pp);let o=t?.phase??Io.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(ig):null,a=new kp(i.impl,I1(n,o),r,s);return i.impl.register(a),a}var D1={destroy(){}};function xC(n,e,t,r){return Ta(n,lD(),t)?e+ya(t)+r:Jn}function C1(n,e,t,r,i,o){let s=FM(),a=g1(n,s,t,i);return dD(2),a?e+ya(t)+r+ya(i)+o:Jn}function Bc(n,e){return n<<17|e<<2}function _i(n){return n>>17&32767}function T1(n){return(n&2)==2}function b1(n,e){return n&131071|e<<17}function Op(n){return n|2}function Po(n){return(n&131068)>>2}function tp(n,e){return n&-131069|e<<2}function S1(n){return(n&1)===1}function Fp(n){return n|1}function A1(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=_i(s),u=Po(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Aa(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=_i(n[a+1]);n[r+1]=Bc(m,a),m!==0&&(n[m+1]=tp(n[m+1],r)),n[a+1]=b1(n[a+1],r)}else n[r+1]=Bc(a,0),a!==0&&(n[a+1]=tp(n[a+1],r)),a=r;else n[r+1]=Bc(u,0),a===0?a=r:n[u+1]=tp(n[u+1],r),u=r;l&&(n[r+1]=Op(n[r+1])),pE(n,h,r,!0),pE(n,h,r,!1),x1(e,h,n,r,o),s=Bc(a,u),o?e.classBindings=s:e.styleBindings=s}function x1(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Aa(o,e)>=0&&(t[r+1]=Fp(t[r+1]))}function pE(n,e,t,r){let i=n[t+1],o=e===null,s=r?_i(i):Po(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];R1(u,e)&&(a=!0,n[s+1]=r?Fp(l):Op(l)),s=r?_i(l):Po(l)}a&&(n[t+1]=r?Op(i):Fp(i))}function R1(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Aa(n,e)>=0:!1}function $t(n,e,t){let r=Ze(),i=lD();if(Ta(r,i,e)){let o=Rr(),s=vD();lC(o,s,r,n,e,r[Tt],t,!1)}return $t}function gE(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";mg(n,t,o[s],s,r)}function Ll(n,e,t){return M1(n,e,t,!1),Ll}function M1(n,e,t,r){let i=Ze(),o=Rr(),s=dD(2);if(o.firstUpdatePass&&P1(o,n,s,r),e!==Jn&&Ta(i,s,e)){let a=o.data[wi()];V1(o,a,i,i[Tt],n,i[s+1]=j1(e,t),r,s)}}function N1(n,e){return e>=n.expandoStartIndex}function P1(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[wi()],s=N1(n,t);B1(o,r)&&e===null&&!s&&(e=!1),e=k1(i,o,e,r),A1(i,o,e,t,s,r)}}function k1(n,e,t,r){let i=UM(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=np(null,n,e,t,r),t=ba(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=np(i,n,e,t,r),o===null){let u=O1(n,e,r);u!==void 0&&Array.isArray(u)&&(u=np(null,n,e,u[1],r),u=ba(u,e.attrs,r),F1(n,e,r,u))}else o=L1(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function O1(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Po(r)!==0)return n[_i(r)]}function F1(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[_i(i)]=r}function L1(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=ba(r,s,t)}return ba(r,e.attrs,t)}function np(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=ba(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function ba(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),HR(n,s,t?!0:e[++o]))}return n===void 0?null:n}function V1(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=S1(l)?mE(u,e,t,i,Po(l),s):void 0;if(!gl(h)){gl(o)||T1(l)&&(o=mE(u,null,t,i,a,s));let p=eD(wi(),t);KN(r,s,p,i,o)}}function mE(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===Jn&&(m=p?ln:void 0);let v=p?Gf(m,r):h===r?m:void 0;if(l&&!gl(v)&&(v=Gf(u,r)),gl(v)&&(a=v,s))return a;let b=n[i+1];i=s?_i(b):Po(b)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Gf(u,r))}return a}function gl(n){return n!==void 0}function j1(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Nt(Ml(n)))),n}function B1(n,e){return(n.flags&(e?8:16))!==0}function U1(n,e,t,r,i,o){let s=e.consts,a=tl(s,i),u=kl(e,n,2,r,a);return dC(e,t,u,tl(s,o)),u.attrs!==null&&Rp(u,u.attrs,!1),u.mergedAttrs!==null&&Rp(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function he(n,e,t,r){let i=Ze(),o=Rr(),s=Sr+n,a=i[Tt],u=o.firstCreatePass?U1(s,o,i,e,t,r):o.data[s],l=$1(o,i,u,a,e,n);i[s]=l;let h=QE(u);return Ma(u,!0),eC(a,l,u),!m1(u)&&Xp()&&fg(o,i,l,u),AM()===0&&yi(l,i),xM(),h&&(aC(o,i,u),sC(o,u,i)),r!==null&&uC(i,u),he}function fe(){let n=An();uD()?OM():(n=n.parent,Ma(n,!1));let e=n;NM(e)&&PM(),RM();let t=Rr();return t.firstCreatePass&&(tg(t,n),KE(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&WM(e)&&gE(t,e,Ze(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&KM(e)&&gE(t,e,Ze(),e.stylesWithoutHost,!1),fe}function Re(n,e,t,r){return he(n,e,t,r),fe(),Re}var $1=(n,e,t,r,i,o)=>(eg(!0),GD(r,i,HM()));var ml="en-US";var H1=ml;function q1(n){typeof n=="string"&&(H1=n.toLowerCase().replace(/_/g,"-"))}function Eg(n,e,t){return RC(n,"",e,"",t),Eg}function RC(n,e,t,r,i){let o=Ze(),s=xC(o,e,t,r);if(s!==Jn){let a=Rr(),u=vD();lC(a,u,o,n,s,o[Tt],i,!1)}return RC}function Ie(n,e=""){let t=Ze(),r=Rr(),i=n+Sr,o=r.firstCreatePass?kl(r,i,1,e,null):r.data[i],s=z1(r,t,o,e,n);t[i]=s,Xp()&&fg(r,t,s,o),Ma(o,!1)}var z1=(n,e,t,r,i)=>(eg(!0),MN(e[Tt],r));function Pe(n,e,t){let r=Ze(),i=xC(r,n,e,t);return i!==Jn&&mC(r,wi(),i),Pe}function Dg(n,e,t,r,i){let o=Ze(),s=C1(o,n,e,t,r,i);return s!==Jn&&mC(o,wi(),s),Dg}var G1=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=$E(!1,t.type),i=r.length>0?Fl([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(O(Bt))})}}return n})();function MC(n){wg("NgStandalone"),n.getStandaloneInjector=e=>e.get(G1).getOrCreateStandaloneInjector(n)}var Uc=null;function W1(n){Uc!==null&&(n.defaultEncapsulation!==Uc.defaultEncapsulation||n.preserveWhitespaces!==Uc.preserveWhitespaces)||(Uc=n)}var xr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},NC=new xr("18.2.13");var Vl=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var Cg=new W(""),Pa=new W(""),jl=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Tg||(K1(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(O(pe),O(Bl),O(Pa))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Bl=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Tg?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function K1(n){Tg=n}var Tg;function ka(n){return!!n&&typeof n.then=="function"}function PC(n){return!!n&&typeof n.subscribe=="function"}var Ul=new W(""),kC=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=j(Ul,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(ka(o))t.push(o);else if(PC(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),bg=new W("");function Q1(){lI(()=>{throw new X(600,!1)})}function Y1(n){return n.isBoundToModule}var Z1=10;function J1(n,e,t){try{let r=t();return ka(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function OC(n,e){return Array.isArray(e)?e.reduce(OC,n):V(V({},n),e)}var Mr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=j(gN),this.afterRenderManager=j(AC),this.zonelessEnabled=j(_g),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ze,this.afterTick=new ze,this.componentTypes=[],this.components=[],this.isStable=j(Fo).hasPendingTasks.pipe(G(t=>!t)),this._injector=j(Bt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof ll;if(!this._injector.get(kC).done){let m=!i&&VE(t),v=!1;throw new X(405,v)}let s;i?s=t:s=this._injector.get(Ro).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=Y1(s)?void 0:this._injector.get(Ar),u=r||s.selector,l=s.create(Xt.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(Cg,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Gc(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new X(101,!1);let t=Ce(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ce(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Mo,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<Z1;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)X1(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>bl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Gc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(bg,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Gc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new X(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Gc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function X1(n,e,t,r){if(!t&&!bl(n))return;_C(n,e,t&&!r?0:1)}var Lp=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},$l=(()=>{class n{compileModuleSync(t){return new pl(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=jE(t),o=zD(i.declarations).reduce((s,a)=>{let u=Tr(a);return u&&s.push(new No(u)),s},[]);return new Lp(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ek=new W("");function tk(n,e,t){let r=new pl(t);return Promise.resolve(r)}function yE(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var nk=(()=>{class n{constructor(){this.zone=j(pe),this.changeDetectionScheduler=j(xo),this.applicationRef=j(Mr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function rk({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new pe(xe(V({},FC()),{scheduleInRootZone:t})),[{provide:pe,useFactory:n},{provide:To,multi:!0,useFactory:()=>{let r=j(nk,{optional:!0});return()=>r.initialize()}},{provide:To,multi:!0,useFactory:()=>{let r=j(ik);return()=>{r.initialize()}}},e===!0?{provide:CC,useValue:!0}:[],{provide:TC,useValue:t??ND}]}function FC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var ik=(()=>{class n{constructor(){this.subscription=new $e,this.initialized=!1,this.zone=j(pe),this.pendingTasks=j(Fo)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{pe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ok=(()=>{class n{constructor(){this.appRef=j(Mr),this.taskService=j(Fo),this.ngZone=j(pe),this.zonelessEnabled=j(_g),this.disableScheduling=j(CC,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new $e,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ol):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(TC,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof sl||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?tE:PD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ol+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,tE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function sk(){return typeof $localize<"u"&&$localize.locale||ml}var Sg=new W("",{providedIn:"root",factory:()=>j(Sg,ae.Optional|ae.SkipSelf)||sk()});var yl=new W("");function $c(n){return!n.moduleRef}function ak(n){let e=$c(n)?n.r3Injector:n.moduleRef.injector,t=e.get(pe);return t.run(()=>{$c(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Wn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),$c(n)){let o=()=>e.destroy(),s=n.platformInjector.get(yl);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(yl);s.add(o),n.moduleRef.onDestroy(()=>{Gc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return J1(r,t,()=>{let o=e.get(kC);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Sg,ml);if(q1(s||ml),$c(n)){let a=e.get(Mr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return uk(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function uk(n,e){let t=n.injector.get(Mr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new X(-403,!1);e.push(n)}var LC=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>pN(r?.ngZone,xe(V({},FC({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[rk({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:xo,useExisting:ok}],u=h1(t.moduleType,this.injector,a);return ak({moduleRef:u,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=OC({},r);return tk(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new X(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(yl,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(O(Xt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),ma=null,VC=new W("");function ck(n){if(ma&&!ma.get(VC,!1))throw new X(400,!1);Q1(),ma=n;let e=n.get(LC);return hk(n),e}function Ag(n,e,t=[]){let r=`Platform: ${e}`,i=new W(r);return(o=[])=>{let s=jC();if(!s||s.injector.get(VC,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):ck(lk(a,r))}return dk(i)}}function lk(n=[],e){return Xt.create({name:e,providers:[{provide:El,useValue:"platform"},{provide:yl,useValue:new Set([()=>ma=null])},...n]})}function dk(n){let e=jC();if(!e)throw new X(401,!1);return e}function jC(){return ma?.get(LC)??null}function hk(n){n.get(ag,null)?.forEach(t=>t())}function xg(){return!1}var Oa=(()=>{class n{static{this.__NG_ELEMENT_ID__=fk}}return n})();function fk(n){return pk(An(),Ze(),(n&16)===16)}function pk(n,e,t){if(Cl(n)&&!t){let r=Oo(n.index,e);return new vi(r,r)}else if(n.type&175){let r=e[Tn];return new vi(r,e)}return null}var Vp=class{constructor(){}supports(e){return SC(e)}create(e){return new jp(e)}},gk=(n,e)=>e,jp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||gk}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<vE(r,i,o)?t:r,a=vE(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let v=m<o.length?o[m]:o[m]=0,b=v+m;h<=b&&b<l&&(o[m]=v+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!SC(e))throw new X(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,f1(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Bp(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new vl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new vl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Bp=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Up=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},vl=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Up,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function vE(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function _E(){return new Rg([new Vp])}var Rg=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:_E})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||_E()),deps:[[n,new qp,new ko]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new X(901,!1)}}return n})();var BC=Ag(null,"core",[]),UC=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(O(Mr))}}static{this.\u0275mod=St({type:n})}static{this.\u0275inj=bt({})}}return n})();function $C(n){let e=Tr(n);if(!e)return null;let t=new No(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var WC=null;function Ii(){return WC}function KC(n){WC??=n}var Hl=class{};var kt=new W(""),kg=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(_k),providedIn:"platform"})}}return n})(),QC=new W(""),_k=(()=>{class n extends kg{constructor(){super(),this._doc=j(kt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ii().getBaseHref(this._doc)}onPopState(t){let r=Ii().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Ii().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Og(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function HC(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Xn(n){return n&&n[0]!=="?"?"?"+n:n}var Ei=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(Fg),providedIn:"root"})}}return n})(),YC=new W(""),Fg=(()=>{class n extends Ei{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(kt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Og(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Xn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Xn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Xn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(kg),O(YC,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ZC=(()=>{class n extends Ei{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Og(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Xn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Xn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(kg),O(YC,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Lo=(()=>{class n{constructor(t){this._subject=new Dt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Ek(HC(qC(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Xn(r))}normalize(t){return n.stripTrailingSlash(Ik(this._basePath,qC(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Xn}static{this.joinWithSlash=Og}static{this.stripTrailingSlash=HC}static{this.\u0275fac=function(r){return new(r||n)(O(Ei))}}static{this.\u0275prov=H({token:n,factory:()=>wk(),providedIn:"root"})}}return n})();function wk(){return new Lo(O(Ei))}function Ik(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function qC(n){return n.replace(/\/index.html$/,"")}function Ek(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function JC(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Mg=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},en=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Mg(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),zC(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);zC(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Je(Na),Je(vg),Je(Rg))}}static{this.\u0275dir=Il({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function zC(n,e){n.context.$implicit=e.item}var XC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=St({type:n})}static{this.\u0275inj=bt({})}}return n})(),Lg="browser",Dk="server";function Ck(n){return n===Lg}function Di(n){return n===Dk}var eT=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>Ck(j(Pt))?new Ng(j(kt),window):new Pg})}}return n})(),Ng=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=Tk(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function Tk(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Pg=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},ql=class{};var Bg=class extends Hl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ug=class n extends Bg{static makeCurrent(){KC(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Sk();return t==null?null:Ak(t)}resetBaseElement(){Fa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return JC(document.cookie,e)}},Fa=null;function Sk(){return Fa=Fa||document.querySelector("base"),Fa?Fa.getAttribute("href"):null}function Ak(n){return new URL(n,document.baseURI).pathname}var $g=class{addToWindow(e){Qn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new X(5103,!1);return o},Qn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Qn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Qn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Qn.frameworkStabilizers||(Qn.frameworkStabilizers=[]),Qn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Ii().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},xk=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Hg=new W(""),iT=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new X(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(O(Hg),O(pe))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),zl=class{constructor(e){this._doc=e}},Vg="ng-app-id",oT=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Di(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Vg}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Vg),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Vg,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(O(kt),O(Rl),O(ug,8),O(Pt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),jg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},zg=/%COMP%/g,sT="%COMP%",Rk=`_nghost-${sT}`,Mk=`_ngcontent-${sT}`,Nk=!0,Pk=new W("",{providedIn:"root",factory:()=>Nk});function kk(n){return Mk.replace(zg,n)}function Ok(n){return Rk.replace(zg,n)}function aT(n,e){return e.map(t=>t.replace(zg,n))}var tT=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Di(a),this.defaultRenderer=new La(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Dn.ShadowDom&&(r=xe(V({},r),{encapsulation:Dn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Gl?i.applyToHost(t):i instanceof Va&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Dn.Emulated:o=new Gl(u,l,r,this.appId,h,s,a,p);break;case Dn.ShadowDom:return new qg(u,l,t,r,s,a,this.nonce,p);default:o=new Va(u,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(O(iT),O(oT),O(Rl),O(Pk),O(kt),O(Pt),O(pe),O(ug))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),La=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(jg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(nT(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(nT(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new X(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=jg[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=jg[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Kn.DashCase|Kn.Important)?e.style.setProperty(t,r,i&Kn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Kn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Ii().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function nT(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var qg=class extends La{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=aT(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Va=class extends La{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?aT(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Gl=class extends Va{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=kk(l),this.hostAttr=Ok(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},Fk=(()=>{class n extends zl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(O(kt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),rT=["alt","control","meta","shift"],Lk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vk={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},jk=(()=>{class n extends zl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ii().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),rT.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=Lk[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),rT.forEach(s=>{if(s!==i){let a=Vk[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(O(kt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function Bk(){Ug.makeCurrent()}function Uk(){return new Wn}function $k(){return BD(document),document}var Hk=[{provide:Pt,useValue:Lg},{provide:ag,useValue:Bk,multi:!0},{provide:kt,useFactory:$k,deps:[]}],uT=Ag(BC,"browser",Hk),qk=new W(""),zk=[{provide:Pa,useClass:$g,deps:[]},{provide:Cg,useClass:jl,deps:[pe,Bl,Pa]},{provide:jl,useClass:jl,deps:[pe,Bl,Pa]}],Gk=[{provide:El,useValue:"root"},{provide:Wn,useFactory:Uk,deps:[]},{provide:Hg,useClass:Fk,multi:!0,deps:[kt,pe,Pt]},{provide:Hg,useClass:jk,multi:!0,deps:[kt]},tT,oT,iT,{provide:Mo,useExisting:tT},{provide:ql,useClass:xk,deps:[]},[]],cT=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Rl,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(O(qk,12))}}static{this.\u0275mod=St({type:n})}static{this.\u0275inj=bt({providers:[...Gk,...zk],imports:[XC,UC]})}}return n})();var lT=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(O(kt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var oe="primary",Xa=Symbol("RouteTitle"),Yg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function qo(n){return new Yg(n)}function Wk(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Kk(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!xn(n[t],e[t]))return!1;return!0}function xn(n,e){let t=n?Zg(n):void 0,r=e?Zg(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!ET(n[i],e[i]))return!1;return!0}function Zg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ET(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function DT(n){return n.length>0?n[n.length-1]:null}function Pr(n){return jf(n)?n:ka(n)?Ee(Promise.resolve(n)):J(n)}var Qk={exact:TT,subset:bT},CT={exact:Yk,subset:Zk,ignored:()=>!0};function hT(n,e,t){return Qk[t.paths](n.root,e.root,t.matrixParams)&&CT[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Yk(n,e){return xn(n,e)}function TT(n,e,t){if(!Ti(n.segments,e.segments)||!Ql(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!TT(n.children[r],e.children[r],t))return!1;return!0}function Zk(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ET(n[t],e[t]))}function bT(n,e,t){return ST(n,e,e.segments,t)}function ST(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ti(i,t)||e.hasChildren()||!Ql(i,t,r))}else if(n.segments.length===t.length){if(!Ti(n.segments,t)||!Ql(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!bT(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ti(n.segments,i)||!Ql(n.segments,i,r)||!n.children[oe]?!1:ST(n.children[oe],e,o,r)}}function Ql(n,e,t){return e.every((r,i)=>CT[t](n[i].parameters,r.parameters))}var tr=class{constructor(e=new De([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=qo(this.queryParams),this._queryParamMap}toString(){return eO.serialize(this)}},De=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yl(this)}},Ci=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=qo(this.parameters),this._parameterMap}toString(){return xT(this)}};function Jk(n,e){return Ti(n,e)&&n.every((t,r)=>xn(t.parameters,e[r].parameters))}function Ti(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function Xk(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===oe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==oe&&(t=t.concat(e(i,r)))}),t}var eu=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new zo,providedIn:"root"})}}return n})(),zo=class{parse(e){let t=new Xg(e);return new tr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ja(e.root,!0)}`,r=rO(e.queryParams),i=typeof e.fragment=="string"?`#${tO(e.fragment)}`:"";return`${t}${r}${i}`}},eO=new zo;function Yl(n){return n.segments.map(e=>xT(e)).join("/")}function ja(n,e){if(!n.hasChildren())return Yl(n);if(e){let t=n.children[oe]?ja(n.children[oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==oe&&r.push(`${i}:${ja(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=Xk(n,(r,i)=>i===oe?[ja(n.children[oe],!1)]:[`${i}:${ja(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[oe]!=null?`${Yl(n)}/${t[0]}`:`${Yl(n)}/(${t.join("//")})`}}function AT(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wl(n){return AT(n).replace(/%3B/gi,";")}function tO(n){return encodeURI(n)}function Jg(n){return AT(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zl(n){return decodeURIComponent(n)}function fT(n){return Zl(n.replace(/\+/g,"%20"))}function xT(n){return`${Jg(n.path)}${nO(n.parameters)}`}function nO(n){return Object.entries(n).map(([e,t])=>`;${Jg(e)}=${Jg(t)}`).join("")}function rO(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Wl(t)}=${Wl(i)}`).join("&"):`${Wl(t)}=${Wl(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var iO=/^[^\/()?;#]+/;function Gg(n){let e=n.match(iO);return e?e[0]:""}var oO=/^[^\/()?;=#]+/;function sO(n){let e=n.match(oO);return e?e[0]:""}var aO=/^[^=?&#]+/;function uO(n){let e=n.match(aO);return e?e[0]:""}var cO=/^[^&#]+/;function lO(n){let e=n.match(cO);return e?e[0]:""}var Xg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[oe]=new De(e,t)),r}parseSegment(){let e=Gg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new X(4009,!1);return this.capture(e),new Ci(Zl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=sO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Gg(this.remaining);i&&(r=i,this.capture(r))}e[Zl(t)]=Zl(r)}parseQueryParam(e){let t=uO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=lO(this.remaining);s&&(r=s,this.capture(r))}let i=fT(t),o=fT(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Gg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new X(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=oe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[oe]:new De([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new X(4011,!1)}};function RT(n){return n.segments.length>0?new De([],{[oe]:n}):n}function MT(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=MT(i);if(r===oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new De(n.segments,e);return dO(t)}function dO(n){if(n.numberOfChildren===1&&n.children[oe]){let e=n.children[oe];return new De(n.segments.concat(e.segments),e.children)}return n}function za(n){return n instanceof tr}function hO(n,e,t=null,r=null){let i=NT(n);return PT(i,e,t,r)}function NT(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new De(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=RT(r);return e??i}function PT(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Wg(i,i,i,t,r);let o=fO(e);if(o.toRoot())return Wg(i,i,new De([],{}),t,r);let s=pO(o,i,n),a=s.processChildren?$a(s.segmentGroup,s.index,o.commands):OT(s.segmentGroup,s.index,o.commands);return Wg(i,s.segmentGroup,a,t,r)}function Jl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ga(n){return typeof n=="object"&&n!=null&&n.outlets}function Wg(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=kT(n,e,t);let a=RT(MT(s));return new tr(a,o,i)}function kT(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=kT(o,e,t)}),new De(n.segments,r)}var Xl=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Jl(r[0]))throw new X(4003,!1);let i=r.find(Ga);if(i&&i!==DT(r))throw new X(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function fO(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Xl(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Xl(t,e,r)}var Uo=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function pO(n,e,t){if(n.isAbsolute)return new Uo(e,!0,0);if(!t)return new Uo(e,!1,NaN);if(t.parent===null)return new Uo(t,!0,0);let r=Jl(n.commands[0])?0:1,i=t.segments.length-1+r;return gO(t,i,n.numberOfDoubleDots)}function gO(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new X(4005,!1);i=r.segments.length}return new Uo(r,!1,i-o)}function mO(n){return Ga(n[0])?n[0].outlets:{[oe]:n}}function OT(n,e,t){if(n??=new De([],{}),n.segments.length===0&&n.hasChildren())return $a(n,e,t);let r=yO(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new De(n.segments.slice(0,r.pathIndex),{});return o.children[oe]=new De(n.segments.slice(r.pathIndex),n.children),$a(o,0,i)}else return r.match&&i.length===0?new De(n.segments,{}):r.match&&!n.hasChildren()?em(n,e,t):r.match?$a(n,0,i):em(n,e,t)}function $a(n,e,t){if(t.length===0)return new De(n.segments,{});{let r=mO(t),i={};if(Object.keys(r).some(o=>o!==oe)&&n.children[oe]&&n.numberOfChildren===1&&n.children[oe].segments.length===0){let o=$a(n.children[oe],e,t);return new De(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=OT(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new De(n.segments,i)}}function yO(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Ga(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!gT(u,l,s))return o;r+=2}else{if(!gT(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function em(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Ga(o)){let u=vO(o.outlets);return new De(r,u)}if(i===0&&Jl(t[0])){let u=n.segments[e];r.push(new Ci(u.path,pT(t[0]))),i++;continue}let s=Ga(o)?o.outlets[oe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Jl(a)?(r.push(new Ci(s,pT(a))),i+=2):(r.push(new Ci(s,{})),i++)}return new De(r,{})}function vO(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=em(new De([],{}),0,r))}),e}function pT(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function gT(n,e,t){return n==t.path&&xn(e,t.parameters)}var Ha="imperative",at=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(at||{}),tn=class{constructor(e,t){this.id=e,this.url=t}},Go=class extends tn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=at.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},nr=class extends tn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=at.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},qt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(qt||{}),ed=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(ed||{}),er=class extends tn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=at.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Nr=class extends tn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=at.NavigationSkipped}},Wa=class extends tn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=at.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},td=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tm=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nm=class extends tn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=at.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},rm=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},im=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},om=class{constructor(e){this.route=e,this.type=at.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},sm=class{constructor(e){this.route=e,this.type=at.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},am=class{constructor(e){this.snapshot=e,this.type=at.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},um=class{constructor(e){this.snapshot=e,this.type=at.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cm=class{constructor(e){this.snapshot=e,this.type=at.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lm=class{constructor(e){this.snapshot=e,this.type=at.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nd=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=at.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ka=class{},Wo=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function _O(n,e){return n.providers&&!n._injector&&(n._injector=Fl(n.providers,e,`Route: ${n.path}`)),n._injector??e}function fn(n){return n.outlet||oe}function wO(n,e){let t=n.filter(r=>fn(r)===e);return t.push(...n.filter(r=>fn(r)!==e)),t}function tu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var dm=class{get injector(){return tu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new nu(this.rootInjector),this.attachRef=null}},nu=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new dm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(O(Bt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=hm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=hm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=fm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return fm(e,this._root).map(t=>t.value)}};function hm(n,e){if(n===e.value)return e;for(let t of e.children){let r=hm(n,t);if(r)return r}return null}function fm(n,e){if(n===e.value)return[e];for(let t of e.children){let r=fm(n,t);if(r.length)return r.unshift(e),r}return[]}var Ht=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Bo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var id=class extends rd{constructor(e,t){super(e),this.snapshot=t,Em(this,e)}toString(){return this.snapshot.toString()}};function FT(n){let e=IO(n),t=new ct([new Ci("",{})]),r=new ct({}),i=new ct({}),o=new ct({}),s=new ct(""),a=new Ko(t,r,o,s,i,oe,n,e.root);return a.snapshot=e.root,new id(new Ht(a,[]),e)}function IO(n){let e={},t={},r={},i="",o=new $o([],e,r,i,t,oe,n,null,{});return new sd("",new Ht(o,[]))}var Ko=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(G(l=>l[Xa]))??J(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(G(e=>qo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(G(e=>qo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function od(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&VT(i)&&(r.resolve[Xa]=i.title),r}var $o=class{get title(){return this.data?.[Xa]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=qo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=qo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},sd=class extends rd{constructor(e,t){super(t),this.url=e,Em(this,t)}toString(){return LT(this._root)}};function Em(n,e){e.value._routerState=n,e.children.forEach(t=>Em(n,t))}function LT(n){let e=n.children.length>0?` { ${n.children.map(LT).join(", ")} } `:"";return`${n.value}${e}`}function Kg(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,xn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),xn(e.params,t.params)||n.paramsSubject.next(t.params),Kk(e.url,t.url)||n.urlSubject.next(t.url),xn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function pm(n,e){let t=xn(n.params,e.params)&&Jk(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||pm(n.parent,e.parent))}function VT(n){return typeof n.title=="string"||n.title===null}var EO=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new Dt,this.deactivateEvents=new Dt,this.attachEvents=new Dt,this.detachEvents=new Dt,this.parentContexts=j(nu),this.location=j(Na),this.changeDetector=j(Oa),this.inputBinder=j(dd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new X(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new X(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new X(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new X(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new gm(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Il({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Tl]})}}return n})(),gm=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ko?this.route:e===nu?this.childContexts:this.parent.get(e,t)}},dd=new W(""),mT=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=da([r.queryParams,r.params,r.data]).pipe(He(([o,s,a],u)=>(a=V(V(V({},o),s),a),u===0?J(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=$C(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function DO(n,e,t){let r=Qa(n,e._root,t?t._root:void 0);return new id(r,e)}function Qa(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=CO(n,e,t);return new Ht(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Qa(n,a)),s}}let r=TO(e.value),i=e.children.map(o=>Qa(n,o));return new Ht(r,i)}}function CO(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Qa(n,r,i);return Qa(n,r)})}function TO(n){return new Ko(new ct(n.url),new ct(n.params),new ct(n.queryParams),new ct(n.fragment),new ct(n.data),n.outlet,n.component,n)}var Ya=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},jT="ngNavigationCancelingError";function ad(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=za(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=BT(!1,qt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function BT(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[jT]=!0,t.cancellationCode=e,t}function bO(n){return UT(n)&&za(n.url)}function UT(n){return!!n&&n[jT]}var SO=(n,e,t,r)=>G(i=>(new mm(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),mm=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Kg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Bo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Bo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Bo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Bo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new lm(o.value.snapshot))}),e.children.length&&this.forwardEvent(new um(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Kg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Kg(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},ud=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ho=class{constructor(e,t){this.component=e,this.route=t}};function AO(n,e,t){let r=n._root,i=e?e._root:null;return Ba(r,i,t,[r.value])}function xO(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Yo(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!CE(n)?n:e.get(n):r}function Ba(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Bo(e);return n.children.forEach(s=>{RO(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>qa(a,t.getContext(s),i)),i}function RO(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=MO(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ud(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ba(n,e,a?a.children:null,r,i):Ba(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ho(a.outlet.component,s))}else s&&qa(e,a,i),i.canActivateChecks.push(new ud(r)),o.component?Ba(n,null,a?a.children:null,r,i):Ba(n,null,t,r,i);return i}function MO(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ti(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ti(n.url,e.url)||!xn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pm(n,e)||!xn(n.queryParams,e.queryParams);case"paramsChange":default:return!pm(n,e)}}function qa(n,e,t){let r=Bo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?qa(s,e.children.getContext(o),t):qa(s,null,t):qa(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ho(e.outlet.component,i)):t.canDeactivateChecks.push(new Ho(null,i)):t.canDeactivateChecks.push(new Ho(null,i))}function ru(n){return typeof n=="function"}function NO(n){return typeof n=="boolean"}function PO(n){return n&&ru(n.canLoad)}function kO(n){return n&&ru(n.canActivate)}function OO(n){return n&&ru(n.canActivateChild)}function FO(n){return n&&ru(n.canDeactivate)}function LO(n){return n&&ru(n.canMatch)}function $T(n){return n instanceof qn||n?.name==="EmptyError"}var Kl=Symbol("INITIAL_VALUE");function Qo(){return He(n=>da(n.map(e=>e.pipe(zn(1),di(Kl)))).pipe(G(e=>{for(let t of e)if(t!==!0){if(t===Kl)return Kl;if(t===!1||VO(t))return t}return!0}),lt(e=>e!==Kl),zn(1)))}function VO(n){return za(n)||n instanceof Ya}function jO(n,e){return Ye(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?J(xe(V({},t),{guardsResult:!0})):BO(s,r,i,n).pipe(Ye(a=>a&&NO(a)?UO(r,o,n,e):J(a)),G(a=>xe(V({},t),{guardsResult:a})))})}function BO(n,e,t,r){return Ee(n).pipe(Ye(i=>GO(i.component,i.route,t,e,r)),Kt(i=>i!==!0,!0))}function UO(n,e,t,r){return Ee(e).pipe(ci(i=>mo(HO(i.route.parent,r),$O(i.route,r),zO(n,i.path,t),qO(n,i.route,t))),Kt(i=>i!==!0,!0))}function $O(n,e){return n!==null&&e&&e(new cm(n)),J(!0)}function HO(n,e){return n!==null&&e&&e(new am(n)),J(!0)}function qO(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return J(!0);let i=r.map(o=>Oc(()=>{let s=tu(e)??t,a=Yo(o,s),u=kO(a)?a.canActivate(e,n):bn(s,()=>a(e,n));return Pr(u).pipe(Kt())}));return J(i).pipe(Qo())}function zO(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>xO(s)).filter(s=>s!==null).map(s=>Oc(()=>{let a=s.guards.map(u=>{let l=tu(s.node)??t,h=Yo(u,l),p=OO(h)?h.canActivateChild(r,n):bn(l,()=>h(r,n));return Pr(p).pipe(Kt())});return J(a).pipe(Qo())}));return J(o).pipe(Qo())}function GO(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return J(!0);let s=o.map(a=>{let u=tu(e)??i,l=Yo(a,u),h=FO(l)?l.canDeactivate(n,e,t,r):bn(u,()=>l(n,e,t,r));return Pr(h).pipe(Kt())});return J(s).pipe(Qo())}function WO(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return J(!0);let o=i.map(s=>{let a=Yo(s,n),u=PO(a)?a.canLoad(e,t):bn(n,()=>a(e,t));return Pr(u)});return J(o).pipe(Qo(),HT(r))}function HT(n){return Pf(rt(e=>{if(typeof e!="boolean")throw ad(n,e)}),G(e=>e===!0))}function KO(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return J(!0);let o=i.map(s=>{let a=Yo(s,n),u=LO(a)?a.canMatch(e,t):bn(n,()=>a(e,t));return Pr(u)});return J(o).pipe(Qo(),HT(r))}var Za=class{constructor(e){this.segmentGroup=e||null}},Ja=class extends Error{constructor(e){super(),this.urlTree=e}};function jo(n){return go(new Za(n))}function QO(n){return go(new X(4e3,!1))}function YO(n){return go(BT(!1,qt.GuardRejected))}var ym=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return J(r);if(i.numberOfChildren>1||!i.children[oe])return QO(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:b,title:M}=i,N=bn(o,()=>a({params:v,data:b,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:M}));if(N instanceof tr)throw new Ja(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Ja(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new tr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new De(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new X(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},vm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ZO(n,e,t,r,i){let o=qT(n,e,t);return o.matched?(r=_O(e,r),KO(r,e,t,i).pipe(G(s=>s===!0?o:V({},vm)))):J(o)}function qT(n,e,t){if(e.path==="**")return JO(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},vm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Wk)(t,n,e);if(!i)return V({},vm);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function JO(n){return{matched:!0,parameters:n.length>0?DT(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function yT(n,e,t,r){return t.length>0&&tF(n,t,r)?{segmentGroup:new De(e,eF(r,new De(t,n.children))),slicedSegments:[]}:t.length===0&&nF(n,t,r)?{segmentGroup:new De(n.segments,XO(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new De(n.segments,n.children),slicedSegments:t}}function XO(n,e,t,r){let i={};for(let o of t)if(hd(n,e,o)&&!r[fn(o)]){let s=new De([],{});i[fn(o)]=s}return V(V({},r),i)}function eF(n,e){let t={};t[oe]=e;for(let r of n)if(r.path===""&&fn(r)!==oe){let i=new De([],{});t[fn(r)]=i}return t}function tF(n,e,t){return t.some(r=>hd(n,e,r)&&fn(r)!==oe)}function nF(n,e,t){return t.some(r=>hd(n,e,r))}function hd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function rF(n,e,t){return e.length===0&&!n.children[t]}var _m=class{};function iF(n,e,t,r,i,o,s="emptyOnly"){return new wm(n,e,t,r,i,s,o).recognize()}var oF=31,wm=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new ym(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new X(4002,`'${e.segmentGroup}'`)}recognize(){let e=yT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(G(({children:t,rootSnapshot:r})=>{let i=new Ht(r,t),o=new sd("",i),s=hO(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new $o([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,t).pipe(G(r=>({children:r,rootSnapshot:t})),_r(r=>{if(r instanceof Ja)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Za?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(G(s=>s instanceof Ht?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ee(o).pipe(ci(s=>{let a=r.children[s],u=wO(t,s);return this.processSegmentGroup(e,u,a,s,i)}),li((s,a)=>(s.push(...a),s)),wr(null),Hf(),Ye(s=>{if(s===null)return jo(r);let a=zT(s);return sF(a),J(a)}))}processSegment(e,t,r,i,o,s,a){return Ee(t).pipe(ci(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(_r(l=>{if(l instanceof Za)return J(null);throw l}))),Kt(u=>!!u),_r(u=>{if($T(u))return rF(r,i,o)?J(new _m):jo(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return fn(r)!==s&&(s===oe||!hd(i,o,r))?jo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):jo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=qT(t,i,o);if(!u)return jo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>oF&&(this.allowRedirects=!1));let v=new $o(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,vT(i),fn(i),i.component??i._loadedComponent??null,i,_T(i)),b=od(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(b.params),v.data=Object.freeze(b.data);let M=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,M).pipe(Ye(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=ZO(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(He(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(He(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=u,b=new $o(m,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,vT(r),fn(r),r.component??r._loadedComponent??null,r,_T(r)),M=od(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(M.params),b.data=Object.freeze(M.data);let{segmentGroup:N,slicedSegments:B}=yT(t,m,v,l);if(B.length===0&&N.hasChildren())return this.processChildren(h,l,N,b).pipe(G(F=>new Ht(b,F)));if(l.length===0&&B.length===0)return J(new Ht(b,[]));let q=fn(r)===o;return this.processSegment(h,l,N,B,q?oe:o,!0,b).pipe(G(F=>new Ht(b,F instanceof Ht?[F]:[])))}))):jo(t)))}getChildConfig(e,t,r){return t.children?J({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?J({routes:t._loadedRoutes,injector:t._loadedInjector}):WO(e,t,r,this.urlSerializer).pipe(Ye(i=>i?this.configLoader.loadChildren(e,t).pipe(rt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):YO(t))):J({routes:[],injector:e})}};function sF(n){n.sort((e,t)=>e.value.outlet===oe?-1:t.value.outlet===oe?1:e.value.outlet.localeCompare(t.value.outlet))}function aF(n){let e=n.value.routeConfig;return e&&e.path===""}function zT(n){let e=[],t=new Set;for(let r of n){if(!aF(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=zT(r.children);e.push(new Ht(r.value,i))}return e.filter(r=>!t.has(r))}function vT(n){return n.data||{}}function _T(n){return n.resolve||{}}function uF(n,e,t,r,i,o){return Ye(s=>iF(n,e,t,r,s.extractedUrl,i,o).pipe(G(({state:a,tree:u})=>xe(V({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function cF(n,e){return Ye(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return J(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of GT(u))s.add(l);let a=0;return Ee(s).pipe(ci(u=>o.has(u)?lF(u,r,n,e):(u.data=od(u,u.parent,n).resolve,J(void 0))),rt(()=>a++),yo(1),Ye(u=>a===s.size?J(t):Et))})}function GT(n){let e=n.children.map(t=>GT(t)).flat();return[n,...e]}function lF(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!VT(i)&&(o[Xa]=i.title),dF(o,n,e,r).pipe(G(s=>(n._resolvedData=s,n.data=od(n,n.parent,t).resolve,null)))}function dF(n,e,t,r){let i=Zg(n);if(i.length===0)return J({});let o={};return Ee(i).pipe(Ye(s=>hF(n[s],e,t,r).pipe(Kt(),rt(a=>{if(a instanceof Ya)throw ad(new zo,a);o[s]=a}))),yo(1),Uf(o),_r(s=>$T(s)?Et:go(s)))}function hF(n,e,t,r){let i=tu(e)??r,o=Yo(n,i),s=o.resolve?o.resolve(e,t):bn(i,()=>o(e,t));return Pr(s)}function Qg(n){return He(e=>{let t=n(e);return t?Ee(t).pipe(G(()=>e)):J(e)})}var WT=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===oe);return r}getResolvedTitleForRoute(t){return t.data[Xa]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(fF),providedIn:"root"})}}return n})(),fF=(()=>{class n extends WT{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(O(lT))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),iu=new W("",{providedIn:"root",factory:()=>({})}),pF=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=st({type:n,selectors:[["ng-component"]],standalone:!0,features:[MC],decls:1,vars:0,template:function(r,i){r&1&&Re(0,"router-outlet")},dependencies:[EO],encapsulation:2})}}return n})();function Dm(n){let e=n.children&&n.children.map(Dm),t=e?xe(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==oe&&(t.component=pF),t}var cd=new W(""),Cm=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=j($l)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return J(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Pr(t.loadComponent()).pipe(G(KT),rt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ha(()=>{this.componentLoaders.delete(t)})),i=new lo(r,()=>new ze).pipe(co());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return J({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=gF(r,this.compiler,t,this.onLoadEndListener).pipe(ha(()=>{this.childrenLoaders.delete(r)})),s=new lo(o,()=>new ze).pipe(co());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function gF(n,e,t,r){return Pr(n.loadChildren()).pipe(G(KT),Ye(i=>i instanceof Ca||Array.isArray(i)?J(i):Ee(e.compileModuleAsync(i))),G(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(cd,[],{optional:!0,self:!0}).flat()),{routes:s.map(Dm),injector:o}}))}function mF(n){return n&&typeof n=="object"&&"default"in n}function KT(n){return mF(n)?n.default:n}var Tm=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(yF),providedIn:"root"})}}return n})(),yF=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),QT=new W(""),YT=new W("");function vF(n,e,t){let r=n.get(YT),i=n.get(kt);return n.get(pe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),_F(n))),{onViewTransitionCreated:u}=r;return u&&bn(n,()=>u({transition:a,from:e,to:t})),s})}function _F(n){return new Promise(e=>{Ig({read:()=>setTimeout(e)},{injector:n})})}var wF=new W(""),bm=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ze,this.transitionAbortSubject=new ze,this.configLoader=j(Cm),this.environmentInjector=j(Bt),this.urlSerializer=j(eu),this.rootContexts=j(nu),this.location=j(Lo),this.inputBindingEnabled=j(dd,{optional:!0})!==null,this.titleStrategy=j(WT),this.options=j(iu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=j(Tm),this.createViewTransition=j(QT,{optional:!0}),this.navigationErrorHandler=j(wF,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>J(void 0),this.rootComponentType=null;let t=i=>this.events.next(new om(i)),r=i=>this.events.next(new sm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(xe(V(V({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new ct({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ha,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(lt(o=>o.id!==0),G(o=>xe(V({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),He(o=>{let s=!1,a=!1;return J(o).pipe(He(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",qt.SupersededByNewNavigation),Et;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?xe(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Nr(u.id,this.urlSerializer.serialize(u.rawUrl),p,ed.IgnoredSameUrlNavigation)),u.resolve(!1),Et}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return J(u).pipe(He(p=>{let m=this.transitions?.getValue();return this.events.next(new Go(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Et:Promise.resolve(p)}),uF(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),rt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=xe(V({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new td(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:v,restoredState:b,extras:M}=u,N=new Go(p,this.urlSerializer.serialize(m),v,b);this.events.next(N);let B=FT(this.rootComponentType).snapshot;return this.currentTransition=o=xe(V({},u),{targetSnapshot:B,urlAfterRedirects:m,extras:xe(V({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,J(o)}else{let p="";return this.events.next(new Nr(u.id,this.urlSerializer.serialize(u.extractedUrl),p,ed.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Et}}),rt(u=>{let l=new tm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),G(u=>(this.currentTransition=o=xe(V({},u),{guards:AO(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),jO(this.environmentInjector,u=>this.events.next(u)),rt(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw ad(this.urlSerializer,u.guardsResult);let l=new nm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),lt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",qt.GuardRejected),!1)),Qg(u=>{if(u.guards.canActivateChecks.length)return J(u).pipe(rt(l=>{let h=new rm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),He(l=>{let h=!1;return J(l).pipe(cF(this.paramsInheritanceStrategy,this.environmentInjector),rt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",qt.NoDataFromResolver)}}))}),rt(l=>{let h=new im(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Qg(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(rt(m=>{h.component=m}),G(()=>{})));for(let m of h.children)p.push(...l(m));return p};return da(l(u.targetSnapshot.root)).pipe(wr(null),zn(1))}),Qg(()=>this.afterPreactivation()),He(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Ee(h).pipe(G(()=>o)):J(o)}),G(u=>{let l=DO(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=xe(V({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),rt(()=>{this.events.next(new Ka)}),SO(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),zn(1),rt({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new nr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),zf(this.transitionAbortSubject.pipe(rt(u=>{throw u}))),ha(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",qt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),_r(u=>{if(a=!0,UT(u))this.events.next(new er(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),bO(u)?this.events.next(new Wo(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Wa(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=bn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Ya){let{message:p,cancellationCode:m}=ad(this.urlSerializer,h);this.events.next(new er(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new Wo(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(u);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Et}))}))}cancelNavigationTransition(t,r,i){let o=new er(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function IF(n){return n!==Ha}var EF=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(DF),providedIn:"root"})}}return n})(),Im=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},DF=(()=>{class n extends Im{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=rg(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ZT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(CF),providedIn:"root"})}}return n})(),CF=(()=>{class n extends ZT{constructor(){super(...arguments),this.location=j(Lo),this.urlSerializer=j(eu),this.options=j(iu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=j(Tm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new tr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=FT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Go)this.stateMemento=this.createStateMemento();else if(t instanceof Nr)this.rawUrlTree=r.initialUrl;else if(t instanceof td){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Ka?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof er&&(t.code===qt.GuardRejected||t.code===qt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Wa?this.restoreHistory(r,!0):t instanceof nr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof tr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=V(V({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=rg(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ua=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ua||{});function JT(n,e){n.events.pipe(lt(t=>t instanceof nr||t instanceof er||t instanceof Wa||t instanceof Nr),G(t=>t instanceof nr||t instanceof Nr?Ua.COMPLETE:(t instanceof er?t.code===qt.Redirect||t.code===qt.SupersededByNewNavigation:!1)?Ua.REDIRECTING:Ua.FAILED),lt(t=>t!==Ua.REDIRECTING),zn(1)).subscribe(()=>{e()})}function TF(n){throw n}var bF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},SF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},bi=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=j(Vl),this.stateManager=j(ZT),this.options=j(iu,{optional:!0})||{},this.pendingTasks=j(Fo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=j(bm),this.urlSerializer=j(eu),this.location=j(Lo),this.urlHandlingStrategy=j(Tm),this._events=new ze,this.errorHandler=this.options.errorHandler||TF,this.navigated=!1,this.routeReuseStrategy=j(EF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=j(cd,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!j(dd,{optional:!0}),this.eventsSubscription=new $e,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof er&&r.code!==qt.Redirect&&r.code!==qt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof nr)this.navigated=!0;else if(r instanceof Wo){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||IF(i.source)},s);this.scheduleNavigation(a,Ha,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}xF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ha,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=V({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Dm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=NT(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return PT(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=za(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ha,null,r)}navigate(t,r={skipLocationChange:!1}){return AF(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},bF):r===!1?i=V({},SF):i=r,za(t))return hT(this.currentUrlTree,t,i);let o=this.parseUrl(t);return hT(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return JT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function AF(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new X(4008,!1)}function xF(n){return!(n instanceof Ka)&&!(n instanceof Wo)}var ld=class{};var RF=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(lt(t=>t instanceof nr),ci(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Fl(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ee(i).pipe(vr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=J(null);let o=i.pipe(Ye(s=>s===null?J(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ee([o,s]).pipe(vr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(O(bi),O($l),O(Bt),O(ld),O(Cm))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),XT=new W(""),MF=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Go?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof nr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Nr&&t.code===ed.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof nd&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new nd(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){nC()}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function NF(n){return n.routerState.root}function ou(n,e){return{\u0275kind:n,\u0275providers:e}}function PF(){let n=j(Xt);return e=>{let t=n.get(Mr);if(e!==t.components[0])return;let r=n.get(bi),i=n.get(e0);n.get(Sm)===1&&r.initialNavigation(),n.get(t0,null,ae.Optional)?.setUpPreloading(),n.get(XT,null,ae.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var e0=new W("",{factory:()=>new ze}),Sm=new W("",{providedIn:"root",factory:()=>1});function kF(){return ou(2,[{provide:Sm,useValue:0},{provide:Ul,multi:!0,deps:[Xt],useFactory:e=>{let t=e.get(QC,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(bi),o=e.get(e0);JT(i,()=>{r(!0)}),e.get(bm).afterPreactivation=()=>(r(!0),o.closed?J(void 0):o),i.initialNavigation()}))}}])}function OF(){return ou(3,[{provide:Ul,multi:!0,useFactory:()=>{let e=j(bi);return()=>{e.setUpLocationChangeListener()}}},{provide:Sm,useValue:2}])}var t0=new W("");function FF(n){return ou(0,[{provide:t0,useExisting:RF},{provide:ld,useExisting:n}])}function LF(){return ou(8,[mT,{provide:dd,useExisting:mT}])}function VF(n){let e=[{provide:QT,useValue:vF},{provide:YT,useValue:V({skipNextTransition:!!n?.skipInitialTransition},n)}];return ou(9,e)}var wT=new W("ROUTER_FORROOT_GUARD"),jF=[Lo,{provide:eu,useClass:zo},bi,nu,{provide:Ko,useFactory:NF,deps:[bi]},Cm,[]],Am=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[jF,[],{provide:cd,multi:!0,useValue:t},{provide:wT,useFactory:HF,deps:[[bi,new ko,new qp]]},{provide:iu,useValue:r||{}},r?.useHash?UF():$F(),BF(),r?.preloadingStrategy?FF(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?qF(r):[],r?.bindToComponentInputs?LF().\u0275providers:[],r?.enableViewTransitions?VF().\u0275providers:[],zF()]}}static forChild(t){return{ngModule:n,providers:[{provide:cd,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(O(wT,8))}}static{this.\u0275mod=St({type:n})}static{this.\u0275inj=bt({})}}return n})();function BF(){return{provide:XT,useFactory:()=>{let n=j(eT),e=j(pe),t=j(iu),r=j(bm),i=j(eu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new MF(i,r,n,e,t)}}}function UF(){return{provide:Ei,useClass:ZC}}function $F(){return{provide:Ei,useClass:Fg}}function HF(n){return"guarded"}function qF(n){return[n.initialNavigation==="disabled"?OF().\u0275providers:[],n.initialNavigation==="enabledBlocking"?kF().\u0275providers:[]]}var IT=new W("");function zF(){return[{provide:IT,useFactory:PF},{provide:bg,multi:!0,useExisting:IT}]}var GF=[],n0=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=St({type:n})}static{this.\u0275inj=bt({imports:[Am.forRoot(GF),Am]})}}return n})();var fd=class{constructor(){this.name="name",this.goalLife="goal",this.photoUrl="photo",this.email="email@domain.com",this.phoneNumber="999-999-9999",this.location="city, country",this.socialNetwork="@facebook"}};var WF="firebase",KF="10.14.1";yr(WF,KF,"app");var su=new xr("ANGULARFIRE2_VERSION");var QF=(n,e)=>{let t=e?[e]:sI(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Si=class{constructor(){return QF(YF)}},YF="app-check";function xm(){}var pd=class{zone;delegate;constructor(e,t=Lf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},Rm=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xm,{},xm,xm)),t.pipe(rt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},gd=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new pd(Zone.current)),this.insideAngular=t.run(()=>new pd(Zone.current,la)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(O(pe))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ZF(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Ot(n){return JF(ZF())(n)}function JF(n){return function(t){return t=t.lift(new Rm(n.ngZone)),t.pipe(un(n.outsideAngular),Wt(n.insideAngular))}}var tL=new Map,nL={activated:!1,tokenObservers:[]},rL={initialized:!1,enabled:!1};function pn(n){return tL.get(n)||Object.assign({},nL)}function u0(){return rL}var iL="https://content-firebaseappcheck.googleapis.com/v1";var oL="exchangeDebugToken",i0={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},B9=24*60*60*1e3;var Nm=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return R(this,null,function*(){this.stop();try{this.pending=new mf,this.pending.promise.catch(t=>{}),yield sL(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new mf,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function sL(n){return new Promise(e=>{setTimeout(e,n)})}var aL={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},kr=new iI("appCheck","AppCheck",aL);function c0(n){if(!pn(n).activated)throw kr.create("use-before-activation",{appName:n.name})}function l0(r,i){return R(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(v){throw kr.create("fetch-network-error",{originalErrorMessage:v?.message})}if(u.status!==200)throw kr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(v){throw kr.create("fetch-parse-error",{originalErrorMessage:v?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw kr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function d0(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${iL}/projects/${t}/apps/${r}:${oL}?key=${i}`,body:{debug_token:e}}}var uL="firebase-app-check-database",cL=1,Pm="firebase-app-check-store";var md=null;function lL(){return md||(md=new Promise((n,e)=>{try{let t=indexedDB.open(uL,cL);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(kr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Pm,{keyPath:"compositeKey"})}}}catch(t){e(kr.create("storage-open",{originalErrorMessage:t?.message}))}}),md)}function dL(n,e){return hL(fL(n),e)}function hL(n,e){return R(this,null,function*(){let r=(yield lL()).transaction(Pm,"readwrite"),o=r.objectStore(Pm).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(kr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function fL(n){return`${n.options.appId}-${n.name}`}var km=new gc("@firebase/app-check");function Mm(n,e){return pc()?dL(n,e).catch(t=>{km.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function h0(){return u0().enabled}function f0(){return R(this,null,function*(){let n=u0();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var pL={error:"UNKNOWN_ERROR"};function gL(n){return tI.encodeString(JSON.stringify(n),!1)}function Om(n,e=!1){return R(this,null,function*(){let t=n.app;c0(t);let r=pn(t),i=r.token,o;if(i&&!au(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(au(u)?i=u:yield Mm(t,void 0))}if(!e&&i&&au(i))return{token:i.token};let s=!1;if(h0()){r.exchangeTokenPromise||(r.exchangeTokenPromise=l0(d0(t,yield f0()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield Mm(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield pn(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?km.warn(u.message):km.error(u),o=u}let a;return i?o?au(i)?a={token:i.token,internalError:o}:a=s0(o):(a={token:i.token},r.token=i,yield Mm(t,i)):a=s0(o),s&&_L(t,a),a})}function mL(n){return R(this,null,function*(){let e=n.app;c0(e);let{provider:t}=pn(e);if(h0()){let r=yield f0(),{token:i}=yield l0(d0(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function yL(n,e,t,r){let{app:i}=n,o=pn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&au(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),o0(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>o0(n))}function p0(n,e){let t=pn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function o0(n){let{app:e}=n,t=pn(e),r=t.tokenRefresher;r||(r=vL(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function vL(n){let{app:e}=n;return new Nm(()=>R(this,null,function*(){let t=pn(e),r;if(t.token?r=yield Om(n,!0):r=yield Om(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=pn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},i0.RETRIAL_MIN_WAIT,i0.RETRIAL_MAX_WAIT)}function _L(n,e){let t=pn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function au(n){return n.expireTimeMillis-Date.now()>0}function s0(n){return{token:gL(pL),error:n}}var Fm=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=pn(this.app);for(let t of e)p0(this.app,t.next);return Promise.resolve()}};function wL(n,e){return new Fm(n,e)}function IL(n){return{getToken:e=>Om(n,e),getLimitedUseToken:()=>mL(n),addTokenListener:e=>yL(n,"INTERNAL",e),removeTokenListener:e=>p0(n.app,e)}}var EL="@firebase/app-check",DL="0.8.8";var CL="app-check",a0="app-check-internal";function TL(){sa(new oi(CL,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return wL(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(a0).initialize()})),sa(new oi(a0,n=>{let e=n.getProvider("app-check").getImmediate();return IL(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),yr(EL,DL)}TL();var bL=["localhost","0.0.0.0","127.0.0.1"],J9=typeof window<"u"&&bL.includes(window.location.hostname);var SL="firebase",AL="10.14.1";jt.registerVersion(SL,AL,"app-compat");var xL=["ngOnDestroy"],y0=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(xL.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var yd=class{constructor(e){return e}},Zo=new W("angularfire2.app.options"),Jo=new W("angularfire2.app.name");function uu(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=jt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>jt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;RL("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new yd(s)}var RL=(n,...e)=>{xg()&&typeof console<"u"&&console[n](...e)},ML={provide:yd,useFactory:uu,deps:[Zo,pe,[new ko,Jo]]},v0=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Zo,useValue:t},{provide:Jo,useValue:r}]}}constructor(t){jt.registerVersion("angularfire",su.full,"core"),jt.registerVersion("angularfire",su.full,"app-compat"),jt.registerVersion("angular",NC.full,t.toString())}static \u0275fac=function(r){return new(r||n)(O(Pt))};static \u0275mod=St({type:n});static \u0275inj=bt({providers:[ML]})}return n})();function vd(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return NL(i,s)||(m0("error",`${e} was already initialized on the ${t} Firebase App with different settings.${PL?" You may need to reload as Firebase is not HMR aware.":""}`),m0("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function NL(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var PL=typeof module<"u"&&!!module.hot,m0=(n,...e)=>{xg()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Lm=new W("angularfire2.auth.use-emulator"),Vm=new W("angularfire2.auth.settings"),jm=new W("angularfire2.auth.tenant-id"),Bm=new W("angularfire2.auth.langugage-code"),Um=new W("angularfire2.auth.use-device-language"),$m=new W("angularfire.auth.persistence"),Hm=(n,e,t,r,i,o,s,a)=>vd(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),_0=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,h,p,m,v){let b=new ze,M=J(void 0).pipe(Wt(s.outsideAngular),He(()=>o.runOutsideAngular(()=>import("./chunk-DT56ZVVI.js"))),G(()=>uu(t,o,r)),G(N=>Hm(N,o,a,l,h,p,u,m)),Lc({bufferSize:1,refCount:!1}));if(Di(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=J(null);else{M.pipe(Kt()).subscribe();let N=M.pipe(He(F=>F.getRedirectResult().then(Y=>Y,()=>null)),Ot,Lc({bufferSize:1,refCount:!1})),B=M.pipe(He(F=>new le(Y=>({unsubscribe:o.runOutsideAngular(()=>F.onAuthStateChanged(ee=>Y.next(ee),ee=>Y.error(ee),()=>Y.complete()))})))),q=M.pipe(He(F=>new le(Y=>({unsubscribe:o.runOutsideAngular(()=>F.onIdTokenChanged(ee=>Y.next(ee),ee=>Y.error(ee),()=>Y.complete()))}))));this.authState=N.pipe(Vc(B),un(s.outsideAngular),Wt(s.insideAngular)),this.user=N.pipe(Vc(q),un(s.outsideAngular),Wt(s.insideAngular)),this.idToken=this.user.pipe(He(F=>F?Ee(F.getIdToken()):J(null))),this.idTokenResult=this.user.pipe(He(F=>F?Ee(F.getIdTokenResult()):J(null))),this.credential=Bf(N,b,this.authState.pipe(lt(F=>!F))).pipe(G(F=>F?.user?F:null),un(s.outsideAngular),Wt(s.insideAngular))}return y0(this,M,o,{spy:{apply:(N,B,q)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&q.then(F=>b.next(F))}}})}static \u0275fac=function(r){return new(r||n)(O(Zo),O(Jo,8),O(Pt),O(pe),O(gd),O(Lm,8),O(Vm,8),O(jm,8),O(Bm,8),O(Um,8),O($m,8),O(Si,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var w0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},I0={};var Or,qm;(function(){var n;function e(I,y){function w(){}w.prototype=y.prototype,I.D=y.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(E,D,T){for(var _=Array(arguments.length-2),Bn=2;Bn<arguments.length;Bn++)_[Bn-2]=arguments[Bn];return y.prototype[D].apply(E,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,y,w){w||(w=0);var E=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)E[D]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(D=0;16>D;++D)E[D]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=I.g[0],w=I.g[1],D=I.g[2];var T=I.g[3],_=y+(T^w&(D^T))+E[0]+3614090360&4294967295;y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[1]+3905402710&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[2]+606105819&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[3]+3250441966&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[4]+4118548399&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[5]+1200080426&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[6]+2821735955&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[7]+4249261313&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[8]+1770035416&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[9]+2336552879&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[10]+4294925233&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[11]+2304563134&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[12]+1804603682&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[13]+4254626195&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[14]+2792965006&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[15]+1236535329&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(D^T&(w^D))+E[1]+4129170786&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[6]+3225465664&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[11]+643717713&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[0]+3921069994&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[5]+3593408605&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[10]+38016083&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[15]+3634488961&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[4]+3889429448&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[9]+568446438&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[14]+3275163606&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[3]+4107603335&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[8]+1163531501&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[13]+2850285829&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[2]+4243563512&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[7]+1735328473&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[12]+2368359562&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(w^D^T)+E[5]+4294588738&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[8]+2272392833&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[11]+1839030562&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[14]+4259657740&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[1]+2763975236&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[4]+1272893353&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[7]+4139469664&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[10]+3200236656&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[13]+681279174&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[0]+3936430074&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[3]+3572445317&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[6]+76029189&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[9]+3654602809&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[12]+3873151461&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[15]+530742520&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[2]+3299628645&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(D^(w|~T))+E[0]+4096336452&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[7]+1126891415&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[14]+2878612391&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[5]+4237533241&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[12]+1700485571&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[3]+2399980690&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[10]+4293915773&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[1]+2240044497&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[8]+1873313359&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[15]+4264355552&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[6]+2734768916&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[13]+1309151649&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[4]+4149444226&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[11]+3174756917&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[2]+718787259&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var w=y-this.blockSize,E=this.B,D=this.h,T=0;T<y;){if(D==0)for(;T<=w;)i(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<y;)if(E[D++]=I.charCodeAt(T++),D==this.blockSize){i(this,E),D=0;break}}else for(;T<y;)if(E[D++]=I[T++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var w=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=w&255,w/=256;for(this.u(I),I=Array(16),y=w=0;4>y;++y)for(var E=0;32>E;E+=8)I[w++]=this.g[y]>>>E&255;return I};function o(I,y){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=y(I)}function s(I,y){this.h=y;for(var w=[],E=!0,D=I.length-1;0<=D;D--){var T=I[D]|0;E&&T==y||(w[D]=T,E=!1)}this.g=w}var a={};function u(I){return-128<=I&&128>I?o(I,function(y){return new s([y|0],0>y?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return N(l(-I));for(var y=[],w=1,E=0;I>=w;E++)y[E]=I/w|0,w*=4294967296;return new s(y,0)}function h(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return N(h(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(y,8)),E=p,D=0;D<I.length;D+=8){var T=Math.min(8,I.length-D),_=parseInt(I.substring(D,D+T),y);8>T?(T=l(Math.pow(y,T)),E=E.j(T).add(l(_))):(E=E.j(w),E=E.add(l(_)))}return E}var p=u(0),m=u(1),v=u(16777216);n=s.prototype,n.m=function(){if(M(this))return-N(this).m();for(var I=0,y=1,w=0;w<this.g.length;w++){var E=this.i(w);I+=(0<=E?E:4294967296+E)*y,y*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(M(this))return"-"+N(this).toString(I);for(var y=l(Math.pow(I,6)),w=this,E="";;){var D=Y(w,y).g;w=B(w,D.j(y));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=D,b(w))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function M(I){return I.h==-1}n.l=function(I){return I=B(this,I),M(I)?-1:b(I)?0:1};function N(I){for(var y=I.g.length,w=[],E=0;E<y;E++)w[E]=~I.g[E];return new s(w,~I.h).add(m)}n.abs=function(){return M(this)?N(this):this},n.add=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0,D=0;D<=y;D++){var T=E+(this.i(D)&65535)+(I.i(D)&65535),_=(T>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);E=_>>>16,T&=65535,_&=65535,w[D]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function B(I,y){return I.add(N(y))}n.j=function(I){if(b(this)||b(I))return p;if(M(this))return M(I)?N(this).j(N(I)):N(N(this).j(I));if(M(I))return N(this.j(N(I)));if(0>this.l(v)&&0>I.l(v))return l(this.m()*I.m());for(var y=this.g.length+I.g.length,w=[],E=0;E<2*y;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<I.g.length;D++){var T=this.i(E)>>>16,_=this.i(E)&65535,Bn=I.i(D)>>>16,Bs=I.i(D)&65535;w[2*E+2*D]+=_*Bs,q(w,2*E+2*D),w[2*E+2*D+1]+=T*Bs,q(w,2*E+2*D+1),w[2*E+2*D+1]+=_*Bn,q(w,2*E+2*D+1),w[2*E+2*D+2]+=T*Bn,q(w,2*E+2*D+2)}for(E=0;E<y;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=y;E<2*y;E++)w[E]=0;return new s(w,0)};function q(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function F(I,y){this.g=I,this.h=y}function Y(I,y){if(b(y))throw Error("division by zero");if(b(I))return new F(p,p);if(M(I))return y=Y(N(I),y),new F(N(y.g),N(y.h));if(M(y))return y=Y(I,N(y)),new F(N(y.g),y.h);if(30<I.g.length){if(M(I)||M(y))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=y;0>=E.l(I);)w=ee(w),E=ee(E);var D=Z(w,1),T=Z(E,1);for(E=Z(E,2),w=Z(w,2);!b(E);){var _=T.add(E);0>=_.l(I)&&(D=D.add(w),T=_),E=Z(E,1),w=Z(w,1)}return y=B(I,D.j(y)),new F(D,y)}for(D=p;0<=I.l(y);){for(w=Math.max(1,Math.floor(I.m()/y.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(w),_=T.j(y);M(_)||0<_.l(I);)w-=E,T=l(w),_=T.j(y);b(T)&&(T=m),D=D.add(T),I=B(I,_)}return new F(D,I)}n.A=function(I){return Y(this,I).h},n.and=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)&I.i(E);return new s(w,this.h&I.h)},n.or=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)|I.i(E);return new s(w,this.h|I.h)},n.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)^I.i(E);return new s(w,this.h^I.h)};function ee(I){for(var y=I.g.length+1,w=[],E=0;E<y;E++)w[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(w,I.h)}function Z(I,y){var w=y>>5;y%=32;for(var E=I.g.length-w,D=[],T=0;T<E;T++)D[T]=0<y?I.i(T+w)>>>y|I.i(T+w+1)<<32-y:I.i(T+w);return new s(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,qm=I0.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Or=I0.Integer=s}).apply(typeof w0<"u"?w0:typeof self<"u"?self:typeof window<"u"?window:{});var _d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rr={};var zm,OL,Xo,Gm,cu,wd,Wm,Km,Qm;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof _d=="object"&&_d];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function b(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,A){for(var L=Array(arguments.length-2),be=2;be<arguments.length;be++)L[be-2]=arguments[be];return d.prototype[C].apply(g,L)}}function M(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function N(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,A=g.length||0;c.length=C+A;for(let L=0;L<A;L++)c[C+L]=g[L]}else c.push(g)}}class B{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function q(c){return/^[\s\xa0]*$/.test(c)}function F(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Y(c){return Y[" "](c),c}Y[" "]=function(){};var ee=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function Z(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function I(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function y(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let A=0;A<w.length;A++)f=w[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function _(){var c=Hh;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Bn{constructor(){this.h=this.g=null}add(d,f){let g=Bs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Bs=new B(()=>new mx,c=>c.reset());class mx{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Us,$s=!1,Hh=new Bn,Z_=()=>{let c=a.Promise.resolve(void 0);Us=()=>{c.then(yx)}};var yx=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){T(f)}var d=Bs;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}$s=!1};function fr(){this.s=this.s,this.C=this.C}fr.prototype.s=!1,fr.prototype.ma=function(){this.s||(this.s=!0,this.N())},fr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ft(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ft.prototype.h=function(){this.defaultPrevented=!0};var vx=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Hs(c,d){if(ft.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ee){e:{try{Y(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:_x[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Hs.aa.h.call(this)}}b(Hs,ft);var _x={2:"touch",3:"pen",4:"mouse"};Hs.prototype.h=function(){Hs.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var qs="closure_listenable_"+(1e6*Math.random()|0),wx=0;function Ix(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++wx,this.da=this.fa=!1}function Yu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Zu(c){this.src=c,this.g={},this.h=0}Zu.prototype.add=function(c,d,f,g,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var L=zh(c,d,g,C);return-1<L?(d=c[L],f||(d.fa=!1)):(d=new Ix(d,this.src,A,!!g,C),d.fa=f,c.push(d)),d};function qh(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(Yu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function zh(c,d,f,g){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var Gh="closure_lm_"+(1e6*Math.random()|0),Wh={};function J_(c,d,f,g,C){if(g&&g.once)return ew(c,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)J_(c,d[A],f,g,C);return null}return f=Zh(f),c&&c[qs]?c.K(d,f,l(g)?!!g.capture:!!g,C):X_(c,d,f,!1,g,C)}function X_(c,d,f,g,C,A){if(!d)throw Error("Invalid event type");var L=l(C)?!!C.capture:!!C,be=Qh(c);if(be||(c[Gh]=be=new Zu(c)),f=be.add(d,f,g,L,A),f.proxy)return f;if(g=Ex(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)vx||(C=L),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(nw(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Ex(){function c(f){return d.call(c.src,c.listener,f)}let d=Dx;return c}function ew(c,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)ew(c,d[A],f,g,C);return null}return f=Zh(f),c&&c[qs]?c.L(d,f,l(g)?!!g.capture:!!g,C):X_(c,d,f,!0,g,C)}function tw(c,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)tw(c,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=Zh(f),c&&c[qs]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=zh(A,f,g,C),-1<f&&(Yu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Qh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=zh(d,f,g,C)),(f=-1<c?d[c]:null)&&Kh(f))}function Kh(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[qs])qh(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(nw(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Qh(d))?(qh(f,c),f.h==0&&(f.src=null,d[Gh]=null)):Yu(c)}}}function nw(c){return c in Wh?Wh[c]:Wh[c]="on"+c}function Dx(c,d){if(c.da)c=!0;else{d=new Hs(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Kh(c),c=f.call(g,d)}return c}function Qh(c){return c=c[Gh],c instanceof Zu?c:null}var Yh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zh(c){return typeof c=="function"?c:(c[Yh]||(c[Yh]=function(d){return c.handleEvent(d)}),c[Yh])}function pt(){fr.call(this),this.i=new Zu(this),this.M=this,this.F=null}b(pt,fr),pt.prototype[qs]=!0,pt.prototype.removeEventListener=function(c,d,f,g){tw(this,c,d,f,g)};function _t(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new ft(d,c);else if(d instanceof ft)d.target=d.target||c;else{var C=d;d=new ft(g,c),E(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var L=d.g=f[A];C=Ju(L,g,!0,d)&&C}if(L=d.g=c,C=Ju(L,g,!0,d)&&C,C=Ju(L,g,!1,d)&&C,f)for(A=0;A<f.length;A++)L=d.g=f[A],C=Ju(L,g,!1,d)&&C}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Yu(f[g]);delete c.g[d],c.h--}}this.F=null},pt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},pt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Ju(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var L=d[A];if(L&&!L.da&&L.capture==f){var be=L.listener,ut=L.ha||L.src;L.fa&&qh(c.i,L),C=be.call(ut,g)!==!1&&C}}return C&&!g.defaultPrevented}function rw(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function iw(c){c.g=rw(()=>{c.g=null,c.i&&(c.i=!1,iw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class Cx extends fr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:iw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zs(c){fr.call(this),this.h=c,this.g={}}b(zs,fr);var ow=[];function sw(c){Z(c.g,function(d,f){this.g.hasOwnProperty(f)&&Kh(d)},c),c.g={}}zs.prototype.N=function(){zs.aa.N.call(this),sw(this)},zs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jh=a.JSON.stringify,Tx=a.JSON.parse,bx=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Xh(){}Xh.prototype.h=null;function aw(c){return c.h||(c.h=c.i())}function uw(){}var Gs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ef(){ft.call(this,"d")}b(ef,ft);function tf(){ft.call(this,"c")}b(tf,ft);var ti={},cw=null;function Xu(){return cw=cw||new pt}ti.La="serverreachability";function lw(c){ft.call(this,ti.La,c)}b(lw,ft);function Ws(c){let d=Xu();_t(d,new lw(d))}ti.STAT_EVENT="statevent";function dw(c,d){ft.call(this,ti.STAT_EVENT,c),this.stat=d}b(dw,ft);function wt(c){let d=Xu();_t(d,new dw(d,c))}ti.Ma="timingevent";function hw(c,d){ft.call(this,ti.Ma,c),this.size=d}b(hw,ft);function Ks(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Qs(){this.g=!0}Qs.prototype.xa=function(){this.g=!1};function Sx(c,d,f,g,C,A){c.info(function(){if(c.g)if(A)for(var L="",be=A.split("&"),ut=0;ut<be.length;ut++){var we=be[ut].split("=");if(1<we.length){var gt=we[0];we=we[1];var mt=gt.split("_");L=2<=mt.length&&mt[1]=="type"?L+(gt+"="+we+"&"):L+(gt+"=redacted&")}}else L=null;else L=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+L})}function Ax(c,d,f,g,C,A,L){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+L})}function to(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+Rx(c,f)+(g?" "+g:"")})}function xx(c,d){c.info(function(){return"TIMEOUT: "+d})}Qs.prototype.info=function(){};function Rx(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return Jh(f)}catch{return d}}var ec={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},nf;function tc(){}b(tc,Xh),tc.prototype.g=function(){return new XMLHttpRequest},tc.prototype.i=function(){return{}},nf=new tc;function pr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new zs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pw}function pw(){this.i=null,this.g="",this.h=!1}var gw={},rf={};function of(c,d,f){c.L=1,c.v=oc(Un(d)),c.m=f,c.P=!0,mw(c,null)}function mw(c,d){c.F=Date.now(),nc(c),c.A=Un(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),Rw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new pw,c.g=Kw(c.j,f?d:null,!c.m),0<c.O&&(c.M=new Cx(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(ow[0]=C.toString()),C=ow);for(var A=0;A<C.length;A++){var L=J_(f,C[A],g||d.handleEvent,!1,d.h||d);if(!L)break;d.g[L.key]=L}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Ws(),Sx(c.i,c.u,c.A,c.l,c.R,c.m)}pr.prototype.ca=function(c){c=c.target;let d=this.M;d&&$n(c)==3?d.j():this.Y(c)},pr.prototype.Y=function(c){try{if(c==this.g)e:{let mt=$n(this.g);var d=this.g.Ba();let io=this.g.Z();if(!(3>mt)&&(mt!=3||this.g&&(this.h.h||this.g.oa()||Lw(this.g)))){this.J||mt!=4||d==7||(d==8||0>=io?Ws(3):Ws(2)),sf(this);var f=this.g.Z();this.X=f;t:if(yw(this)){var g=Lw(this.g);c="";var C=g.length,A=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ni(this),Ys(this);var L="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,Ax(this.i,this.u,this.A,this.l,this.R,mt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var be,ut=this.g;if((be=ut.g?ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(be)){var we=be;break t}}we=null}if(f=we)to(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,af(this,f);else{this.o=!1,this.s=3,wt(12),ni(this),Ys(this);break e}}if(this.P){f=!0;let sn;for(;!this.J&&this.C<L.length;)if(sn=Mx(this,L),sn==rf){mt==4&&(this.s=4,wt(14),f=!1),to(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==gw){this.s=4,wt(15),to(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else to(this.i,this.l,sn,null),af(this,sn);if(yw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||L.length!=0||this.h.h||(this.s=1,wt(16),f=!1),this.o=this.o&&f,!f)to(this.i,this.l,L,"[Invalid Chunked Response]"),ni(this),Ys(this);else if(0<L.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),ff(gt),gt.M=!0,wt(11))}}else to(this.i,this.l,L,null),af(this,L);mt==4&&ni(this),this.o&&!this.J&&(mt==4?qw(this.j,this):(this.o=!1,nc(this)))}else Kx(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),ni(this),Ys(this)}}}catch{}finally{}};function yw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Mx(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?rf:(f=Number(d.substring(f,g)),isNaN(f)?gw:(g+=1,g+f>d.length?rf:(d=d.slice(g,g+f),c.C=g+f,d)))}pr.prototype.cancel=function(){this.J=!0,ni(this)};function nc(c){c.S=Date.now()+c.I,vw(c,c.I)}function vw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ks(m(c.ba,c),d)}function sf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}pr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(xx(this.i,this.A),this.L!=2&&(Ws(),wt(17)),ni(this),this.s=2,Ys(this)):vw(this,this.S-c)};function Ys(c){c.j.G==0||c.J||qw(c.j,c)}function ni(c){sf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,sw(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function af(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||uf(f.h,c))){if(!c.K&&uf(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)lc(f),uc(f);else break e;hf(f),wt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ks(m(f.Za,f),6e3));if(1>=Iw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ii(f,11)}else if((c.K||f.g==c)&&lc(f),!q(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let we=C[d];if(f.T=we[0],we=we[1],f.G==2)if(we[0]=="c"){f.K=we[1],f.ia=we[2];let gt=we[3];gt!=null&&(f.la=gt,f.j.info("VER="+f.la));let mt=we[4];mt!=null&&(f.Aa=mt,f.j.info("SVER="+f.Aa));let io=we[5];io!=null&&typeof io=="number"&&0<io&&(g=1.5*io,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let sn=c.g;if(sn){let hc=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hc){var A=g.h;A.g||hc.indexOf("spdy")==-1&&hc.indexOf("quic")==-1&&hc.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(cf(A,A.h),A.h=null))}if(g.D){let pf=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;pf&&(g.ya=pf,Ne(g.I,g.D,pf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var L=c;if(g.qa=Ww(g,g.J?g.ia:null,g.W),L.K){Ew(g.h,L);var be=L,ut=g.L;ut&&(be.I=ut),be.B&&(sf(be),nc(be)),g.g=L}else $w(g);0<f.i.length&&cc(f)}else we[0]!="stop"&&we[0]!="close"||ii(f,7);else f.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?ii(f,7):df(f):we[0]!="noop"&&f.l&&f.l.ta(we),f.v=0)}}Ws(4)}catch{}}var Nx=class{constructor(c,d){this.g=c,this.map=d}};function _w(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ww(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Iw(c){return c.h?1:c.g?c.g.size:0}function uf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function cf(c,d){c.g?c.g.add(d):c.h=d}function Ew(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}_w.prototype.cancel=function(){if(this.i=Dw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Dw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return M(c.i)}function Px(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function kx(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function Cw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=kx(c),g=Px(c),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],c)}var Tw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ox(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var A=c[f].substring(0,g);C=c[f].substring(g+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function ri(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ri){this.h=c.h,rc(this,c.j),this.o=c.o,this.g=c.g,ic(this,c.s),this.l=c.l;var d=c.i,f=new Xs;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),bw(this,f),this.m=c.m}else c&&(d=String(c).match(Tw))?(this.h=!1,rc(this,d[1]||"",!0),this.o=Zs(d[2]||""),this.g=Zs(d[3]||"",!0),ic(this,d[4]),this.l=Zs(d[5]||"",!0),bw(this,d[6]||"",!0),this.m=Zs(d[7]||"")):(this.h=!1,this.i=new Xs(null,this.h))}ri.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Js(d,Sw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Js(d,Sw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Js(f,f.charAt(0)=="/"?Vx:Lx,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Js(f,Bx)),c.join("")};function Un(c){return new ri(c)}function rc(c,d,f){c.j=f?Zs(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function ic(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function bw(c,d,f){d instanceof Xs?(c.i=d,Ux(c.i,c.h)):(f||(d=Js(d,jx)),c.i=new Xs(d,c.h))}function Ne(c,d,f){c.i.set(d,f)}function oc(c){return Ne(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Zs(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Js(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,Fx),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Fx(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Sw=/[#\/\?@]/g,Lx=/[#\?:]/g,Vx=/[#\?]/g,jx=/[#\?@]/g,Bx=/#/g;function Xs(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function gr(c){c.g||(c.g=new Map,c.h=0,c.i&&Ox(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Xs.prototype,n.add=function(c,d){gr(this),this.i=null,c=no(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Aw(c,d){gr(c),d=no(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function xw(c,d){return gr(c),d=no(c,d),c.g.has(d)}n.forEach=function(c,d){gr(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},n.na=function(){gr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},n.V=function(c){gr(this);let d=[];if(typeof c=="string")xw(this,c)&&(d=d.concat(this.g.get(no(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return gr(this),this.i=null,c=no(this,c),xw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Rw(c,d,f){Aw(c,d),0<f.length&&(c.i=null,c.g.set(no(c,d),M(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var C=A;L[g]!==""&&(C+="="+encodeURIComponent(String(L[g]))),c.push(C)}}return this.i=c.join("&")};function no(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function Ux(c,d){d&&!c.j&&(gr(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(Aw(this,g),Rw(this,C,f))},c)),c.j=d}function $x(c,d){let f=new Qs;if(a.Image){let g=new Image;g.onload=v(mr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(mr,f,"TestLoadImage: error",!1,d,g),g.onabort=v(mr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(mr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function Hx(c,d){let f=new Qs,g=new AbortController,C=setTimeout(()=>{g.abort(),mr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?mr(f,"TestPingServer: ok",!0,d):mr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),mr(f,"TestPingServer: error",!1,d)})}function mr(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function qx(){this.g=new bx}function zx(c,d,f){let g=f||"";try{Cw(c,function(C,A){let L=C;l(C)&&(L=Jh(C)),d.push(g+A+"="+encodeURIComponent(L))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function ea(c){this.l=c.Ub||null,this.j=c.eb||!1}b(ea,Xh),ea.prototype.g=function(){return new sc(this.l,this.j)},ea.prototype.i=function(c){return function(){return c}}({});function sc(c,d){pt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(sc,pt),n=sc.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,na(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ta(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,na(this)),this.g&&(this.readyState=3,na(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Mw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Mw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ta(this):na(this),this.readyState==3&&Mw(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,ta(this))},n.Qa=function(c){this.g&&(this.response=c,ta(this))},n.ga=function(){this.g&&ta(this)};function ta(c){c.readyState=4,c.l=null,c.j=null,c.v=null,na(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function na(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(sc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Nw(c){let d="";return Z(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function lf(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Nw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ne(c,d,f))}function Ue(c){pt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ue,pt);var Gx=/^https?$/i,Wx=["POST","PUT"];n=Ue.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():nf.g(),this.v=this.o?aw(this.o):aw(nf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){Pw(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Wx,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,L]of f)this.g.setRequestHeader(A,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fw(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){Pw(this,A)}};function Pw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,kw(c),ac(c)}function kw(c){c.A||(c.A=!0,_t(c,"complete"),_t(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,_t(this,"complete"),_t(this,"abort"),ac(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ac(this,!0)),Ue.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ow(this):this.bb())},n.bb=function(){Ow(this)};function Ow(c){if(c.h&&typeof s<"u"&&(!c.v[1]||$n(c)!=4||c.Z()!=2)){if(c.u&&$n(c)==4)rw(c.Ea,0,c);else if(_t(c,"readystatechange"),$n(c)==4){c.h=!1;try{let L=c.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=L===0){var C=String(c.D).match(Tw)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!Gx.test(C?C.toLowerCase():"")}f=g}if(f)_t(c,"complete"),_t(c,"success");else{c.m=6;try{var A=2<$n(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",kw(c)}}finally{ac(c)}}}}function ac(c,d){if(c.g){Fw(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||_t(c,"ready");try{f.onreadystatechange=g}catch{}}}function Fw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function $n(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Tx(d)}};function Lw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Kx(c){let d={};c=(c.g&&2<=$n(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(q(c[g]))continue;var f=D(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}I(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ra(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Vw(c){this.Aa=0,this.i=[],this.j=new Qs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ra("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ra("baseRetryDelayMs",5e3,c),this.cb=ra("retryDelaySeedMs",1e4,c),this.Wa=ra("forwardChannelMaxRetries",2,c),this.wa=ra("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new _w(c&&c.concurrentRequestLimit),this.Da=new qx,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Vw.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){wt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Ww(this,null,this.W),cc(this)};function df(c){if(jw(c),c.G==3){var d=c.U++,f=Un(c.I);if(Ne(f,"SID",c.K),Ne(f,"RID",d),Ne(f,"TYPE","terminate"),ia(c,f),d=new pr(c,c.j,d),d.L=2,d.v=oc(Un(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Kw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),nc(d)}Gw(c)}function uc(c){c.g&&(ff(c),c.g.cancel(),c.g=null)}function jw(c){uc(c),c.u&&(a.clearTimeout(c.u),c.u=null),lc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function cc(c){if(!ww(c.h)&&!c.s){c.s=!0;var d=c.Ga;Us||Z_(),$s||(Us(),$s=!0),Hh.add(d,c),c.B=0}}function Qx(c,d){return Iw(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ks(m(c.Ga,c,d),zw(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new pr(this,this.j,c),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Uw(this,C,d),f=Un(this.I),Ne(f,"RID",c),Ne(f,"CVER",22),this.D&&Ne(f,"X-HTTP-Session-Id",this.D),ia(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(Nw(A)))+"&"+d:this.m&&lf(f,this.m,A)),cf(this.h,C),this.Ua&&Ne(f,"TYPE","init"),this.P?(Ne(f,"$req",d),Ne(f,"SID","null"),C.T=!0,of(C,f,null)):of(C,f,d),this.G=2}}else this.G==3&&(c?Bw(this,c):this.i.length==0||ww(this.h)||Bw(this))};function Bw(c,d){var f;d?f=d.l:f=c.U++;let g=Un(c.I);Ne(g,"SID",c.K),Ne(g,"RID",f),Ne(g,"AID",c.T),ia(c,g),c.m&&c.o&&lf(g,c.m,c.o),f=new pr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Uw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),cf(c.h,f),of(f,g,d)}function ia(c,d){c.H&&Z(c.H,function(f,g){Ne(d,g,f)}),c.l&&Cw({},function(f,g){Ne(d,g,f)})}function Uw(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let L=["count="+f];A==-1?0<f?(A=C[0].g,L.push("ofs="+A)):A=0:L.push("ofs="+A);let be=!0;for(let ut=0;ut<f;ut++){let we=C[ut].g,gt=C[ut].map;if(we-=A,0>we)A=Math.max(0,C[ut].g-100),be=!1;else try{zx(gt,L,"req"+we+"_")}catch{g&&g(gt)}}if(be){g=L.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function $w(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Us||Z_(),$s||(Us(),$s=!0),Hh.add(d,c),c.v=0}}function hf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ks(m(c.Fa,c),zw(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Hw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ks(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),uc(this),Hw(this))};function ff(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Hw(c){c.g=new pr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Un(c.qa);Ne(d,"RID","rpc"),Ne(d,"SID",c.K),Ne(d,"AID",c.T),Ne(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ne(d,"TO",c.ja),Ne(d,"TYPE","xmlhttp"),ia(c,d),c.m&&c.o&&lf(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=oc(Un(d)),f.m=null,f.P=!0,mw(f,c)}n.Za=function(){this.C!=null&&(this.C=null,uc(this),hf(this),wt(19))};function lc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function qw(c,d){var f=null;if(c.g==d){lc(c),ff(c),c.g=null;var g=2}else if(uf(c.h,d))f=d.D,Ew(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=Xu(),_t(g,new hw(g,f)),cc(c)}else $w(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&Qx(c,d)||g==2&&hf(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:ii(c,5);break;case 4:ii(c,10);break;case 3:ii(c,6);break;default:ii(c,2)}}}function zw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function ii(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let C=!g;g=new ri(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||rc(g,"https"),oc(g),C?$x(g.toString(),f):Hx(g.toString(),f)}else wt(2);c.G=0,c.l&&c.l.sa(d),Gw(c),jw(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Gw(c){if(c.G=0,c.ka=[],c.l){let d=Dw(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ka,d),N(c.ka,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.ra()}}function Ww(c,d,f){var g=f instanceof ri?Un(f):new ri(f);if(g.g!="")d&&(g.g=d+"."+g.g),ic(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new ri(null);g&&rc(A,g),d&&(A.g=d),C&&ic(A,C),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Ne(g,f,d),Ne(g,"VER",c.la),ia(c,g),g}function Kw(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ue(new ea({eb:f})):new Ue(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qw(){}n=Qw.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function dc(){}dc.prototype.g=function(c,d){return new Vt(c,d)};function Vt(c,d){pt.call(this),this.g=new Vw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!q(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!q(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new ro(this)}b(Vt,pt),Vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){df(this.g)},Vt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Jh(c),c=f);d.i.push(new Nx(d.Ya++,c)),d.G==3&&cc(d)},Vt.prototype.N=function(){this.g.l=null,delete this.j,df(this.g),delete this.g,Vt.aa.N.call(this)};function Yw(c){ef.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(Yw,ef);function Zw(){tf.call(this),this.status=1}b(Zw,tf);function ro(c){this.g=c}b(ro,Qw),ro.prototype.ua=function(){_t(this.g,"a")},ro.prototype.ta=function(c){_t(this.g,new Yw(c))},ro.prototype.sa=function(c){_t(this.g,new Zw)},ro.prototype.ra=function(){_t(this.g,"b")},dc.prototype.createWebChannel=dc.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,Qm=rr.createWebChannelTransport=function(){return new dc},Km=rr.getStatEventTarget=function(){return Xu()},Wm=rr.Event=ti,wd=rr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ec.NO_ERROR=0,ec.TIMEOUT=8,ec.HTTP_ERROR=6,cu=rr.ErrorCode=ec,fw.COMPLETE="complete",Gm=rr.EventType=fw,uw.EventType=Gs,Gs.OPEN="a",Gs.CLOSE="b",Gs.ERROR="c",Gs.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Xo=rr.WebChannel=uw,OL=rr.FetchXmlHttpFactory=ea,Ue.prototype.listenOnce=Ue.prototype.L,Ue.prototype.getLastError=Ue.prototype.Ka,Ue.prototype.getLastErrorCode=Ue.prototype.Ba,Ue.prototype.getStatus=Ue.prototype.Z,Ue.prototype.getResponseJson=Ue.prototype.Oa,Ue.prototype.getResponseText=Ue.prototype.oa,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Ha,zm=rr.XhrIo=Ue}).apply(typeof _d<"u"?_d:typeof self<"u"?self:typeof window<"u"?window:{});var E0="@firebase/firestore";var tt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};tt.UNAUTHENTICATED=new tt(null),tt.GOOGLE_CREDENTIALS=new tt("google-credentials-uid"),tt.FIRST_PARTY=new tt("first-party-uid"),tt.MOCK_USER=new tt("mock-user");var Rs="10.14.0";var $r=new gc("@firebase/firestore");function is(){return $r.logLevel}function Tb(n){$r.setLogLevel(n)}function k(n,...e){if($r.logLevel<=wn.DEBUG){let t=e.map(e_);$r.debug(`Firestore (${Rs}): ${n}`,...t)}}function Ge(n,...e){if($r.logLevel<=wn.ERROR){let t=e.map(e_);$r.error(`Firestore (${Rs}): ${n}`,...t)}}function gn(n,...e){if($r.logLevel<=wn.WARN){let t=e.map(e_);$r.warn(`Firestore (${Rs}): ${n}`,...t)}}function e_(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${Rs}) INTERNAL ASSERTION FAILED: `+n;throw Ge(e),new Error(e)}function K(n,e){n||z()}function bb(n,e){n||z()}function U(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends rI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var it=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Rd=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ty=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(tt.UNAUTHENTICATED))}shutdown(){}},ny=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},ry=class{constructor(e){this.t=e,this.currentUser=tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){K(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new it;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new it,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>R(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new it)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(K(typeof r.accessToken=="string"),new Rd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return K(e===null||typeof e=="string"),new tt(e)}},iy=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},oy=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new iy(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},sy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ay=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){K(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(K(typeof t.token=="string"),this.R=t.token,new sy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function FL(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Md=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=FL(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function re(n,e){return n<e?-1:n>e?1:0}function fs(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Sb(n){return n+"\0"}var je=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Q=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new je(0,0))}static max(){return new n(new je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Nd=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(),r===void 0?r=e.length-t:r>e.length-t&&z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},me=class n extends Nd{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},LL=/^[_a-zA-Z][_a-zA-Z0-9]*$/,We=class n extends Nd{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return LL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new P(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(me.fromString(e))}static fromName(e){return new n(me.fromString(e).popFirst(5))}static empty(){return new n(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return me.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new me(e.slice()))}};var ps=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function uy(n){return n.fields.find(e=>e.kind===2)}function xi(n){return n.fields.filter(e=>e.kind!==2)}ps.UNKNOWN_ID=-1;var ls=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Iu=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,rn.min())}};function Ab(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(r===1e9?new je(t+1,0):new je(t,r));return new rn(i,$.empty(),e)}function xb(n){return new rn(n.readTime,n.key,-1)}var rn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Q.min(),$.empty(),-1)}static max(){return new n(Q.max(),$.empty(),-1)}};function t_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:re(n.largestBatchId,e.largestBatchId))}var Rb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Pd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Jr(n){return R(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==Rb)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var kd=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new it,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Oi(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=n_(r.target.error);this.V.reject(new Oi(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Oi(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new ly(t)}},Hr=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(oa())===12.2&&Ge("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),Ri(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!pc())return!1;if(n.v())return!0;let e=oa(),t=n.S(e),r=0<t&&t<10,i=Mb(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return R(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Oi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Oi(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return R(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=kd.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function Mb(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var cy=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ri(this.B.delete())}},Oi=class extends P{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Xr(n){return n.name==="IndexedDbTransactionError"}var ly=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ri(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),Ri(this.store.add(e))}get(e){return Ri(this.store.get(e)).next(t=>(t===void 0&&(t=null),k("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),Ri(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),Ri(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=n_(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new cy(a),l=t(a.primaryKey,a.value,u);if(l instanceof S){let h=l.catch(p=>(u.done(),S.reject(p)));r.push(h)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Ri(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=n_(r.target.error);t(i)}})}var D0=!1;function n_(n){let e=Hr.S(oa());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return D0||(D0=!0,setTimeout(()=>{throw r},0)),r}}return n}var dy=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>R(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Xr(t)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Jr(t)}yield this.X(6e4)}))}},hy=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return R(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=xb(o);t_(s,r)>0&&(r=s)}),new rn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var zt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function $u(n){return n==null}function Eu(n){return n===0&&1/n==-1/0}function Nb(n){return typeof n=="number"&&Number.isInteger(n)&&!Eu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function At(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=C0(e)),e=VL(n.get(t),e);return C0(e)}function VL(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function C0(n){return n+""}function Rn(n){let e=n.length;if(K(e>=2),e===2)return K(n.charAt(0)===""&&n.charAt(1)===""),me.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&z(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:z()}o=s+2}return new me(r)}var T0=["userId","batchId"];function Td(n,e){return[n,At(e)]}function Pb(n,e,t){return[n,At(e),t]}var jL={},BL=["prefixPath","collectionGroup","readTime","documentId"],UL=["prefixPath","collectionGroup","documentId"],$L=["collectionGroup","readTime","prefixPath","documentId"],HL=["canonicalId","targetId"],qL=["targetId","path"],zL=["path","targetId"],GL=["collectionId","parent"],WL=["indexId","uid"],KL=["uid","sequenceNumber"],QL=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],YL=["indexId","uid","orderedDocumentKey"],ZL=["userId","collectionPath","documentId"],JL=["userId","collectionPath","largestBatchId"],XL=["userId","collectionGroup","largestBatchId"],kb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],eV=[...kb,"documentOverlays"],Ob=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fb=Ob,r_=[...Fb,"indexConfiguration","indexState","indexEntries"],tV=r_,nV=[...r_,"globals"];var Du=class extends Pd{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function ot(n,e){let t=U(n);return Hr.F(t._e,e)}function b0(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Lb(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ke=class n{constructor(e,t){this.comparator=e,this.root=t||Nn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cs(this.root,e,this.comparator,!1)}getReverseIterator(){return new cs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cs(this.root,e,this.comparator,!0)}},cs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Nn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ae=class n{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Od(this.data.getIterator())}getIteratorFrom(e){return new Od(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Od=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function es(n){return n.hasNext()?n.getNext():void 0}var Gt=class n{constructor(e){this.fields=e,e.sort(We.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ae(We.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fs(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Fd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function Vb(){return typeof atob<"u"}var Qe=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Fd("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Qe.EMPTY_BYTE_STRING=new Qe("");var rV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sr(n){if(K(!!n),typeof n=="string"){let e=0,t=rV.exec(n);if(K(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(n.seconds),nanos:Fe(n.nanos)}}function Fe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function qr(n){return typeof n=="string"?Qe.fromBase64String(n):Qe.fromUint8Array(n)}function Sh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function i_(n){let e=n.mapValue.fields.__previous_value__;return Sh(e)?i_(e):e}function Cu(n){let e=sr(n.mapValue.fields.__local_write_time__.timestampValue);return new je(e.seconds,e.nanos)}var fy=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},zr=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Br={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bd={nullValue:"NULL_VALUE"};function Fi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sh(n)?4:jb(n)?9007199254740991:Ah(n)?10:11:z()}function On(n,e){if(n===e)return!0;let t=Fi(n);if(t!==Fi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Cu(n).isEqual(Cu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=sr(i.timestampValue),a=sr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return qr(i.bytesValue).isEqual(qr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Fe(i.geoPointValue.latitude)===Fe(o.geoPointValue.latitude)&&Fe(i.geoPointValue.longitude)===Fe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Fe(i.integerValue)===Fe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Fe(i.doubleValue),a=Fe(o.doubleValue);return s===a?Eu(s)===Eu(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return fs(n.arrayValue.values||[],e.arrayValue.values||[],On);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(b0(s)!==b0(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!On(s[u],a[u])))return!1;return!0}(n,e);default:return z()}}function Tu(n,e){return(n.values||[]).find(t=>On(t,e))!==void 0}function Gr(n,e){if(n===e)return 0;let t=Fi(n),r=Fi(e);if(t!==r)return re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return re(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Fe(o.integerValue||o.doubleValue),u=Fe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return S0(n.timestampValue,e.timestampValue);case 4:return S0(Cu(n),Cu(e));case 5:return re(n.stringValue,e.stringValue);case 6:return function(o,s){let a=qr(o),u=qr(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=re(a[l],u[l]);if(h!==0)return h}return re(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=re(Fe(o.latitude),Fe(s.latitude));return a!==0?a:re(Fe(o.longitude),Fe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return A0(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(u=m.value)===null||u===void 0?void 0:u.arrayValue,M=re(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:A0(v,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Br.mapValue&&s===Br.mapValue)return 0;if(o===Br.mapValue)return 1;if(s===Br.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=re(u[p],h[p]);if(m!==0)return m;let v=Gr(a[u[p]],l[h[p]]);if(v!==0)return v}return re(u.length,h.length)}(n.mapValue,e.mapValue);default:throw z()}}function S0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return re(n,e);let t=sr(n),r=sr(e),i=re(t.seconds,r.seconds);return i!==0?i:re(t.nanos,r.nanos)}function A0(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Gr(t[i],r[i]);if(o)return o}return re(t.length,r.length)}function gs(n){return py(n)}function py(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=sr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return qr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=py(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${py(t.fields[s])}`;return i+"}"}(n.mapValue):z()}function Li(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function gy(n){return!!n&&"integerValue"in n}function bu(n){return!!n&&"arrayValue"in n}function x0(n){return!!n&&"nullValue"in n}function R0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sd(n){return!!n&&"mapValue"in n}function Ah(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function mu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Wi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=mu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function jb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Bb={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function iV(n){return"nullValue"in n?bd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Li(zr.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Ah(n)?Bb:{mapValue:{}}:z()}function oV(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Li(zr.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?Bb:"mapValue"in n?Ah(n)?{mapValue:{}}:Br:z()}function M0(n,e){let t=Gr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function N0(n,e){let t=Gr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var vt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Sd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mu(t)}setAll(e){let t=We.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=mu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Sd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return On(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Sd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Wi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(mu(this.value))}};function Ub(n){let e=[];return Wi(n.fields,(t,r)=>{let i=new We([t]);if(Sd(r)){let o=Ub(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Gt(e)}var nt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Q.min(),Q.min(),Q.min(),vt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Q.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Q.min(),Q.min(),vt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Q.min(),Q.min(),vt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Fn=class{constructor(e,t){this.position=e,this.inclusive=t}};function P0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=Gr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function k0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!On(n.position[t],e.position[t]))return!1;return!0}var Vi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function sV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ld=class{},ce=class n extends Ld{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new vy(e,t,r):t==="array-contains"?new Iy(e,r):t==="in"?new Vd(e,r):t==="not-in"?new Ey(e,r):t==="array-contains-any"?new Dy(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new _y(e,r):new wy(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Gr(t,this.value)):t!==null&&Fi(this.value)===Fi(t)&&this.matchesComparison(Gr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Te=class n extends Ld{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return ms(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function ms(n){return n.op==="and"}function my(n){return n.op==="or"}function o_(n){return $b(n)&&ms(n)}function $b(n){for(let e of n.filters)if(e instanceof Te)return!1;return!0}function yy(n){if(n instanceof ce)return n.field.canonicalString()+n.op.toString()+gs(n.value);if(o_(n))return n.filters.map(e=>yy(e)).join(",");{let e=n.filters.map(t=>yy(t)).join(",");return`${n.op}(${e})`}}function Hb(n,e){return n instanceof ce?function(r,i){return i instanceof ce&&r.op===i.op&&r.field.isEqual(i.field)&&On(r.value,i.value)}(n,e):n instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&Hb(s,i.filters[a]),!0):!1}(n,e):void z()}function qb(n,e){let t=n.filters.concat(e);return Te.create(t,n.op)}function zb(n){return n instanceof ce?function(t){return`${t.field.canonicalString()} ${t.op} ${gs(t.value)}`}(n):n instanceof Te?function(t){return t.op.toString()+" {"+t.getFilters().map(zb).join(" ,")+"}"}(n):"Filter"}var vy=class extends ce{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},_y=class extends ce{constructor(e,t){super(e,"in",t),this.keys=Gb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},wy=class extends ce{constructor(e,t){super(e,"not-in",t),this.keys=Gb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Gb(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var Iy=class extends ce{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return bu(t)&&Tu(t.arrayValue,this.value)}},Vd=class extends ce{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Tu(this.value.arrayValue,t)}},Ey=class extends ce{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Tu(this.value.arrayValue,t)}},Dy=class extends ce{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!bu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Tu(this.value.arrayValue,r))}};var Cy=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function Ty(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Cy(n,e,t,r,i,o,s)}function ji(n){let e=U(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>yy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),$u(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gs(r)).join(",")),e.ue=t}return e.ue}function Hu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!sV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Hb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!k0(n.startAt,e.startAt)&&k0(n.endAt,e.endAt)}function jd(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Bd(n,e){return n.filters.filter(t=>t instanceof ce&&t.field.isEqual(e))}function O0(n,e,t){let r=bd,i=!0;for(let o of Bd(n,e)){let s=bd,a=!0;switch(o.op){case"<":case"<=":s=iV(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=bd}M0({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];M0({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function F0(n,e,t){let r=Br,i=!0;for(let o of Bd(n,e)){let s=Br,a=!0;switch(o.op){case">=":case">":s=oV(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Br}N0({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];N0({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var mn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Wb(n,e,t,r,i,o,s,a){return new mn(n,e,t,r,i,o,s,a)}function Ms(n){return new mn(n)}function L0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function s_(n){return n.collectionGroup!==null}function ds(n){let e=U(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ae(We.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Vi(o,r))}),t.has(We.keyField().canonicalString())||e.ce.push(new Vi(We.keyField(),r))}return e.ce}function xt(n){let e=U(n);return e.le||(e.le=aV(e,ds(n))),e.le}function aV(n,e){if(n.limitType==="F")return Ty(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Vi(i.field,o)});let t=n.endAt?new Fn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Fn(n.startAt.position,n.startAt.inclusive):null;return Ty(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function by(n,e){let t=n.filters.concat([e]);return new mn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ud(n,e,t){return new mn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function qu(n,e){return Hu(xt(n),xt(e))&&n.limitType===e.limitType}function Kb(n){return`${ji(xt(n))}|lt:${n.limitType}`}function os(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>zb(i)).join(", ")}]`),$u(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>gs(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>gs(i)).join(",")),`Target(${r})`}(xt(n))}; limitType=${n.limitType})`}function zu(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of ds(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=P0(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,ds(r),i)||r.endAt&&!function(s,a,u){let l=P0(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,ds(r),i))}(n,e)}function Qb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Yb(n){return(e,t)=>{let r=!1;for(let i of ds(n)){let o=uV(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function uV(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Gr(u,l):z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var Ln=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Lb(this.inner)}size(){return this.innerSize}};var cV=new ke($.comparator);function Ft(){return cV}var Zb=new ke($.comparator);function pu(...n){let e=Zb;for(let t of n)e=e.insert(t.key,t);return e}function Jb(n){let e=Zb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Mn(){return yu()}function Xb(){return yu()}function yu(){return new Ln(n=>n.toString(),(n,e)=>n.isEqual(e))}var lV=new ke($.comparator),dV=new Ae($.comparator);function ie(...n){let e=dV;for(let t of n)e=e.add(t);return e}var hV=new Ae(re);function a_(){return hV}function u_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eu(e)?"-0":e}}function eS(n){return{integerValue:""+n}}function tS(n,e){return Nb(e)?eS(e):u_(n,e)}var ys=class{constructor(){this._=void 0}};function fV(n,e,t){return n instanceof Wr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Sh(o)&&(o=i_(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof ar?rS(n,e):n instanceof ur?iS(n,e):function(i,o){let s=nS(i,o),a=V0(s)+V0(i.Pe);return gy(s)&&gy(i.Pe)?eS(a):u_(i.serializer,a)}(n,e)}function pV(n,e,t){return n instanceof ar?rS(n,e):n instanceof ur?iS(n,e):t}function nS(n,e){return n instanceof Kr?function(r){return gy(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Wr=class extends ys{},ar=class extends ys{constructor(e){super(),this.elements=e}};function rS(n,e){let t=oS(e);for(let r of n.elements)t.some(i=>On(i,r))||t.push(r);return{arrayValue:{values:t}}}var ur=class extends ys{constructor(e){super(),this.elements=e}};function iS(n,e){let t=oS(e);for(let r of n.elements)t=t.filter(i=>!On(i,r));return{arrayValue:{values:t}}}var Kr=class extends ys{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function V0(n){return Fe(n.integerValue||n.doubleValue)}function oS(n){return bu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Bi=class{constructor(e,t){this.field=e,this.transform=t}};function gV(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ar&&i instanceof ar||r instanceof ur&&i instanceof ur?fs(r.elements,i.elements,On):r instanceof Kr&&i instanceof Kr?On(r.Pe,i.Pe):r instanceof Wr&&i instanceof Wr}(n.transform,e.transform)}var Sy=class{constructor(e,t){this.version=e,this.transformResults=t}},qe=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ad(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var vs=class{};function sS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Yr(n.key,qe.none()):new Qr(n.key,n.data,qe.none());{let t=n.data,r=vt.empty(),i=new Ae(We.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new yn(n.key,r,new Gt(i.toArray()),qe.none())}}function mV(n,e,t){n instanceof Qr?function(i,o,s){let a=i.value.clone(),u=B0(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof yn?function(i,o,s){if(!Ad(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=B0(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(aS(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function vu(n,e,t,r){return n instanceof Qr?function(o,s,a,u){if(!Ad(o.precondition,s))return a;let l=o.value.clone(),h=U0(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof yn?function(o,s,a,u){if(!Ad(o.precondition,s))return a;let l=U0(o.fieldTransforms,u,s),h=s.data;return h.setAll(aS(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Ad(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function yV(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=nS(r.transform,i||null);o!=null&&(t===null&&(t=vt.empty()),t.set(r.field,o))}return t||null}function j0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&fs(r,i,(o,s)=>gV(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Qr=class extends vs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},yn=class extends vs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function aS(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function B0(n,e,t){let r=new Map;K(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,pV(s,a,t[i]))}return r}function U0(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,fV(o,s,e))}return r}var Yr=class extends vs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Su=class extends vs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Au=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&mV(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=vu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=vu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Xb();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=sS(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ie())}isEqual(e){return this.batchId===e.batchId&&fs(this.mutations,e.mutations,(t,r)=>j0(t,r))&&fs(this.baseMutations,e.baseMutations,(t,r)=>j0(t,r))}},Ay=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){K(e.mutations.length===r.length);let i=function(){return lV}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var xu=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var xy=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Xe,ge;function uS(n){switch(n){default:return z();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function cS(n){if(n===void 0)return Ge("GRPC error has no .code"),x.UNKNOWN;switch(n){case Xe.OK:return x.OK;case Xe.CANCELLED:return x.CANCELLED;case Xe.UNKNOWN:return x.UNKNOWN;case Xe.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Xe.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Xe.INTERNAL:return x.INTERNAL;case Xe.UNAVAILABLE:return x.UNAVAILABLE;case Xe.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Xe.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Xe.NOT_FOUND:return x.NOT_FOUND;case Xe.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Xe.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Xe.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Xe.ABORTED:return x.ABORTED;case Xe.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Xe.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Xe.DATA_LOSS:return x.DATA_LOSS;default:return z()}}(ge=Xe||(Xe={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var $0=null;function lS(){return new TextEncoder}var vV=new Or([4294967295,4294967295],0);function H0(n){let e=lS().encode(n),t=new qm;return t.update(e),new Uint8Array(t.digest())}function q0(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Or([t,r],0),new Or([i,o],0)]}var Ry=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ki(`Invalid padding: ${t}`);if(r<0)throw new ki(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ki(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ki(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Or.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Or.fromNumber(r)));return i.compare(vV)===1&&(i=new Or([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=H0(e),[r,i]=q0(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=H0(e),[r,i]=q0(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ki=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ru=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Mu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Q.min(),i,new ke(re),Ft(),ie())}},Mu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ie(),ie(),ie())}};var hs=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},$d=class{constructor(e,t){this.targetId=e,this.me=t}},Hd=class{constructor(e,t,r=Qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},qd=class{constructor(){this.fe=0,this.ge=G0(),this.pe=Qe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),t=ie(),r=ie();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z()}}),new Mu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=G0()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,K(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},My=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ft(),this.qe=z0(),this.Qe=new ke(re)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(jd(o))if(r===0){let s=new $(o.path);this.Ue(t,s,nt.newNoDocument(s,Q.min()))}else K(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}$0?.et(function(h,p,m,v,b){var M,N,B,q,F,Y;let ee={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Z=p.unchangedNames;return Z&&(ee.bloomFilter={applied:b===0,hashCount:(M=Z?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(q=(B=(N=Z?.bits)===null||N===void 0?void 0:N.bitmap)===null||B===void 0?void 0:B.length)!==null&&q!==void 0?q:0,padding:(Y=(F=Z?.bits)===null||F===void 0?void 0:F.padding)!==null&&Y!==void 0?Y:0,mightContain:I=>{var y;return(y=v?.mightContain(I))!==null&&y!==void 0&&y}}),ee}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=qr(r).toUint8Array()}catch(u){if(u instanceof Fd)return gn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Ry(s,i,o)}catch(u){return gn(u instanceof ki?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&jd(a.target)){let u=new $(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,nt.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ie();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Ru(e,t,this.Qe,this.ke,r);return this.ke=Ft(),this.qe=z0(),this.Qe=new ke(re),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new qd,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ae(re),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new qd),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function z0(){return new ke($.comparator)}function G0(){return new ke($.comparator)}var _V={asc:"ASCENDING",desc:"DESCENDING"},wV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IV={and:"AND",or:"OR"},Ny=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Py(n,e){return n.useProto3Json||$u(e)?e:{value:e}}function _s(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function EV(n,e){return _s(n,e.toTimestamp())}function Ke(n){return K(!!n),Q.fromTimestamp(function(t){let r=sr(t);return new je(r.seconds,r.nanos)}(n))}function c_(n,e){return ky(n,e).canonicalString()}function ky(n,e){let t=function(i){return new me(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function hS(n){let e=me.fromString(n);return K(ES(e)),e}function Nu(n,e){return c_(n.databaseId,e.path)}function Pn(n,e){let t=hS(e);if(t.get(1)!==n.databaseId.projectId)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(gS(t))}function fS(n,e){return c_(n.databaseId,e)}function pS(n){let e=hS(n);return e.length===4?me.emptyPath():gS(e)}function Oy(n){return new me(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gS(n){return K(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function W0(n,e,t){return{name:Nu(n,e),fields:t.value.mapValue.fields}}function mS(n,e,t){let r=Pn(n,e.name),i=Ke(e.updateTime),o=e.createTime?Ke(e.createTime):Q.min(),s=new vt({mapValue:{fields:e.fields}}),a=nt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function DV(n,e){return"found"in e?function(r,i){K(!!i.found),i.found.name,i.found.updateTime;let o=Pn(r,i.found.name),s=Ke(i.found.updateTime),a=i.found.createTime?Ke(i.found.createTime):Q.min(),u=new vt({mapValue:{fields:i.found.fields}});return nt.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){K(!!i.missing),K(!!i.readTime);let o=Pn(r,i.missing),s=Ke(i.readTime);return nt.newNoDocument(o,s)}(n,e):z()}function CV(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(K(h===void 0||typeof h=="string"),Qe.fromBase64String(h||"")):(K(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Qe.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?x.UNKNOWN:cS(l.code);return new P(h,l.message||"")}(s);t=new Hd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Pn(n,r.document.name),o=Ke(r.document.updateTime),s=r.document.createTime?Ke(r.document.createTime):Q.min(),a=new vt({mapValue:{fields:r.document.fields}}),u=nt.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new hs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Pn(n,r.document),o=r.readTime?Ke(r.readTime):Q.min(),s=nt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new hs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Pn(n,r.document),o=r.removedTargetIds||[];t=new hs([],o,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new xy(i,o),a=r.targetId;t=new $d(a,s)}}return t}function Pu(n,e){let t;if(e instanceof Qr)t={update:W0(n,e.key,e.value)};else if(e instanceof Yr)t={delete:Nu(n,e.key)};else if(e instanceof yn)t={update:W0(n,e.key,e.data),updateMask:RV(e.fieldMask)};else{if(!(e instanceof Su))return z();t={verify:Nu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Wr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ar)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ur)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Kr)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:EV(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z()}(n,e.precondition)),t}function Fy(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?qe.updateTime(Ke(o.updateTime)):o.exists!==void 0?qe.exists(o.exists):qe.none()}(e.currentDocument):qe.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)K(a.setToServerValue==="REQUEST_TIME"),u=new Wr;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];u=new ar(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];u=new ur(h)}else"increment"in a?u=new Kr(s,a.increment):z();let l=We.fromServerFormat(a.fieldPath);return new Bi(l,u)}(n,i)):[];if(e.update){e.update.name;let i=Pn(n,e.update.name),o=new vt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new Gt(l.map(h=>We.fromServerFormat(h)))}(e.updateMask);return new yn(i,o,s,t,r)}return new Qr(i,o,t,r)}if(e.delete){let i=Pn(n,e.delete);return new Yr(i,t)}if(e.verify){let i=Pn(n,e.verify);return new Su(i,t)}return z()}function TV(n,e){return n&&n.length>0?(K(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Ke(i.updateTime):Ke(o);return s.isEqual(Q.min())&&(s=Ke(o)),new Sy(s,i.transformResults||[])}(t,e))):[]}function yS(n,e){return{documents:[fS(n,e.path)]}}function vS(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=fS(n,i);let o=function(l){if(l.length!==0)return IS(Te.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:ss(m.field),direction:SV(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Py(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function _S(n){let e=pS(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){K(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=wS(p);return m instanceof Te&&o_(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(b){return new Vi(as(b.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,$u(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,v=p.values||[];return new Fn(v,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new Fn(v,m)}(t.endAt)),Wb(e,i,s,o,a,"F",u,l)}function bV(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function wS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=as(t.unaryFilter.field);return ce.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=as(t.unaryFilter.field);return ce.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=as(t.unaryFilter.field);return ce.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=as(t.unaryFilter.field);return ce.create(s,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return ce.create(as(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Te.create(t.compositeFilter.filters.map(r=>wS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function SV(n){return _V[n]}function AV(n){return wV[n]}function xV(n){return IV[n]}function ss(n){return{fieldPath:n.canonicalString()}}function as(n){return We.fromServerFormat(n.fieldPath)}function IS(n){return n instanceof ce?function(t){if(t.op==="=="){if(R0(t.value))return{unaryFilter:{field:ss(t.field),op:"IS_NAN"}};if(x0(t.value))return{unaryFilter:{field:ss(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(R0(t.value))return{unaryFilter:{field:ss(t.field),op:"IS_NOT_NAN"}};if(x0(t.value))return{unaryFilter:{field:ss(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ss(t.field),op:AV(t.op),value:t.value}}}(n):n instanceof Te?function(t){let r=t.getFilters().map(i=>IS(i));return r.length===1?r[0]:{compositeFilter:{op:xV(t.op),filters:r}}}(n):z()}function RV(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ES(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ws=class n{constructor(e,t,r,i,o=Q.min(),s=Q.min(),a=Qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var zd=class{constructor(e){this.ct=e}};function MV(n,e){let t;if(e.document)t=mS(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=$i(e.noDocument.readTime);t=nt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return z();{let r=$.fromSegments(e.unknownDocument.path),i=$i(e.unknownDocument.version);t=nt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new je(i[0],i[1]);return Q.fromTimestamp(o)}(e.readTime)),t}function K0(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Gd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Nu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:_s(o,s.version.toTimestamp()),createTime:_s(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ui(e.version)};else{if(!e.isUnknownDocument())return z();r.unknownDocument={path:t.path.toArray(),version:Ui(e.version)}}return r}function Gd(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ui(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $i(n){let e=new je(n.seconds,n.nanoseconds);return Q.fromTimestamp(e)}function Mi(n,e){let t=(e.baseMutations||[]).map(o=>Fy(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Fy(n.ct,o)),i=je.fromMillis(e.localWriteTimeMs);return new Au(e.batchId,i,t,r)}function gu(n){let e=$i(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?$i(n.lastLimboFreeSnapshotVersion):Q.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return K(o.documents.length===1),xt(Ms(pS(o.documents[0])))}(n.query):function(o){return xt(_S(o))}(n.query),new ws(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Qe.fromBase64String(n.resumeToken))}function DS(n,e){let t=Ui(e.snapshotVersion),r=Ui(e.lastLimboFreeSnapshotVersion),i;i=jd(e.target)?yS(n.ct,e.target):vS(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ji(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function l_(n){let e=_S({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ud(e,e.limit,"L"):e}function Ym(n,e){return new xu(e.largestBatchId,Fy(n.ct,e.overlayMutation))}function Q0(n,e){let t=e.path.lastSegment();return[n,At(e.path.popLast()),t]}function Y0(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ui(r.readTime),documentKey:At(r.documentKey.path),largestBatchId:r.largestBatchId}}var Ly=class{getBundleMetadata(e,t){return Z0(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:$i(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return Z0(e).put(function(i){return{bundleId:i.id,createTime:Ui(Ke(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return J0(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:l_(o.bundledQuery),readTime:$i(o.readTime)}}(r)})}saveNamedQuery(e,t){return J0(e).put(function(i){return{name:i.name,readTime:Ui(Ke(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function Z0(n){return ot(n,"bundles")}function J0(n){return ot(n,"namedQueries")}var Wd=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return lu(e).get(Q0(this.userId,t)).next(r=>r?Ym(this.serializer,r):null)}getOverlays(e,t){let r=Mn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new xu(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(At(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(lu(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Mn(),o=At(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return lu(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=Ym(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Mn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return lu(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{let p=Ym(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return lu(e).put(function(i,o,s){let[a,u,l]=Q0(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Pu(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function lu(n){return ot(n,"documentOverlays")}var Vy=class{Pt(e){return ot(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Qe.fromUint8Array(r):Qe.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var ir=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Fe(e.integerValue));else if("doubleValue"in e){let r=Fe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Eu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=sr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(qr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?jb(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Ah(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Fe(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};ir.vt=new ir;function NV(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function X0(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=NV(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var jy=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=X0(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=X0(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},By=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},Uy=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Ni=class{constructor(){this.jt=new jy,this.Ht=new By(this.jt),this.Jt=new Uy(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Pi=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Fr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=eb(n.arrayValue,e.arrayValue),t!==0?t:(t=eb(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function eb(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Kd=class{constructor(e){this.Xt=new Ae((t,r)=>We.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(K(e.collectionGroup===this.collectionId),this.nn)return!1;let t=uy(e);if(t!==void 0&&!this.sn(t))return!1;let r=xi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ae(We.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new ls(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new ls(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new ls(r.field,r.dir==="asc"?0:1)));return new ps(ps.UNKNOWN_ID,this.collectionId,t,Iu.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function CS(n){var e,t;if(K(n instanceof ce||n instanceof Te),n instanceof ce){if(n instanceof Vd){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>ce.create(n.field,"==",o)))||[];return Te.create(i,"or")}return n}let r=n.filters.map(i=>CS(i));return Te.create(r,n.op)}function PV(n){if(n.getFilters().length===0)return[];let e=qy(CS(n));return K(TS(e)),$y(e)||Hy(e)?[e]:e.getFilters()}function $y(n){return n instanceof ce}function Hy(n){return n instanceof Te&&o_(n)}function TS(n){return $y(n)||Hy(n)||function(t){if(t instanceof Te&&my(t)){for(let r of t.getFilters())if(!$y(r)&&!Hy(r))return!1;return!0}return!1}(n)}function qy(n){if(K(n instanceof ce||n instanceof Te),n instanceof ce)return n;if(n.filters.length===1)return qy(n.filters[0]);let e=n.filters.map(r=>qy(r)),t=Te.create(e,n.op);return t=Qd(t),TS(t)?t:(K(t instanceof Te),K(ms(t)),K(t.filters.length>1),t.filters.reduce((r,i)=>d_(r,i)))}function d_(n,e){let t;return K(n instanceof ce||n instanceof Te),K(e instanceof ce||e instanceof Te),t=n instanceof ce?e instanceof ce?function(i,o){return Te.create([i,o],"and")}(n,e):tb(n,e):e instanceof ce?tb(e,n):function(i,o){if(K(i.filters.length>0&&o.filters.length>0),ms(i)&&ms(o))return qb(i,o.getFilters());let s=my(i)?i:o,a=my(i)?o:i,u=s.filters.map(l=>d_(l,a));return Te.create(u,"or")}(n,e),Qd(t)}function tb(n,e){if(ms(e))return qb(e,n.getFilters());{let t=e.filters.map(r=>d_(n,r));return Te.create(t,"or")}}function Qd(n){if(K(n instanceof ce||n instanceof Te),n instanceof ce)return n;let e=n.getFilters();if(e.length===1)return Qd(e[0]);if($b(n))return n;let t=e.map(i=>Qd(i)),r=[];return t.forEach(i=>{i instanceof ce?r.push(i):i instanceof Te&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Te.create(r,n.op)}var zy=class{constructor(){this.un=new ku}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(rn.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(rn.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},ku=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ae(me.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ae(me.comparator)).toArray()}};var Id=new Uint8Array(0),Gy=class{constructor(e,t){this.databaseId=t,this.cn=new ku,this.ln=new Ln(r=>ji(r),(r,i)=>Hu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:At(i)};return nb(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[Sb(t),""],!1,!0);return nb(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Rn(s.parent))}return r})}addFieldIndex(e,t){let r=du(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=ns(e);return o.next(a=>{s.put(Y0(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=du(e),i=ns(e),o=ts(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=du(e),r=ts(e),i=ns(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Kd(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=ts(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ie(),a=[];return S.forEach(o,(u,l)=>{k("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(Y=>`${Y.fieldPath}:${Y.kind}`).join(",")}`}(u)} to execute ${ji(t)}`);let h=function(F,Y){let ee=uy(Y);if(ee===void 0)return null;for(let Z of Bd(F,ee.fieldPath))switch(Z.op){case"array-contains-any":return Z.value.arrayValue.values||[];case"array-contains":return[Z.value]}return null}(l,u),p=function(F,Y){let ee=new Map;for(let Z of xi(Y))for(let I of Bd(F,Z.fieldPath))switch(I.op){case"==":case"in":ee.set(Z.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ee.set(Z.fieldPath.canonicalString(),I.value),Array.from(ee.values())}return null}(l,u),m=function(F,Y){let ee=[],Z=!0;for(let I of xi(Y)){let y=I.kind===0?O0(F,I.fieldPath,F.startAt):F0(F,I.fieldPath,F.startAt);ee.push(y.value),Z&&(Z=y.inclusive)}return new Fn(ee,Z)}(l,u),v=function(F,Y){let ee=[],Z=!0;for(let I of xi(Y)){let y=I.kind===0?F0(F,I.fieldPath,F.endAt):O0(F,I.fieldPath,F.endAt);ee.push(y.value),Z&&(Z=y.inclusive)}return new Fn(ee,Z)}(l,u),b=this.In(u,l,m),M=this.In(u,l,v),N=this.Tn(u,l,p),B=this.En(u.indexId,h,b,m.inclusive,M,v.inclusive,N);return S.forEach(B,q=>r.G(q,t.limit).next(F=>{F.forEach(Y=>{let ee=$.fromSegments(Y.documentKey);s.has(ee)||(s=s.add(ee),a.push(ee))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=PV(Te.create(e.filters,"and")).map(r=>Ty(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),h=[];for(let p=0;p<u;++p){let m=t?this.dn(t[p/l]):Id,v=this.An(e,m,r[p%l],i),b=this.Rn(e,m,o[p%l],s),M=a.map(N=>this.An(e,m,N,!0));h.push(...this.createRange(v,b,M))}return h}An(e,t,r,i){let o=new Pi(e,$.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new Pi(e,$.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new Kd(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Ae(We.comparator),h=!1;for(let p of u.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Ni;for(let i of xi(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);ir.vt.It(o,s)}return r.zt()}dn(e){let t=new Ni;return ir.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Ni;return ir.vt.It(Li(this.databaseId,t),r.Yt(function(o){let s=xi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Ni);let o=0;for(let s of xi(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&bu(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);ir.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new Ni;u.seed(a.zt()),ir.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof ce&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=du(e),i=ns(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,p){let m=p?new Iu(p.sequenceNumber,new rn($i(p.readTime),new $(Rn(p.documentKey)),p.largestBatchId)):Iu.empty(),v=h.fields.map(([b,M])=>new ls(We.fromServerFormat(b),M));return new ps(h.indexId,h.collectionGroup,v,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:re(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=du(e),o=ns(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,u=>o.put(Y0(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,u=>this.wn(e,i,u).next(l=>{let h=this.Sn(o,u);return l.isEqual(h)?S.resolve():this.bn(e,o,u,l,h)}))))})}Dn(e,t,r,i){return ts(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return ts(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=ts(e),o=new Ae(Fr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new Pi(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Ae(Fr),i=this.Vn(t,e);if(i==null)return r;let o=uy(t);if(o!=null){let s=e.data.field(o.fieldPath);if(bu(s))for(let a of s.arrayValue.values||[])r=r.add(new Pi(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Pi(t.indexId,e.key,Id,i));return r}bn(e,t,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,h,p,m){let v=u.getIterator(),b=l.getIterator(),M=es(v),N=es(b);for(;M||N;){let B=!1,q=!1;if(M&&N){let F=h(M,N);F<0?q=!0:F>0&&(B=!0)}else M!=null?q=!0:B=!0;B?(p(N),N=es(b)):q?(m(M),M=es(v)):(M=es(v),N=es(b))}}(i,o,Fr,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return ns(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Fr(s,a)).filter((s,a,u)=>!a||Fr(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Fr(s,e),u=Fr(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Id,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Id,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return Fr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(rb)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||z())).next(rb)}};function nb(n){return ot(n,"collectionParents")}function ts(n){return ot(n,"indexEntries")}function du(n){return ot(n,"indexConfiguration")}function ns(n){return ot(n,"indexState")}function rb(n){K(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;t_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new rn(e.readTime,e.documentKey,t)}var ib={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function bS(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(u.next(()=>{K(a===1)}));let l=[];for(let h of t.mutations){let p=Pb(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function Yd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw z();e=n.noDocument}return JSON.stringify(e).length}nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(41943040,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);var Zd=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){K(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Lr(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=us(e),s=Lr(e);return s.add({}).next(a=>{K(typeof a=="number");let u=new Au(a,t,r,i),l=function(v,b,M){let N=M.baseMutations.map(q=>Pu(v.ct,q)),B=M.mutations.map(q=>Pu(v.ct,q));return{userId:b,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:N,mutations:B}}(this.serializer,this.userId,u),h=[],p=new Ae((m,v)=>re(m.canonicalString(),v.canonicalString()));for(let m of i){let v=Pb(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(v,jL))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),S.waitFor(h).next(()=>u)})}lookupMutationBatch(e,t){return Lr(e).get(t).next(r=>r?(K(r.userId===this.userId),Mi(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Lr(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(K(a.batchId>=r),o=Mi(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Lr(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Lr(e).U("userMutationsIndex",t).next(r=>r.map(i=>Mi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Td(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return us(e).J({range:i},(s,a,u)=>{let[l,h,p]=s,m=Rn(h);if(l===this.userId&&t.path.isEqual(m))return Lr(e).get(p).next(v=>{if(!v)throw z();K(v.userId===this.userId),o.push(Mi(this.serializer,v))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ae(re),i=[];return t.forEach(o=>{let s=Td(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=us(e).J({range:a},(l,h,p)=>{let[m,v,b]=l,M=Rn(v);m===this.userId&&o.path.isEqual(M)?r=r.add(b):p.done()});i.push(u)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Td(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ae(re);return us(e).J({range:s},(u,l,h)=>{let[p,m,v]=u,b=Rn(m);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(v)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Lr(e).get(o).next(s=>{if(s===null)throw z();K(s.userId===this.userId),r.push(Mi(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return bS(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return us(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Rn(o[1]);i.push(u)}else a.done()}).next(()=>{K(i.length===0)})})}containsKey(e,t){return SS(e,this.userId,t)}Nn(e){return AS(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function SS(n,e,t){let r=Td(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return us(n).J({range:o,H:!0},(a,u,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function Lr(n){return ot(n,"mutations")}function us(n){return ot(n,"documentMutations")}function AS(n){return ot(n,"mutationQueues")}var Is=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Wy=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Is(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Q.fromTimestamp(new je(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>rs(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(K(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return rs(e).J((s,a)=>{let u=gu(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return rs(e).J((r,i)=>{let o=gu(i);t(o)})}qn(e){return ob(e).get("targetGlobalKey").next(t=>(K(t!==null),t))}Qn(e,t){return ob(e).put("targetGlobalKey",t)}Kn(e,t){return rs(e).put(DS(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=ji(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return rs(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=gu(a);Hu(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Vr(e);return t.forEach(s=>{let a=At(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=Vr(e);return S.forEach(t,o=>{let s=At(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Vr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Vr(e),o=ie();return i.J({range:r,H:!0},(s,a,u)=>{let l=Rn(s[1]),h=new $(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=At(t.path),i=IDBKeyRange.bound([r],[Sb(r)],!1,!0),o=0;return Vr(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return rs(e).get(t).next(r=>r?gu(r):null)}};function rs(n){return ot(n,"targets")}function ob(n){return ot(n,"targetGlobal")}function Vr(n){return ot(n,"targetDocuments")}function sb([n,e],[t,r]){let i=re(n,t);return i===0?re(e,r):i}var Ky=class{constructor(e){this.Un=e,this.buffer=new Ae(sb),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();sb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Qy=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>R(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Xr(t)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Jr(t)}yield this.Hn(3e5)}))}},Yy=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(zt.oe);let r=new Ky(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(ib)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ib):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),is()<=wn.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function kV(n,e){return new Yy(n,e)}var Zy=class{constructor(e,t){this.db=e,this.garbageCollector=kV(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Ed(e,r)}removeReference(e,t,r){return Ed(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ed(e,t)}nr(e,t){return function(i,o){let s=!1;return AS(i).Y(a=>SS(i,a,o).next(u=>(u&&(s=!0),S.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Q.min()),Vr(e).delete(function(p){return[0,At(p.path)]}(s))))});i.push(u)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ed(e,t)}tr(e,t){let r=Vr(e),i,o=zt.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==zt.oe&&t(new $(Rn(i)),o),o=l,i=u):o=zt.oe}).next(()=>{o!==zt.oe&&t(new $(Rn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Ed(n,e){return Vr(n).put(function(r,i){return{targetId:0,path:At(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Jd=class{constructor(){this.changes=new Ln(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Jy=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ai(e).put(r)}removeEntry(e,t,r){return Ai(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Gd(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=nt.newInvalidDocument(t);return Ai(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(hu(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:nt.newInvalidDocument(t)};return Ai(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(hu(t))},(i,o)=>{r={document:this.ir(t,o),size:Yd(o)}}).next(()=>r)}getEntries(e,t){let r=Ft();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Ft(),i=new ke($.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,Yd(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new Ae(cb);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(hu(i.first()),hu(i.last())),s=i.getIterator(),a=s.getNext();return Ai(e).J({index:"documentKeyIndex",range:o},(u,l,h)=>{let p=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&cb(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(hu(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Gd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ai(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Ft();for(let p of l){let m=this.ir($.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(zu(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Ft(),s=ub(t,r),a=ub(t,rn.max());return Ai(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{let p=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new Xy(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return ab(e).get("remoteDocumentGlobalKey").next(t=>(K(!!t),t))}rr(e,t){return ab(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=MV(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Q.min())))return r}return nt.newInvalidDocument(e)}};function xS(n){return new Jy(n)}var Xy=class extends Jd{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Ln(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ae((o,s)=>re(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=K0(this.cr.serializer,s);i=i.add(o.path.popLast());let l=Yd(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=K0(this.cr.serializer,s.convertToNoDocument(Q.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function ab(n){return ot(n,"remoteDocumentGlobal")}function Ai(n){return ot(n,"remoteDocumentsV14")}function hu(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ub(n,e){let t=e.documentKey.path.toArray();return[n,Gd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function cb(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=re(t[o],r[o]),i)return i;return i=re(t.length,r.length),i||(i=re(t[t.length-2],r[r.length-2]),i||re(t[t.length-1],r[r.length-1]))}var ev=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Xd=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&vu(r.mutation,i,Gt.empty(),je.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ie()){let i=Mn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=pu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Mn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ie()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Ft(),s=yu(),a=function(){return yu()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof yn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),vu(h.mutation,l,h.mutation.getFieldMask(),je.now())):s.set(l.key,Gt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new ev(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=yu(),i=new ke((s,a)=>s-a),o=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Gt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ie()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=Xb();h.forEach(m=>{if(!o.has(m)){let v=sS(t.get(m),r.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):s_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(Mn()),a=-1,u=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ie())).next(h=>({batchId:a,changes:Jb(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=pu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=pu();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,u=>{let l=function(p,m){return new mn(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,nt.newInvalidDocument(h)))});let a=pu();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&vu(h.mutation,l,Gt.empty(),je.now()),zu(t,l)&&(a=a.insert(u,l))}),a})}};var tv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ke(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:l_(i.bundledQuery),readTime:Ke(i.readTime)}}(t)),S.resolve()}};var nv=class{constructor(){this.overlays=new ke($.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Mn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=Mn(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new ke((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Mn(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Mn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new xu(t,r));let o=this.Ir.get(t);o===void 0&&(o=ie(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var rv=class{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var Ou=class{constructor(){this.Tr=new Ae(et.Er),this.dr=new Ae(et.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new et(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new et(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new me([])),r=new et(t,e),i=new et(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new me([])),r=new et(t,e),i=new et(t,e+1),o=ie();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new et(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},et=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||re(e.wr,t.wr)}static Ar(e,t){return re(e.wr,t.wr)||$.comparator(e.key,t.key)}};var iv=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ae(et.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Au(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new et(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new et(t,0),i=new et(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ae(re);return t.forEach(i=>{let o=new et(i,0),s=new et(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new et(new $(o),0),a=new Ae(re);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){K(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new et(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new et(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var ov=class{constructor(e){this.Mr=e,this.docs=function(){return new ke($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():nt.newInvalidDocument(t))}getEntries(e,t){let r=Ft();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():nt.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ft(),s=t.path,a=new $(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||t_(xb(h),r)<=0||(i.has(h.key)||zu(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){z()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new sv(this)}getSize(e){return S.resolve(this.size)}},sv=class extends Jd{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var av=class{constructor(e){this.persistence=e,this.Nr=new Ln(t=>ji(t),Hu),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ou,this.targetCount=0,this.kr=Is.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Is(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var eh=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new zt(0),this.Kr=!1,this.Kr=!0,this.$r=new rv,this.referenceDelegate=e(this),this.Ur=new av(this),this.indexManager=new zy,this.remoteDocumentCache=function(i){return new ov(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new zd(t),this.Gr=new tv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new iv(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new uv(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},uv=class extends Pd{constructor(e){super(),this.currentSequenceNumber=e}},th=class n{constructor(e){this.persistence=e,this.Jr=new Ou,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,Q.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var cv=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new kd("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T0,{unique:!0}),u.createObjectStore("documentMutations")}(e),lb(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),lb(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Q.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T0,{unique:!0});let p=l.store("mutations"),m=h.map(v=>p.put(v));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:ZL});l.createIndex("collectionPathOverlayIndex",JL,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",XL,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:BL});l.createIndex("documentKeyIndex",UL),l.createIndex("collectionGroupIndex",$L)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:WL}).createIndex("sequenceNumberIndex",KL,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:QL}).createIndex("documentKeyIndex",YL,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Yd(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,u=>{K(u.userId===o.userId);let l=Mi(this.serializer,u);return bS(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new me(s),l=function(p){return[0,At(p)]}(u);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:At(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:GL});let r=t.store("collectionParents"),i=new ku,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:At(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new me(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let h=Rn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=gu(i),s=DS(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(p){return p.document?new $(me.fromString(p.document.name).popFirst(5)):p.noDocument?$.fromSegments(p.noDocument.path):p.unknownDocument?$.fromSegments(p.unknownDocument.path):z()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=xS(this.serializer),o=new eh(th.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let h=(l=a.get(u.userId))!==null&&l!==void 0?l:ie();Mi(this.serializer,u).keys().forEach(p=>h=h.add(p)),a.set(u.userId,h)}),S.forEach(a,(u,l)=>{let h=new tt(l),p=Wd.lt(this.serializer,h),m=o.getIndexManager(h),v=Zd.lt(h,this.serializer,m,o.referenceDelegate);return new Xd(i,v,p,m).recalculateAndSaveOverlaysForDocumentKeys(new Du(t,zt.oe),u).next()})})}};function lb(n){n.createObjectStore("targetDocuments",{keyPath:qL}).createIndex("documentTargetsIndex",zL,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",HL,{unique:!0}),n.createObjectStore("targetGlobal")}var Zm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",lv=class n{constructor(e,t,r,i,o,s,a,u,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new P(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Zy(this,i),this.Ai=t+"main",this.serializer=new zd(u),this.Ri=new Hr(this.Ai,this.hi,new cv(this.serializer)),this.$r=new Vy,this.Ur=new Wy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=xS(this.serializer),this.Gr=new Ly,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Ge("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Zm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new zt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>R(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>R(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>R(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Dd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Xr(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return fu(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return Dd(e).delete(this.clientId)}Fi(){return R(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=ot(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):fu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Zm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Dd(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return R(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Du(e,zt.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Dd(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Zd.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Gy(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Wd.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?nV:u===16?tV:u===15?r_:u===14?Fb:u===13?Ob:u===12?eV:u===11?kb:void z()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new Du(a,this.Qr?this.Qr.next():zt.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw Ge(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(x.FAILED_PRECONDITION,Rb);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return fu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(x.FAILED_PRECONDITION,Zm)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return fu(e).put("owner",t)}static D(){return Hr.D()}bi(e){let t=fu(e);return t.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Ge(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;yf()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ge("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ge("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function fu(n){return ot(n,"owner")}function Dd(n){return ot(n,"clientMetadata")}function h_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var dv=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ie(),i=ie();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var hv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var nh=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return yf()?8:Mb(oa())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new hv;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(is()<=wn.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",os(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(is()<=wn.DEBUG&&k("QueryEngine","Query:",os(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(is()<=wn.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",os(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xt(t))):S.resolve())}Yi(e,t){if(L0(t))return S.resolve(null);let r=xt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Ud(t,null,"F"),r=xt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ie(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,Ud(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return L0(t)||i.isEqual(Q.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(is()<=wn.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),os(t)),this.rs(e,s,t,Ab(i,-1)).next(a=>a))})}ts(e,t){let r=new Ae(Yb(e));return t.forEach((i,o)=>{zu(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return is()<=wn.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",os(t)),this.Ji.getDocumentsMatchingQuery(e,t,rn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var fv=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new ke(re),this._s=new Ln(o=>ji(o),Hu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xd(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function RS(n,e,t,r){return new fv(n,e,t,r)}function MS(n,e){return R(this,null,function*(){let t=U(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ie();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function OV(n,e){let t=U(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),v=S.resolve();return m.forEach(b=>{v=v.next(()=>h.getEntry(u,b)).next(M=>{let N=l.docVersions.get(b);K(N!==null),M.version.compareTo(N)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ie();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function NS(n){let e=U(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function FV(n,e){let t=U(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Qe.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(M,N,B){return M.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(m,v,h)&&a.push(t.Ur.updateTargetData(o,v))});let u=Ft(),l=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(PS(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(Q.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function PS(n,e,t){let r=ie(),i=ie();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Ft();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Q.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function LV(n,e){let t=U(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Es(n,e){let t=U(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new ws(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Ds(n,e,t){return R(this,null,function*(){let r=U(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Xr(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function rh(n,e,t){let r=U(n),i=Q.min(),o=ie();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=U(u),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,xt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:Q.min(),t?o:ie())).next(a=>(FS(r,Qb(e),a),{documents:a,Ts:o})))}function kS(n,e){let t=U(n),r=U(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function OS(n,e){let t=U(n),r=t.us.get(e)||Q.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,Ab(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(FS(t,e,i),i))}function FS(n,e,t){let r=n.us.get(e)||Q.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function VV(n,e,t,r){return R(this,null,function*(){let i=U(n),o=ie(),s=Ft();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield Es(i,function(h){return xt(Ms(me.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>PS(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function jV(r,i){return R(this,arguments,function*(n,e,t=ie()){let o=yield Es(n,xt(l_(e.bundledQuery))),s=U(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Ke(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Qe.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function db(n,e){return`firestore_clients_${n}_${e}`}function hb(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Jm(n,e){return`firestore_targets_${n}_${e}`}var ih=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Ge("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},_u=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(Ge("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},oh=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=a_();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=Nb(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Ge("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},pv=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Ge("SharedClientState",`Failed to parse online state: ${e}`),null)}},Fu=class{constructor(){this.activeTargetIds=a_()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},wu=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new ke(re),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=db(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Fu),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return R(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(db(this.persistenceKey,r));if(i){let o=oh.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Jm(this.persistenceKey,e));if(i){let o=_u.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Jm(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k("SharedClientState","READ",e,t),t}setItem(e,t){k("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(k("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Ge("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>R(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=zt.oe;if(o!=null)try{let a=JSON.parse(o);K(typeof a=="number"),s=a}catch(a){Ge("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==zt.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new ih(this.currentUser,e,t,r),o=hb(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=hb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Jm(this.persistenceKey,e),o=new _u(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return oh.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return ih.Rs(new tt(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return _u.Rs(i,t)}Ls(e){return pv.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return R(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=a_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},sh=class{constructor(){this.so=new Fu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Fu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var gv=class{_o(e){}shutdown(){}};var ah=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Cd=null;function Xm(){return Cd===null?Cd=function(){return 268435456+Math.round(2147483648*Math.random())}():Cd++,"0x"+Cd.toString(16)}var BV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var mv=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var yt="WebChannelConnection",yv=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Xm(),u=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(h=>(k("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw gn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Rs}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=BV[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Xm();return new Promise((s,a)=>{let u=new zm;u.setWithCredentials(!0),u.listenOnce(Gm.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case cu.NO_ERROR:let h=u.getResponseJson();k(yt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case cu.TIMEOUT:k(yt,`RPC '${e}' ${o} timed out`),a(new P(x.DEADLINE_EXCEEDED,"Request time out"));break;case cu.HTTP_ERROR:let p=u.getStatus();if(k(yt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let b=function(N){let B=N.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(B)>=0?B:x.UNKNOWN}(v.status);a(new P(b,v.message))}else a(new P(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new P(x.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{k(yt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(yt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Xm(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Qm(),a=Km(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");k(yt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),m=!1,v=!1,b=new mv({Io:N=>{v?k(yt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(k(yt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),k(yt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),M=(N,B,q)=>{N.listen(B,F=>{try{q(F)}catch(Y){setTimeout(()=>{throw Y},0)}})};return M(p,Xo.EventType.OPEN,()=>{v||(k(yt,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),M(p,Xo.EventType.CLOSE,()=>{v||(v=!0,k(yt,`RPC '${e}' stream ${i} transport closed`),b.So())}),M(p,Xo.EventType.ERROR,N=>{v||(v=!0,gn(yt,`RPC '${e}' stream ${i} transport errored:`,N),b.So(new P(x.UNAVAILABLE,"The operation could not be completed")))}),M(p,Xo.EventType.MESSAGE,N=>{var B;if(!v){let q=N.data[0];K(!!q);let F=q,Y=F.error||((B=F[0])===null||B===void 0?void 0:B.error);if(Y){k(yt,`RPC '${e}' stream ${i} received error:`,Y);let ee=Y.status,Z=function(w){let E=Xe[w];if(E!==void 0)return cS(E)}(ee),I=Y.message;Z===void 0&&(Z=x.INTERNAL,I="Unknown error status: "+ee+" with message "+Y.message),v=!0,b.So(new P(Z,I)),p.close()}else k(yt,`RPC '${e}' stream ${i} received:`,q),b.bo(q)}}),M(a,Wm.STAT_EVENT,N=>{N.stat===wd.PROXY?k(yt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===wd.NOPROXY&&k(yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function LS(){return typeof window<"u"?window:null}function xd(){return typeof document<"u"?document:null}function Gu(n){return new Ny(n,!0)}var Lu=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var uh=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Lu(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return R(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return R(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return R(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(Ge(t.toString()),Ge("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>R(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},vv=class extends uh{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=CV(this.serializer,e),r=function(o){if(!("targetChange"in o))return Q.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Q.min():s.readTime?Ke(s.readTime):Q.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Oy(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=jd(u)?{documents:yS(o,u)}:{query:vS(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=dS(o,s.resumeToken);let l=Py(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Q.min())>0){a.readTime=_s(o,s.snapshotVersion.toTimestamp());let l=Py(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=bV(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Oy(this.serializer),t.removeTarget=e,this.a_(t)}},_v=class extends uh{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return K(!!e.streamToken),this.lastStreamToken=e.streamToken,K(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){K(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=TV(e.writeResults,e.commitTime),r=Ke(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Oy(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Pu(this.serializer,r))};this.a_(t)}};var wv=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,ky(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(x.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,ky(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(x.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Iv=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ge(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Ev=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>R(this,null,function*(){ei(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(u){return R(this,null,function*(){let l=U(u);l.L_.add(4),yield Ns(l),l.q_.set("Unknown"),l.L_.delete(4),yield Wu(l)})}(this))}))}),this.q_=new Iv(r,i)}};function Wu(n){return R(this,null,function*(){if(ei(n))for(let e of n.B_)yield e(!0)})}function Ns(n){return R(this,null,function*(){for(let e of n.B_)yield e(!1)})}function xh(n,e){let t=U(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),g_(t)?p_(t):ks(t).r_()&&f_(t,e))}function Cs(n,e){let t=U(n),r=ks(t);t.N_.delete(e),r.r_()&&VS(t,e),t.N_.size===0&&(r.r_()?r.o_():ei(t)&&t.q_.set("Unknown"))}function f_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ks(n).A_(e)}function VS(n,e){n.Q_.xe(e),ks(n).R_(e)}function p_(n){n.Q_=new My({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ks(n).start(),n.q_.v_()}function g_(n){return ei(n)&&!ks(n).n_()&&n.N_.size>0}function ei(n){return U(n).L_.size===0}function jS(n){n.Q_=void 0}function UV(n){return R(this,null,function*(){n.q_.set("Online")})}function $V(n){return R(this,null,function*(){n.N_.forEach((e,t)=>{f_(n,e)})})}function HV(n,e){return R(this,null,function*(){jS(n),g_(n)?(n.q_.M_(e),p_(n)):n.q_.set("Unknown")})}function qV(n,e,t){return R(this,null,function*(){if(n.q_.set("Online"),e instanceof Hd&&e.state===2&&e.cause)try{yield function(i,o){return R(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ch(n,r)}else if(e instanceof hs?n.Q_.Ke(e):e instanceof $d?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Q.min()))try{let r=yield NS(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(Qe.EMPTY_BYTE_STRING,h.snapshotVersion)),VS(o,u);let p=new ws(h.target,u,l,h.sequenceNumber);f_(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield ch(n,r)}})}function ch(n,e,t){return R(this,null,function*(){if(!Xr(e))throw e;n.L_.add(1),yield Ns(n),n.q_.set("Offline"),t||(t=()=>NS(n.localStore)),n.asyncQueue.enqueueRetryable(()=>R(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Wu(n)}))})}function BS(n,e){return e().catch(t=>ch(n,t,e))}function Ps(n){return R(this,null,function*(){let e=U(n),t=Zr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;zV(e);)try{let i=yield LV(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,GV(e,i)}catch(i){yield ch(e,i)}US(e)&&$S(e)})}function zV(n){return ei(n)&&n.O_.length<10}function GV(n,e){n.O_.push(e);let t=Zr(n);t.r_()&&t.V_&&t.m_(e.mutations)}function US(n){return ei(n)&&!Zr(n).n_()&&n.O_.length>0}function $S(n){Zr(n).start()}function WV(n){return R(this,null,function*(){Zr(n).p_()})}function KV(n){return R(this,null,function*(){let e=Zr(n);for(let t of n.O_)e.m_(t.mutations)})}function QV(n,e,t){return R(this,null,function*(){let r=n.O_.shift(),i=Ay.from(r,e,t);yield BS(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ps(n)})}function YV(n,e){return R(this,null,function*(){e&&Zr(n).V_&&(yield function(r,i){return R(this,null,function*(){if(function(s){return uS(s)&&s!==x.ABORTED}(i.code)){let o=r.O_.shift();Zr(r).s_(),yield BS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ps(r)}})}(n,e)),US(n)&&$S(n)})}function fb(n,e){return R(this,null,function*(){let t=U(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=ei(t);t.L_.add(3),yield Ns(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Wu(t)})}function Dv(n,e){return R(this,null,function*(){let t=U(n);e?(t.L_.delete(2),yield Wu(t)):e||(t.L_.add(2),yield Ns(t),t.q_.set("Unknown"))})}function ks(n){return n.K_||(n.K_=function(t,r,i){let o=U(t);return o.w_(),new vv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:UV.bind(null,n),Ro:$V.bind(null,n),mo:HV.bind(null,n),d_:qV.bind(null,n)}),n.B_.push(e=>R(this,null,function*(){e?(n.K_.s_(),g_(n)?p_(n):n.q_.set("Unknown")):(yield n.K_.stop(),jS(n))}))),n.K_}function Zr(n){return n.U_||(n.U_=function(t,r,i){let o=U(t);return o.w_(),new _v(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:WV.bind(null,n),mo:YV.bind(null,n),f_:KV.bind(null,n),g_:QV.bind(null,n)}),n.B_.push(e=>R(this,null,function*(){e?(n.U_.s_(),yield Ps(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Cv=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new it,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Os(n,e){if(Ge("AsyncQueue",`${e}: ${n}`),Xr(n))return new P(x.UNAVAILABLE,`${e}: ${n}`);throw n}var lh=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=pu(),this.sortedSet=new ke(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var dh=class{constructor(){this.W_=new ke($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ts=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,lh.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Tv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},bv=class{constructor(){this.queries=pb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=U(t),o=i.queries;i.queries=pb(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new P(x.ABORTED,"Firestore shutting down"))}};function pb(){return new Ln(n=>Kb(n),qu)}function m_(n,e){return R(this,null,function*(){let t=U(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Tv,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Os(s,`Initialization of query '${os(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&v_(t)})}function y_(n,e){return R(this,null,function*(){let t=U(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function ZV(n,e){let t=U(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&v_(t)}function JV(n,e,t){let r=U(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function v_(n){n.Y_.forEach(e=>{e.next()})}var Sv,gb;(gb=Sv||(Sv={})).ea="default",gb.Cache="cache";var Vu=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ts(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ts.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Sv.Cache}};var Av=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var hh=class{constructor(e){this.serializer=e}Es(e){return Pn(this.serializer,e)}ds(e){return e.metadata.exists?mS(this.serializer,e.document,!1):nt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ke(e)}},xv=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=HS(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=me.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new hh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ie()).add(o);t.set(s,a)}}return t}complete(){return R(this,null,function*(){let e=yield VV(this.localStore,new hh(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield jV(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function HS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var fh=class{constructor(e){this.key=e}},ph=class{constructor(e){this.key=e}},gh=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=Yb(e),this.Ra=new lh(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new dh,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=zu(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),M=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),N=!1;m&&v?m.data.isEqual(v.data)?b!==M&&(r.track({type:3,doc:v}),N=!0):this.ga(m,v)||(r.track({type:2,doc:v}),N=!0,(u&&this.Aa(v,u)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),N=!0):m&&!v&&(r.track({type:1,doc:m}),N=!0,(u||l)&&(a=!0)),N&&(v?(s=s.add(v),o=M?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(v,b){let M=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return M(v)-M(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new Ts(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new dh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new ph(r))}),this.da.forEach(r=>{e.has(r)||t.push(new fh(r))}),t}ba(e){this.Ta=e.Ts,this.da=ie();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ts.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Rv=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Mv=class{constructor(e){this.key=e,this.va=!1}},Nv=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Ln(a=>Kb(a),qu),this.Ma=new Map,this.xa=new Set,this.Oa=new ke($.comparator),this.Na=new Map,this.La=new Ou,this.Ba={},this.ka=new Map,this.qa=Is.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function XV(n,e,t=!0){return R(this,null,function*(){let r=Rh(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield qS(r,e,t,!0),i})}function e2(n,e){return R(this,null,function*(){let t=Rh(n);yield qS(t,e,!0,!1)})}function qS(n,e,t,r){return R(this,null,function*(){let i=yield Es(n.localStore,xt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield __(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&xh(n.remoteStore,i),a})}function __(n,e,t,r,i){return R(this,null,function*(){n.Ka=(p,m,v)=>function(M,N,B,q){return R(this,null,function*(){let F=N.view.ma(B);F.ns&&(F=yield rh(M.localStore,N.query,!1).then(({documents:I})=>N.view.ma(I,F)));let Y=q&&q.targetChanges.get(N.targetId),ee=q&&q.targetMismatches.get(N.targetId)!=null,Z=N.view.applyChanges(F,M.isPrimaryClient,Y,ee);return Pv(M,N.targetId,Z.wa),Z.snapshot})}(n,p,m,v);let o=yield rh(n.localStore,e,!0),s=new gh(e,o.Ts),a=s.ma(o.documents),u=Mu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);Pv(n,t,l.wa);let h=new Rv(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function t2(n,e,t){return R(this,null,function*(){let r=U(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!qu(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ds(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Cs(r.remoteStore,i.targetId),bs(r,i.targetId)}).catch(Jr))):(bs(r,i.targetId),yield Ds(r.localStore,i.targetId,!0))})}function n2(n,e){return R(this,null,function*(){let t=U(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Cs(t.remoteStore,r.targetId))})}function r2(n,e,t){return R(this,null,function*(){let r=D_(n);try{let i=yield function(s,a){let u=U(s),l=je.now(),h=a.reduce((v,b)=>v.add(b.key),ie()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let b=Ft(),M=ie();return u.cs.getEntries(v,h).next(N=>{b=N,b.forEach((B,q)=>{q.isValidDocument()||(M=M.add(B))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,b)).next(N=>{p=N;let B=[];for(let q of a){let F=yV(q,p.get(q.key).overlayedDocument);F!=null&&B.push(new yn(q.key,F,Ub(F.value.mapValue),qe.exists(!0)))}return u.mutationQueue.addMutationBatch(v,l,B,a)}).next(N=>{m=N;let B=N.applyToLocalDocumentSet(p,M);return u.documentOverlayCache.saveOverlays(v,N.batchId,B)})}).then(()=>({batchId:m.batchId,changes:Jb(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new ke(re)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield dr(r,i.changes),yield Ps(r.remoteStore)}catch(i){let o=Os(i,"Failed to persist write");t.reject(o)}})}function zS(n,e){return R(this,null,function*(){let t=U(n);try{let r=yield FV(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(K(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?K(s.va):i.removedDocuments.size>0&&(K(s.va),s.va=!1))}),yield dr(t,r,e)}catch(r){yield Jr(r)}})}function mb(n,e,t){let r=U(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=U(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&v_(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function i2(n,e,t){return R(this,null,function*(){let r=U(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new ke($.comparator);s=s.insert(o,nt.newNoDocument(o,Q.min()));let a=ie().add(o),u=new Ru(Q.min(),new Map,new ke(re),s,a);yield zS(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),E_(r)}else yield Ds(r.localStore,e,!1).then(()=>bs(r,e,t)).catch(Jr)})}function o2(n,e){return R(this,null,function*(){let t=U(n),r=e.batch.batchId;try{let i=yield OV(t.localStore,e);I_(t,r,null),w_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield dr(t,i)}catch(i){yield Jr(i)}})}function s2(n,e,t){return R(this,null,function*(){let r=U(n);try{let i=yield function(s,a){let u=U(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(K(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);I_(r,e,t),w_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield dr(r,i)}catch(i){yield Jr(i)}})}function a2(n,e){return R(this,null,function*(){let t=U(n);ei(t.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=U(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Os(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function w_(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function I_(n,e,t){let r=U(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function bs(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||GS(n,r)})}function GS(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Cs(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),E_(n))}function Pv(n,e,t){for(let r of t)r instanceof fh?(n.La.addReference(r.key,e),u2(n,r)):r instanceof ph?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||GS(n,r.key)):z()}function u2(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),E_(n))}function E_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(me.fromString(e)),r=n.qa.next();n.Na.set(r,new Mv(t)),n.Oa=n.Oa.insert(t,r),xh(n.remoteStore,new ws(xt(Ms(t.path)),r,"TargetPurposeLimboResolution",zt.oe))}}function dr(n,e,t){return R(this,null,function*(){let r=U(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=dv.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return R(this,null,function*(){let h=U(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>S.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!Xr(p))throw p;k("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),b=v.snapshotVersion,M=v.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(m,M)}}})}(r.localStore,o))})}function c2(n,e){return R(this,null,function*(){let t=U(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield MS(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new P(x.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield dr(t,r.hs)}})}function l2(n,e){let t=U(n),r=t.Na.get(e);if(r&&r.va)return ie().add(r.key);{let i=ie(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function d2(n,e){return R(this,null,function*(){let t=U(n),r=yield rh(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Pv(t,e.targetId,i.wa),i})}function h2(n,e){return R(this,null,function*(){let t=U(n);return OS(t.localStore,e).then(r=>dr(t,r))})}function f2(n,e,t,r){return R(this,null,function*(){let i=U(n),o=yield function(a,u){let l=U(a),h=U(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,u).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Ps(i.remoteStore):t==="acknowledged"||t==="rejected"?(I_(i,e,r||null),w_(i,e),function(a,u){U(U(a).mutationQueue).On(u)}(i.localStore,e)):z(),yield dr(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function p2(n,e){return R(this,null,function*(){let t=U(n);if(Rh(t),D_(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield yb(t,r.toArray());t.Qa=!0,yield Dv(t.remoteStore,!0);for(let o of i)xh(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(bs(t,s),Ds(t.localStore,s,!0))),Cs(t.remoteStore,s)}),yield i,yield yb(t,r),function(s){let a=U(s);a.Na.forEach((u,l)=>{Cs(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new ke($.comparator)}(t),t.Qa=!1,yield Dv(t.remoteStore,!1)}})}function yb(n,e,t){return R(this,null,function*(){let r=U(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield Es(r.localStore,xt(u[0]));for(let l of u){let h=r.Fa.get(l),p=yield d2(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield kS(r.localStore,s);a=yield Es(r.localStore,l),yield __(r,WS(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function WS(n){return Wb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function g2(n){return function(t){return U(U(t).persistence).Qi()}(U(n).localStore)}function m2(n,e,t,r){return R(this,null,function*(){let i=U(n);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield OS(i.localStore,Qb(o[0])),a=Ru.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Qe.EMPTY_BYTE_STRING);yield dr(i,s,a);break}case"rejected":yield Ds(i.localStore,e,!0),bs(i,e,r);break;default:z()}})}function y2(n,e,t){return R(this,null,function*(){let r=Rh(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield kS(r.localStore,i),s=yield Es(r.localStore,o);yield __(r,WS(o),s.targetId,!1,s.resumeToken),xh(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield Ds(r.localStore,i,!1).then(()=>{Cs(r.remoteStore,i),bs(r,i)}).catch(Jr))}})}function Rh(n){let e=U(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=zS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=l2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=i2.bind(null,e),e.Ca.d_=ZV.bind(null,e.eventManager),e.Ca.$a=JV.bind(null,e.eventManager),e}function D_(n){let e=U(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=o2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=s2.bind(null,e),e}function v2(n,e,t){let r=U(n);(function(o,s,a){return R(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(v,b){let M=U(v),N=Ke(b.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",B=>M.Gr.getBundleMetadata(B,b.id)).then(B=>!!B&&B.createTime.compareTo(N)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(HS(u));let l=new xv(u,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield dr(o,p.Ia,void 0),yield function(v,b){let M=U(v);return M.persistence.runTransaction("Save bundle","readwrite",N=>M.Gr.saveBundleMetadata(N,b))}(o.localStore,u),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(u){return gn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var kv=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return R(this,null,function*(){this.serializer=Gu(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return RS(this.persistence,new nh,t.initialUser,this.serializer)}Ga(t){return new eh(th.Zr,this.serializer)}Wa(t){return new sh}terminate(){return R(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var mh=class n extends kv{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return R(this,null,function*(){yield gf(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield D_(this.Ja.syncEngine),yield Ps(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return RS(this.persistence,new nh,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Qy(r,e.asyncQueue,t)}Ha(e,t){let r=new hy(t,this.persistence);return new dy(e.asyncQueue,r)}Ga(e){let t=h_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new lv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,LS(),xd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new sh}},Ov=class n extends mh{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return R(this,null,function*(){yield gf(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof wu&&(this.sharedClientState.syncEngine={no:f2.bind(null,t),ro:m2.bind(null,t),io:y2.bind(null,t),Qi:g2.bind(null,t),eo:h2.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>R(this,null,function*(){yield p2(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=LS();if(!wu.D(t))throw new P(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=h_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wu(t,e.asyncQueue,r,e.clientId,e.initialUser)}},C_=(()=>{class n{initialize(t,r){return R(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>mb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=c2.bind(null,this.syncEngine),yield Dv(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new bv}()}createDatastore(t){let r=Gu(t.databaseInfo.databaseId),i=function(s){return new yv(s)}(t.databaseInfo);return function(s,a,u,l){return new wv(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new Ev(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>mb(this.syncEngine,r,0),function(){return ah.D()?new ah:new gv}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let m=new Nv(o,s,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return R(this,null,function*(){var t,r;yield function(o){return R(this,null,function*(){let s=U(o);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Ns(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function vb(n,e=10240){let t=0;return{read(){return R(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return R(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ss=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ge("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Fv=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new it,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return R(this,null,function*(){return this.metadata.promise})}Ua(){return R(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return R(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new Av(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return R(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return R(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return R(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Lv=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return R(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return R(this,null,function*(){let s=U(i),a={documents:o.map(p=>Nu(s.serializer,p))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,me.emptyPath(),a,o.length),l=new Map;u.forEach(p=>{let m=DV(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());K(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Yr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return R(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new Su(i,this.precondition(i)))}),yield function(r,i){return R(this,null,function*(){let o=U(r),s={writes:i.map(a=>Pu(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,me.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw z();t=Q.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Q.min())?qe.exists(!1):qe.updateTime(t):qe.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Q.min()))throw new P(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qe.updateTime(t)}return qe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Vv=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Lu(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>R(this,null,function*(){let e=new Lv(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!$u(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!uS(t)}return!1}};var jv=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=tt.UNAUTHENTICATED,this.clientId=Md.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>R(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new it;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Os(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function ey(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>R(this,null,function*(){r.isEqual(i)||(yield MS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function _b(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield T_(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>fb(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>fb(e.remoteStore,i)),n._onlineComponents=e})}function T_(n){return R(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ey(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;gn("Error using user provided cache. Falling back to memory cache: "+t),yield ey(n,new kv)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield ey(n,new kv);return n._offlineComponents})}function Mh(n){return R(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield _b(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield _b(n,new C_))),n._onlineComponents})}function KS(n){return T_(n).then(e=>e.persistence)}function b_(n){return T_(n).then(e=>e.localStore)}function QS(n){return Mh(n).then(e=>e.remoteStore)}function S_(n){return Mh(n).then(e=>e.syncEngine)}function _2(n){return Mh(n).then(e=>e.datastore)}function As(n){return R(this,null,function*(){let e=yield Mh(n),t=e.eventManager;return t.onListen=XV.bind(null,e.syncEngine),t.onUnlisten=t2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=e2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=n2.bind(null,e.syncEngine),t})}function w2(n){return n.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield KS(n),t=yield QS(n);return e.setNetworkEnabled(!0),function(i){let o=U(i);return o.L_.delete(0),Wu(o)}(t)}))}function I2(n){return n.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield KS(n),t=yield QS(n);return e.setNetworkEnabled(!1),function(i){return R(this,null,function*(){let o=U(i);o.L_.add(0),yield Ns(o),o.q_.set("Offline")})}(t)}))}function E2(n,e){let t=new it;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o,s){return R(this,null,function*(){try{let a=yield function(l,h){let p=U(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=Os(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield b_(n),e,t)})),t.promise}function YS(n,e,t={}){let r=new it;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,u,l){let h=new Ss({next:m=>{h.Za(),s.enqueueAndForget(()=>y_(o,p));let v=m.docs.has(a);!v&&m.fromCache?l.reject(new P(x.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&u&&u.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Vu(Ms(a.path),h,{includeMetadataChanges:!0,_a:!0});return m_(o,p)}(yield As(n),n.asyncQueue,e,t,r)})),r.promise}function D2(n,e){let t=new it;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o,s){return R(this,null,function*(){try{let a=yield rh(i,o,!0),u=new gh(o,a.Ts),l=u.ma(a.documents),h=u.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let u=Os(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield b_(n),e,t)})),t.promise}function ZS(n,e,t={}){let r=new it;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,u,l){let h=new Ss({next:m=>{h.Za(),s.enqueueAndForget(()=>y_(o,p)),m.fromCache&&u.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Vu(a,h,{includeMetadataChanges:!0,_a:!0});return m_(o,p)}(yield As(n),n.asyncQueue,e,t,r)})),r.promise}function C2(n,e){let t=new Ss(e);return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o){U(i).Y_.add(o),o.next()}(yield As(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o){U(i).Y_.delete(o)}(yield As(n),t)}))}}function T2(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?lS().encode(s):s,function(h,p){return new Fv(h,p)}(function(h,p){if(h instanceof Uint8Array)return vb(h,p);if(h instanceof ArrayBuffer)return vb(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,Gu(e));n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){v2(yield S_(n),i,r)}))}function b2(n,e){return n.asyncQueue.enqueue(()=>R(this,null,function*(){return function(r,i){let o=U(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield b_(n),e)}))}function JS(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var wb=new Map;function A_(n,e,t){if(!t)throw new P(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function x_(n,e,t,r){if(e===!0&&r===!0)throw new P(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ib(n){if(!$.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Eb(n){if($.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Nh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function _e(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Nh(n);throw new P(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function XS(n,e){if(e<=0)throw new P(x.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var yh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}x_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Hi=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new P(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ty;switch(r.type){case"firstParty":return new oy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return R(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=wb.get(t);r&&(k("ComponentProvider","Removing Datastore"),wb.delete(t),r.terminate())}(this),Promise.resolve()}};function eA(n,e,t,r={}){var i;let o=(n=_e(n,Hi))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&gn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=tt.MOCK_USER;else{a=nI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new tt(l)}n._authCredentials=new ny(new Rd(a,u))}}var dt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Me=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},kn=class n extends dt{constructor(e,t,r){super(e,t,Ms(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Me(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function R_(n,e,...t){if(n=Le(n),A_("collection","path",e),n instanceof Hi){let r=me.fromString(e,...t);return Eb(r),new kn(n,null,r)}{if(!(n instanceof Me||n instanceof kn))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(me.fromString(e,...t));return Eb(r),new kn(n.firestore,null,r)}}function tA(n,e){if(n=_e(n,Hi),A_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new dt(n,null,function(r){return new mn(me.emptyPath(),r)}(e))}function Ku(n,e,...t){if(n=Le(n),arguments.length===1&&(e=Md.newId()),A_("doc","path",e),n instanceof Hi){let r=me.fromString(e,...t);return Ib(r),new Me(n,null,new $(r))}{if(!(n instanceof Me||n instanceof kn))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(me.fromString(e,...t));return Ib(r),new Me(n.firestore,n instanceof kn?n.converter:null,new $(r))}}function M_(n,e){return n=Le(n),e=Le(e),(n instanceof Me||n instanceof kn)&&(e instanceof Me||e instanceof kn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function N_(n,e){return n=Le(n),e=Le(e),n instanceof dt&&e instanceof dt&&n.firestore===e.firestore&&qu(n._query,e._query)&&n.converter===e.converter}var vh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Lu(this,"async_queue_retry"),this.Vu=()=>{let r=xd();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=xd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=xd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new it;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return R(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Xr(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ge("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Cv.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&z()}verifyOperationInProgress(){}wu(){return R(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function Bv(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Uv=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new it,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var nA=-1,Be=class extends Hi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new vh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return R(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new vh(e),this._firestoreClient=void 0,yield e}})}};function ht(n){if(n._terminated)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||rA(n),n._firestoreClient}function rA(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new fy(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,JS(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new jv(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function iA(n,e){gn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return sA(n,C_.provider,{build:r=>new mh(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function oA(n){return R(this,null,function*(){gn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();sA(n,C_.provider,{build:t=>new Ov(t,e.cacheSizeBytes)})})}function sA(n,e,t){if((n=_e(n,Be))._firestoreClient||n._terminated)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new P(x.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},rA(n)}function aA(n){if(n._initialized&&!n._terminated)throw new P(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new it;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{yield function(r){return R(this,null,function*(){if(!Hr.D())return Promise.resolve();let i=r+"main";yield Hr.delete(i)})}(h_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function uA(n){return function(t){let r=new it;return t.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return a2(yield S_(t),r)})),r.promise}(ht(n=_e(n,Be)))}function cA(n){return w2(ht(n=_e(n,Be)))}function lA(n){return I2(ht(n=_e(n,Be)))}function dA(n,e){let t=ht(n=_e(n,Be)),r=new Uv;return T2(t,n._databaseId,e,r),r}function hA(n,e){return b2(ht(n=_e(n,Be)),e).then(t=>t?new dt(n,null,t.query):null)}var Vn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Qe.fromBase64String(e))}catch(t){throw new P(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var vn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new We(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var cr=class{constructor(e){this._methodName=e}};var qi=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var ju=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var S2=/^__.*__$/,$v=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new yn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qr(e,this.data,t,this.fieldTransforms)}},_h=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new yn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function fA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var wh=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ih(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(fA(this.Cu)&&S2.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Hv=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Gu(e)}Qu(e,t,r,i=!1){return new wh({Cu:e,methodName:t,qu:r,path:We.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ki(n){let e=n._freezeSettings(),t=Gu(n._databaseId);return new Hv(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ph(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);O_("Data must be an object, but it was:",s,r);let a=mA(r,s),u,l;if(o.merge)u=new Gt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Kv(e,p,t);if(!s.contains(m))throw new P(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);vA(h,m)||h.push(m)}u=new Gt(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new $v(new vt(a),u,l)}var Bu=class n extends cr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function pA(n,e,t){return new wh({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var qv=class n extends cr{_toFieldTransform(e){return new Bi(e.path,new Wr)}isEqual(e){return e instanceof n}},zv=class n extends cr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=pA(this,e,!0),r=this.Ku.map(o=>Qi(o,t)),i=new ar(r);return new Bi(e.path,i)}isEqual(e){return e instanceof n&&vf(this.Ku,e.Ku)}},Gv=class n extends cr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=pA(this,e,!0),r=this.Ku.map(o=>Qi(o,t)),i=new ur(r);return new Bi(e.path,i)}isEqual(e){return e instanceof n&&vf(this.Ku,e.Ku)}},Wv=class n extends cr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Kr(e.serializer,tS(e.serializer,this.$u));return new Bi(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function P_(n,e,t,r){let i=n.Qu(1,e,t);O_("Data must be an object, but it was:",i,r);let o=[],s=vt.empty();Wi(r,(u,l)=>{let h=F_(e,u,t);l=Le(l);let p=i.Nu(h);if(l instanceof Bu)o.push(h);else{let m=Qi(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new Gt(o);return new _h(s,a,i.fieldTransforms)}function k_(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[Kv(e,r,t)],u=[i];if(o.length%2!=0)throw new P(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Kv(e,o[m])),u.push(o[m+1]);let l=[],h=vt.empty();for(let m=a.length-1;m>=0;--m)if(!vA(l,a[m])){let v=a[m],b=u[m];b=Le(b);let M=s.Nu(v);if(b instanceof Bu)l.push(v);else{let N=Qi(b,M);N!=null&&(l.push(v),h.set(v,N))}}let p=new Gt(l);return new _h(h,p,s.fieldTransforms)}function gA(n,e,t,r=!1){return Qi(t,n.Qu(r?4:3,e))}function Qi(n,e){if(yA(n=Le(n)))return O_("Unsupported field value:",e,n),mA(n,e);if(n instanceof cr)return function(r,i){if(!fA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Qi(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Le(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return tS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=je.fromDate(r);return{timestampValue:_s(i.serializer,o)}}if(r instanceof je){let o=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_s(i.serializer,o)}}if(r instanceof qi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vn)return{bytesValue:dS(i.serializer,r._byteString)};if(r instanceof Me){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:c_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ju)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return u_(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Nh(r)}`)}(n,e)}function mA(n,e){let t={};return Lb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wi(n,(r,i)=>{let o=Qi(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function yA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof je||n instanceof qi||n instanceof Vn||n instanceof Me||n instanceof cr||n instanceof ju)}function O_(n,e,t){if(!yA(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Nh(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Kv(n,e,t){if((e=Le(e))instanceof vn)return e._internalPath;if(typeof e=="string")return F_(n,e);throw Ih("Field path arguments must be of type string or ",n,!1,void 0,t)}var A2=new RegExp("[~\\*/\\[\\]]");function F_(n,e,t){if(e.search(A2)>=0)throw Ih(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vn(...e.split("."))._internalPath}catch{throw Ih(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ih(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new P(x.INVALID_ARGUMENT,a+n+u)}function vA(n,e){return n.some(t=>t.isEqual(e))}var zi=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Qv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(kh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Qv=class extends zi{data(){return super.data()}};function kh(n,e){return typeof e=="string"?F_(n,e):e instanceof vn?e._internalPath:e._delegate._internalPath}function _A(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Uu=class{},Gi=class extends Uu{};function hr(n,e,...t){let r=[];e instanceof Uu&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof Yv).length,a=o.filter(u=>u instanceof Eh).length;if(s>1||s>0&&a>0)throw new P(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Eh=class n extends Gi{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return xA(e._query,t),new dt(e.firestore,e.converter,by(e._query,t))}_parse(e){let t=Ki(e.firestore);return function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Cb(p,h);let v=[];for(let b of p)v.push(Db(u,o,b));m={arrayValue:{values:v}}}else m=Db(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Cb(p,h),m=gA(a,s,p,h==="in"||h==="not-in");return ce.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function wA(n,e,t){let r=e,i=kh("where",n);return Eh._create(i,r,t)}var Yv=class n extends Uu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Te.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)xA(s,u),s=by(s,u)}(e._query,t),new dt(e.firestore,e.converter,by(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Zv=class n extends Gi{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vi(o,s)}(e._query,this._field,this._direction);return new dt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new mn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function IA(n,e="asc"){let t=e,r=kh("orderBy",n);return Zv._create(r,t)}var Dh=class n extends Gi{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new dt(e.firestore,e.converter,Ud(e._query,this._limit,this._limitType))}};function EA(n){return XS("limit",n),Dh._create("limit",n,"F")}function DA(n){return XS("limitToLast",n),Dh._create("limitToLast",n,"L")}var Ch=class n extends Gi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=AA(e,this.type,this._docOrFields,this._inclusive);return new dt(e.firestore,e.converter,function(i,o){return new mn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function CA(...n){return Ch._create("startAt",n,!0)}function TA(...n){return Ch._create("startAfter",n,!1)}var Th=class n extends Gi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=AA(e,this.type,this._docOrFields,this._inclusive);return new dt(e.firestore,e.converter,function(i,o){return new mn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function bA(...n){return Th._create("endBefore",n,!1)}function SA(...n){return Th._create("endAt",n,!0)}function AA(n,e,t,r){if(t[0]=Le(t[0]),t[0]instanceof zi)return function(o,s,a,u,l){if(!u)throw new P(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of ds(o))if(p.field.isKeyField())h.push(Li(s,u.key));else{let m=u.data.field(p.field);if(Sh(m))throw new P(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let v=p.field.canonicalString();throw new P(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(m)}return new Fn(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Ki(n.firestore);return function(s,a,u,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new P(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let v=[];for(let b=0;b<h.length;b++){let M=h[b];if(m[b].field.isKeyField()){if(typeof M!="string")throw new P(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof M}`);if(!s_(s)&&M.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${M}' contains a slash.`);let N=s.path.child(me.fromString(M));if(!$.isDocumentKey(N))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);let B=new $(N);v.push(Li(a,B))}else{let N=gA(u,l,M);v.push(N)}}return new Fn(v,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Db(n,e,t){if(typeof(t=Le(t))=="string"){if(t==="")throw new P(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!s_(e)&&t.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(me.fromString(t));if(!$.isDocumentKey(r))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Li(n,new $(r))}if(t instanceof Me)return Li(n,t._key);throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nh(t)}.`)}function Cb(n,e){if(!Array.isArray(n)||n.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xA(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var xs=class{convertValue(e,t="none"){switch(Fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Wi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Fe(s.doubleValue));return new ju(o)}convertGeoPoint(e){return new qi(Fe(e.latitude),Fe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=i_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Cu(e));default:return null}}convertTimestamp(e){let t=sr(e);return new je(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=me.fromString(e);K(ES(r));let i=new zr(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||Ge(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Oh(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Jv=class extends xs{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,t)}};var or=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},on=class extends zi{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ur(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(kh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ur=class extends on{data(e={}){return super.data(e)}},_n=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new or(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ur(this._firestore,this._userDataWriter,r.key,r,new or(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Ur(i._firestore,i._userDataWriter,a.doc.key,a.doc,new or(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Ur(i._firestore,i._userDataWriter,a.doc.key,a.doc,new or(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:x2(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function x2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function L_(n,e){return n instanceof on&&e instanceof on?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof _n&&e instanceof _n&&n._firestore===e._firestore&&N_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function RA(n){n=_e(n,Me);let e=_e(n.firestore,Be);return YS(ht(e),n._key).then(t=>U_(e,n,t))}var lr=class extends xs{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,t)}};function MA(n){n=_e(n,Me);let e=_e(n.firestore,Be),t=ht(e),r=new lr(e);return E2(t,n._key).then(i=>new on(e,r,n._key,i,new or(i!==null&&i.hasLocalMutations,!0),n.converter))}function NA(n){n=_e(n,Me);let e=_e(n.firestore,Be);return YS(ht(e),n._key,{source:"server"}).then(t=>U_(e,n,t))}function PA(n){n=_e(n,dt);let e=_e(n.firestore,Be),t=ht(e),r=new lr(e);return _A(n._query),ZS(t,n._query).then(i=>new _n(e,r,n,i))}function kA(n){n=_e(n,dt);let e=_e(n.firestore,Be),t=ht(e),r=new lr(e);return D2(t,n._query).then(i=>new _n(e,r,n,i))}function OA(n){n=_e(n,dt);let e=_e(n.firestore,Be),t=ht(e),r=new lr(e);return ZS(t,n._query,{source:"server"}).then(i=>new _n(e,r,n,i))}function V_(n,e,t){n=_e(n,Me);let r=_e(n.firestore,Be),i=Oh(n.converter,e,t);return Fs(r,[Ph(Ki(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,qe.none())])}function j_(n,e,t,...r){n=_e(n,Me);let i=_e(n.firestore,Be),o=Ki(i),s;return s=typeof(e=Le(e))=="string"||e instanceof vn?k_(o,"updateDoc",n._key,e,t,r):P_(o,"updateDoc",n._key,e),Fs(i,[s.toMutation(n._key,qe.exists(!0))])}function FA(n){return Fs(_e(n.firestore,Be),[new Yr(n._key,qe.none())])}function LA(n,e){let t=_e(n.firestore,Be),r=Ku(n),i=Oh(n.converter,e);return Fs(t,[Ph(Ki(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,qe.exists(!1))]).then(()=>r)}function B_(n,...e){var t,r,i;n=Le(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Bv(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Bv(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Me)l=_e(n.firestore,Be),h=Ms(n._key.path),u={next:p=>{e[s]&&e[s](U_(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=_e(n,dt);l=_e(p.firestore,Be),h=p._query;let m=new lr(l);u={next:v=>{e[s]&&e[s](new _n(l,m,p,v))},error:e[s+1],complete:e[s+2]},_A(n._query)}return function(m,v,b,M){let N=new Ss(M),B=new Vu(v,N,b);return m.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return m_(yield As(m),B)})),()=>{N.Za(),m.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return y_(yield As(m),B)}))}}(ht(l),h,a,u)}function VA(n,e){return C2(ht(n=_e(n,Be)),Bv(e)?e:{next:e})}function Fs(n,e){return function(r,i){let o=new it;return r.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return r2(yield S_(r),i,o)})),o.promise}(ht(n),e)}function U_(n,e,t){let r=t.docs.get(e._key),i=new lr(n);return new on(n,i,e._key,r,new or(t.hasPendingWrites,t.fromCache),e.converter)}var R2={maxAttempts:5};var bh=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ki(e)}set(e,t,r){this._verifyNotCommitted();let i=jr(e,this._firestore),o=Oh(i.converter,t,r),s=Ph(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,qe.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=jr(e,this._firestore),s;return s=typeof(t=Le(t))=="string"||t instanceof vn?k_(this._dataReader,"WriteBatch.update",o._key,t,r,i):P_(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,qe.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=jr(e,this._firestore);return this._mutations=this._mutations.concat(new Yr(t._key,qe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function jr(n,e){if((n=Le(n)).firestore!==e)throw new P(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Xv=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Ki(t)}get(t){let r=jr(t,this._firestore),i=new Jv(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return z();let s=o[0];if(s.isFoundDocument())return new zi(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new zi(this._firestore,i,r._key,null,r.converter);throw z()})}set(t,r,i){let o=jr(t,this._firestore),s=Oh(o.converter,r,i),a=Ph(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=jr(t,this._firestore),a;return a=typeof(r=Le(r))=="string"||r instanceof vn?k_(this._dataReader,"Transaction.update",s._key,r,i,o):P_(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=jr(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=jr(e,this._firestore),r=new lr(this._firestore);return super.get(e).then(i=>new on(this._firestore,r,t._key,i._document,new or(!1,!1),t.converter))}};function jA(n,e,t){n=_e(n,Be);let r=Object.assign(Object.assign({},R2),t);return function(o){if(o.maxAttempts<1)throw new P(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new it;return o.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){let l=yield _2(o);new Vv(o.asyncQueue,l,a,s,u).au()})),u.promise}(ht(n),i=>e(new Xv(n,i)),r)}function BA(){return new Bu("deleteField")}function UA(){return new qv("serverTimestamp")}function $A(...n){return new zv("arrayUnion",n)}function HA(...n){return new Gv("arrayRemove",n)}function qA(n){return new Wv("increment",n)}(function(e,t=!0){(function(i){Rs=i})(oI),sa(new oi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Be(new ry(r.getProvider("auth-internal")),new ay(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zr(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),yr(E0,"4.7.3",e),yr(E0,"4.7.3","esm2017")})();var M2="@firebase/firestore-compat",N2="0.3.38";function W_(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function zA(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function GA(){if(!Vb())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Fh=class n{constructor(e){this._delegate=e}static fromBase64String(e){return GA(),new n(Vn.fromBase64String(e))}static fromUint8Array(e){return zA(),new n(Vn.fromUint8Array(e))}toBase64(){return GA(),this._delegate.toBase64()}toUint8Array(){return zA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function $_(n){return P2(n,["next","error","complete"])}function P2(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var H_=class{enableIndexedDbPersistence(e,t){return iA(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return oA(e._delegate)}clearIndexedDbPersistence(e){return aA(e._delegate)}},Lh=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof zr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&gn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){eA(this._delegate,e,t,r)}enableNetwork(){return cA(this._delegate)}disableNetwork(){return lA(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,x_("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return uA(this._delegate)}onSnapshotsInSync(e){return VA(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new js(this,R_(this._delegate,e))}catch(t){throw Rt(t,"collection()","Firestore.collection()")}}doc(e){try{return new jn(this,Ku(this._delegate,e))}catch(t){throw Rt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Xi(this,tA(this._delegate,e))}catch(t){throw Rt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return jA(this._delegate,t=>e(new Vh(this,t)))}batch(){return ht(this._delegate),new jh(new bh(this._delegate,e=>Fs(this._delegate,e)))}loadBundle(e){return dA(this._delegate,e)}namedQuery(e){return hA(this._delegate,e).then(t=>t?new Xi(this,t):null)}},Ls=class extends xs{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fh(new Vn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return jn.forKey(t,this.firestore,null)}};function k2(n){Tb(n)}var Vh=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ls(e)}get(e){let t=Yi(e);return this._delegate.get(t).then(r=>new Zi(this._firestore,new on(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Yi(e);return r?(W_("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Yi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Yi(e);return this._delegate.delete(t),this}},jh=class{constructor(e){this._delegate=e}set(e,t,r){let i=Yi(e);return r?(W_("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Yi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Yi(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Vs=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Ur(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ji(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Ls(e),t),i.set(t,o)),o}};Vs.INSTANCES=new WeakMap;var jn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ls(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Me(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Me(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new js(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new js(this.firestore,R_(this._delegate,e))}catch(t){throw Rt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Le(e),e instanceof Me?M_(this._delegate,e):!1}set(e,t){t=W_("DocumentReference.set",t);try{return t?V_(this._delegate,e,t):V_(this._delegate,e)}catch(r){throw Rt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?j_(this._delegate,e):j_(this._delegate,e,t,...r)}catch(i){throw Rt(i,"updateDoc()","DocumentReference.update()")}}delete(){return FA(this._delegate)}onSnapshot(...e){let t=WA(e),r=KA(e,i=>new Zi(this.firestore,new on(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return B_(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=MA(this._delegate):e?.source==="server"?t=NA(this._delegate):t=RA(this._delegate),t.then(r=>new Zi(this.firestore,new on(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Vs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Rt(n,e,t){return n.message=n.message.replace(e,t),n}function WA(n){for(let e of n)if(typeof e=="object"&&!$_(e))return e;return{}}function KA(n,e){var t,r;let i;return $_(n[0])?i=n[0]:$_(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Zi=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new jn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return L_(this._delegate,e._delegate)}},Ji=class extends Zi{data(e){let t=this._delegate.data(e);return this._delegate._converter||bb(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Xi=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ls(e)}where(e,t,r){try{return new n(this.firestore,hr(this._delegate,wA(e,t,r)))}catch(i){throw Rt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,hr(this._delegate,IA(e,t)))}catch(r){throw Rt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,hr(this._delegate,EA(e)))}catch(t){throw Rt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,hr(this._delegate,DA(e)))}catch(t){throw Rt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,hr(this._delegate,CA(...e)))}catch(t){throw Rt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,hr(this._delegate,TA(...e)))}catch(t){throw Rt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,hr(this._delegate,bA(...e)))}catch(t){throw Rt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,hr(this._delegate,SA(...e)))}catch(t){throw Rt(t,"endAt()","Query.endAt()")}}isEqual(e){return N_(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=kA(this._delegate):e?.source==="server"?t=OA(this._delegate):t=PA(this._delegate),t.then(r=>new Qu(this.firestore,new _n(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=WA(e),r=KA(e,i=>new Qu(this.firestore,new _n(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return B_(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Vs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},q_=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ji(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Qu=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Xi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ji(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new q_(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Ji(this._firestore,r))})}isEqual(e){return L_(this._delegate,e._delegate)}},js=class n extends Xi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new jn(this.firestore,e):null}doc(e){try{return e===void 0?new jn(this.firestore,Ku(this._delegate)):new jn(this.firestore,Ku(this._delegate,e))}catch(t){throw Rt(t,"doc()","CollectionReference.doc()")}}add(e){return LA(this._delegate,e).then(t=>new jn(this.firestore,t))}isEqual(e){return M_(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Vs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Yi(n){return _e(n,Me)}var z_=class n{constructor(...e){this._delegate=new vn(...e)}static documentId(){return new n(We.keyField().canonicalString())}isEqual(e){return e=Le(e),e instanceof vn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var G_=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=UA();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=BA();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=$A(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=HA(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=qA(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var O2={Firestore:Lh,GeoPoint:qi,Timestamp:je,Blob:Fh,Transaction:Vh,WriteBatch:jh,DocumentReference:jn,DocumentSnapshot:Zi,Query:Xi,QueryDocumentSnapshot:Ji,QuerySnapshot:Qu,CollectionReference:js,FieldPath:z_,FieldValue:G_,setLogLevel:k2,CACHE_SIZE_UNLIMITED:nA};function F2(n,e){n.INTERNAL.registerComponent(new oi("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},O2)))}function L2(n){F2(n,(e,t)=>new Lh(e,t,new H_)),n.registerVersion(M2,N2)}L2(jt);function V2(n,e=la){return new le(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function QA(n,e){return V2(n,e)}function j2(n,e){return QA(n,e).pipe(di(void 0),fa(),G(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function Y_(n,e){return QA(n,e).pipe(G(t=>({payload:t,type:"query"})))}var Bh=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=JA(r,t);return new $h(i,o,this.afs)}snapshotChanges(){return j2(this.ref,this.afs.schedulers.outsideAngular).pipe(Ot)}valueChanges(e={}){return this.snapshotChanges().pipe(G(({payload:t})=>e.idField?xe(V({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Ee(this.ref.get(e)).pipe(Ot)}};function Uh(n,e){return Y_(n,e).pipe(di(void 0),fa(),G(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function YA(n,e,t){return Uh(n,t).pipe(li((r,i)=>B2(r,i.map(o=>o.payload),e),[]),$f(),G(r=>r.map(i=>({type:i.type,payload:i}))))}function B2(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=U2(n,r))}),n}function K_(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function U2(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return K_(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return K_(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return K_(n,e.oldIndex,1);break}return n}function ZA(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var $h=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Uh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(G(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(di(void 0),fa(),lt(([r,i])=>i.length>0||!r),G(([,r])=>r),Ot)}auditTrail(e){return this.stateChanges(e).pipe(li((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=ZA(e);return YA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ot)}valueChanges(e={}){return Y_(this.query,this.afs.schedulers.outsideAngular).pipe(G(t=>t.payload.docs.map(r=>e.idField?xe(V({},r.data()),{[e.idField]:r.id}):r.data())),Ot)}get(e){return Ee(this.query.get(e)).pipe(Ot)}add(e){return this.ref.add(e)}doc(e){return new Bh(this.ref.doc(e),this.afs)}},Q_=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Uh(this.query,this.afs.schedulers.outsideAngular).pipe(Ot):Uh(this.query,this.afs.schedulers.outsideAngular).pipe(G(t=>t.filter(r=>e.indexOf(r.type)>-1)),lt(t=>t.length>0),Ot)}auditTrail(e){return this.stateChanges(e).pipe(li((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=ZA(e);return YA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ot)}valueChanges(e={}){return Y_(this.query,this.afs.schedulers.outsideAngular).pipe(G(r=>r.payload.docs.map(i=>e.idField?V({[e.idField]:i.id},i.data()):i.data())),Ot)}get(e){return Ee(this.query.get(e)).pipe(Ot)}},$2=new W("angularfire2.enableFirestorePersistence"),H2=new W("angularfire2.firestore.persistenceSettings"),q2=new W("angularfire2.firestore.settings"),z2=new W("angularfire2.firestore.use-emulator");function JA(n,e=t=>t){return{query:e(n),ref:n}}var Lt=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,h,p,m,v,b,M,N,B,q){this.schedulers=u;let F=uu(t,a,r),Y=h;p&&Hm(F,a,m,b,M,N,v,B),[this.firestore,this.persistenceEnabled$]=vd(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let ee=a.runOutsideAngular(()=>F.firestore());if(o&&ee.settings(o),Y&&ee.useEmulator(...Y),i&&!Di(s)){let Z=()=>{try{return Ee(ee.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),J(!1)}};return[ee,a.runOutsideAngular(Z)]}else return[ee,J(!1)]},[o,Y,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=JA(i,r),a=this.schedulers.ngZone.run(()=>o);return new $h(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new Q_(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Bh(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(O(Zo),O(Jo,8),O($2,8),O(q2,8),O(Pt),O(pe),O(gd),O(H2,8),O(z2,8),O(_0,8),O(Lm,8),O(Vm,8),O(jm,8),O(Bm,8),O(Um,8),O($m,8),O(Si,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var XA=(()=>{class n{constructor(t){this.db=t,this.accesoHeader="header service running ... hello word",this.dbPath="/header",this.headerRef=t.collection(this.dbPath)}getHeader(){return this.headerRef}static{this.\u0275fac=function(r){return new(r||n)(O(Lt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ex=(()=>{class n{constructor(t){this.headerService=t,this.header=new fd,console.log(this.headerService),this.headerService.getHeader().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.header=r[0],console.log(this.header)})}static{this.\u0275fac=function(r){return new(r||n)(Je(XA))}}static{this.\u0275cmp=st({type:n,selectors:[["app-header"]],decls:15,vars:7,consts:[["width","200","height","200",3,"src"]],template:function(r,i){r&1&&(he(0,"tr")(1,"td"),Ie(2),Re(3,"br"),Ie(4),fe(),he(5,"td"),Re(6,"img",0),fe(),he(7,"td"),Ie(8),Re(9,"br"),Ie(10),Re(11,"br"),Ie(12),Re(13,"br"),Ie(14),fe()()),r&2&&(ve(2),Pe(" ",i.header.name," "),ve(2),Pe(" ",i.header.goalLife," "),ve(2),Eg("src",i.header.photoUrl,qD),ve(2),Pe(" ",i.header.email,""),ve(2),Pe(" ",i.header.phoneNumber,""),ve(2),Pe(" ",i.header.location,""),ve(2),Pe(" ",i.header.socialNetwork," "))}})}}return n})();var tx=(()=>{class n{constructor(t){this.db=t,this.accesoWorkExperience="work experience running....",this.dbPath="/work-experience",this.workExperienceRef=t.collection(this.dbPath)}getWorkExperience(){return this.workExperienceRef}static{this.\u0275fac=function(r){return new(r||n)(O(Lt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Q2(n,e){if(n&1&&(he(0,"ul")(1,"li"),Ie(2),he(3,"i"),Ie(4),fe(),Re(5,"br"),he(6,"b"),Ie(7),fe(),Re(8,"br"),Ie(9),Re(10,"br"),Ie(11," Logros: "),Re(12,"br"),Ie(13),Re(14,"br"),fe()()),n&2){let t=e.$implicit;ve(2),Dg(" ",t.startDate," - ",t.endDate," "),ve(2),Pe("",t.location," "),ve(3),Pe(" ",t.position," "),ve(2),Pe(" ",t.company," "),ve(4),Pe(" ",t.accomplishment," ")}}var nx=(()=>{class n{constructor(t){this.workExperienceService=t,this.workExperience=[],console.log(this.workExperienceService),this.workExperienceService.getWorkExperience().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.workExperience=r,console.log(this.workExperience)})}static{this.\u0275fac=function(r){return new(r||n)(Je(tx))}}static{this.\u0275cmp=st({type:n,selectors:[["app-work-experience"]],decls:3,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(he(0,"h3"),Ie(1,"Work-Experience"),fe(),Ut(2,Q2,15,6,"ul",0)),r&2&&(ve(2),$t("ngForOf",i.workExperience))},dependencies:[en]})}}return n})();var rx=(()=>{class n{constructor(t){this.db=t,this.accesoEducation="education service runnig...",this.dbPath="/education",this.educationRef=t.collection(this.dbPath)}getEducation(){return this.educationRef}static{this.\u0275fac=function(r){return new(r||n)(O(Lt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function J2(n,e){if(n&1&&(he(0,"ul")(1,"li"),Ie(2),Re(3,"br"),Ie(4),Re(5,"br"),fe()()),n&2){let t=e.$implicit;ve(2),Pe(" ",t.highSchool," "),ve(2),Pe(" ",t.university," ")}}var ix=(()=>{class n{constructor(t){this.educationService=t,this.education=[],console.log(this.educationService),this.educationService.getEducation().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.education=r,console.log(this.education)})}static{this.\u0275fac=function(r){return new(r||n)(Je(rx))}}static{this.\u0275cmp=st({type:n,selectors:[["app-education"]],decls:3,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(he(0,"h3"),Ie(1,"Education"),fe(),Ut(2,J2,6,2,"ul",0)),r&2&&(ve(2),$t("ngForOf",i.education))},dependencies:[en]})}}return n})();var ox=(()=>{class n{constructor(t){this.db=t,this.accesoSkills="skills service running",this.dbPath="/skills",this.skillsRef=t.collection(this.dbPath)}getSkills(){return this.skillsRef}static{this.\u0275fac=function(r){return new(r||n)(O(Lt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function tj(n,e){if(n&1&&(he(0,"ul",1)(1,"li",2)(2,"div",3)(3,"div",4),Ie(4),fe()(),he(5,"div",5),Ie(6),fe()()()),n&2){let t=e.$implicit;ve(3),Ll("width",t.level,"%"),ve(),Pe(" ",t.level,"% "),ve(2),Pe(" ",t.name," ")}}var sx=(()=>{class n{constructor(t){this.skillsService=t,this.skills=[],console.log(this.skillsService),this.skillsService.getSkills().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.skills=r,console.log(this.skills)})}static{this.\u0275fac=function(r){return new(r||n)(Je(ox))}}static{this.\u0275cmp=st({type:n,selectors:[["app-skills"]],decls:3,vars:1,consts:[["style","padding: 0; list-style: none;",4,"ngFor","ngForOf"],[2,"padding","0","list-style","none"],[2,"margin-bottom","20px"],[2,"background-color","#e5e7eb","border-radius","6px","overflow","hidden","height","20px","width","100%"],[2,"background-color","#4caf50","height","100%","color","white","text-align","center","font-size","0.8rem"],[2,"margin-top","6px"]],template:function(r,i){r&1&&(he(0,"h3"),Ie(1,"Skills"),fe(),Ut(2,tj,7,4,"ul",0)),r&2&&(ve(2),$t("ngForOf",i.skills))},dependencies:[en]})}}return n})();var ax=(()=>{class n{constructor(t){this.db=t,this.accesoCertificates="certificates service runnig.....",this.dbPath="/certificates",this.certificatesRef=t.collection(this.dbPath)}getCertificates(){return this.certificatesRef}static{this.\u0275fac=function(r){return new(r||n)(O(Lt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ij(n,e){if(n&1&&(he(0,"ul")(1,"li"),Ie(2),fe()()),n&2){let t=e.$implicit;ve(2),Pe(" ",t.name," ")}}var ux=(()=>{class n{constructor(t){this.certificatesService=t,this.certificates=[],console.log(this.certificatesService),this.certificatesService.getCertificates().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.certificates=r,console.log(this.certificates)})}static{this.\u0275fac=function(r){return new(r||n)(Je(ax))}}static{this.\u0275cmp=st({type:n,selectors:[["app-certificates"]],decls:3,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(he(0,"h3"),Ie(1,"Certificates"),fe(),Ut(2,ij,3,1,"ul",0)),r&2&&(ve(2),$t("ngForOf",i.certificates))},dependencies:[en]})}}return n})();var cx=(()=>{class n{constructor(t){this.db=t,this.accesoLanguages="languajes service running....",this.dbPath="/languages",this.languagesRef=t.collection(this.dbPath)}getLanguages(){return this.languagesRef}static{this.\u0275fac=function(r){return new(r||n)(O(Lt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function aj(n,e){if(n&1&&(he(0,"ul")(1,"li"),Ie(2),fe()()),n&2){let t=e.$implicit;ve(2),Pe(" ",t.name," ")}}var lx=(()=>{class n{constructor(t){this.languagesService=t,this.languages=[],console.log(this.languagesService),this.languagesService.getLanguages().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.languages=r,console.log(this.languages)})}static{this.\u0275fac=function(r){return new(r||n)(Je(cx))}}static{this.\u0275cmp=st({type:n,selectors:[["app-languages"]],decls:3,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(he(0,"h3"),Ie(1,"Languages"),fe(),Ut(2,aj,3,1,"ul",0)),r&2&&(ve(2),$t("ngForOf",i.languages))},dependencies:[en]})}}return n})();var dx=(()=>{class n{constructor(t){this.db=t,this.accesoInterests="interests service runnig...",this.dbPath="/interests",this.interestsRef=t.collection(this.dbPath)}getInterests(){return this.interestsRef}static{this.\u0275fac=function(r){return new(r||n)(O(Lt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function lj(n,e){if(n&1&&(he(0,"ul")(1,"li"),Ie(2),fe()()),n&2){let t=e.$implicit;ve(2),Pe(" ",t.name," ")}}var hx=(()=>{class n{constructor(t){this.interestsService=t,this.interests=[],console.log(this.interestsService),this.interestsService.getInterests().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.interests=r,console.log(this.interests)})}static{this.\u0275fac=function(r){return new(r||n)(Je(dx))}}static{this.\u0275cmp=st({type:n,selectors:[["app-interests"]],decls:3,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(he(0,"h3"),Ie(1,"Interests"),fe(),Ut(2,lj,3,1,"ul",0)),r&2&&(ve(2),$t("ngForOf",i.interests))},dependencies:[en]})}}return n})();var fx=(()=>{class n{constructor(){this.title="mycv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=st({type:n,selectors:[["app-root"]],decls:19,vars:0,consts:[["border","1"],["colspan","2"]],template:function(r,i){r&1&&(he(0,"table",0)(1,"tr")(2,"td",1),Re(3,"app-header"),fe()(),he(4,"tr")(5,"td"),Re(6,"app-work-experience"),fe(),he(7,"td"),Re(8,"app-skills"),fe()(),he(9,"tr")(10,"td"),Re(11,"app-education"),fe(),he(12,"td"),Re(13,"app-certificates"),fe()(),he(14,"tr")(15,"td"),Re(16,"app-languages"),fe(),he(17,"td"),Re(18,"app-interests"),fe()()())},dependencies:[ex,nx,ix,sx,ux,lx,hx]})}}return n})();var px={production:!1,firebase:{apiKey:"AIzaSyBeyH3Og_NyGUypBq1rS0ayK8cJAMDR2kE",authDomain:"my-cv-mrarzi.firebaseapp.com",projectId:"my-cv-mrarzi",storageBucket:"my-cv-mrarzi.firebasestorage.app",messagingSenderId:"200885917136",appId:"1:200885917136:web:30e68c37f1aec6d22d95d5"}};var gx=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=St({type:n,bootstrap:[fx]})}static{this.\u0275inj=bt({imports:[cT,n0,v0.initializeApp(px.firebase)]})}}return n})();uT().bootstrapModule(gx,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
