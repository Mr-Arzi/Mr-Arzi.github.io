import{a as V,b as Ae,c as sf,d as R,e as Fw,f as sc,g as Lw,h as Vw,i as jw,j as af,k as Bw,l as na,m as uf,n as ac,o as Uw,p as $w,q as cf,r as Le,s as ni,t as _n,u as uc,v as ra,w as Hw,x as qw,y as gr,z as Lt}from"./chunk-4ZHOUZTK.js";var df=null;var lf=1,zw=Symbol("SIGNAL");function we(n){let e=df;return df=n,e}function Gw(){return df}var hf={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ex(n){if(!(yf(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===lf)){if(!n.producerMustRecompute(n)&&!pf(n)){n.dirty=!1,n.lastCleanEpoch=lf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=lf}}function ff(n){return n&&(n.nextProducerIndex=0),we(n)}function Ww(n,e){if(we(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(yf(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)mf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function pf(n){vf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Ex(t),r!==t.version))return!0}return!1}function gf(n){if(vf(n),yf(n))for(let e=0;e<n.producerNode.length;e++)mf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function mf(n,e){if(Dx(n),n.liveConsumerNode.length===1&&Cx(n))for(let r=0;r<n.producerNode.length;r++)mf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];vf(i),i.producerIndexOfThis[r]=e}}function yf(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function vf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Dx(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Cx(n){return n.producerNode!==void 0}function Tx(){throw new Error}var bx=Tx;function Kw(n){bx=n}function te(n){return typeof n=="function"}function to(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var cc=to(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ri(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var $e=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){e=o instanceof cc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Qw(o)}catch(s){e=e??[],s instanceof cc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new cc(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Qw(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ri(t,e)}remove(e){let{_finalizers:t}=this;t&&ri(t,e),e instanceof n&&e._removeParent(this)}};$e.EMPTY=(()=>{let n=new $e;return n.closed=!0,n})();var _f=$e.EMPTY;function lc(n){return n instanceof $e||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function Qw(n){te(n)?n():n.unsubscribe()}var an={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var no={setTimeout(n,e,...t){let{delegate:r}=no;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=no;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function dc(n){no.setTimeout(()=>{let{onUnhandledError:e}=an;if(e)e(n);else throw n})}function ia(){}var Yw=wf("C",void 0,void 0);function Zw(n){return wf("E",void 0,n)}function Jw(n){return wf("N",n,void 0)}function wf(n,e,t){return{kind:n,value:e,error:t}}var ii=null;function ro(n){if(an.useDeprecatedSynchronousErrorHandling){let e=!ii;if(e&&(ii={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ii;if(ii=null,t)throw r}}else n()}function Xw(n){an.useDeprecatedSynchronousErrorHandling&&ii&&(ii.errorThrown=!0,ii.error=n)}var oi=class extends $e{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,lc(e)&&e.add(this)):this.destination=xx}static create(e,t,r){return new $n(e,t,r)}next(e){this.isStopped?Ef(Jw(e),this):this._next(e)}error(e){this.isStopped?Ef(Zw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ef(Yw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Sx=Function.prototype.bind;function If(n,e){return Sx.call(n,e)}var Df=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){hc(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){hc(r)}else hc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){hc(t)}}},$n=class extends oi{constructor(e,t,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&an.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&If(e.next,o),error:e.error&&If(e.error,o),complete:e.complete&&If(e.complete,o)}):i=e}this.destination=new Df(i)}};function hc(n){an.useDeprecatedSynchronousErrorHandling?Xw(n):dc(n)}function Ax(n){throw n}function Ef(n,e){let{onStoppedNotification:t}=an;t&&no.setTimeout(()=>t(n,e))}var xx={closed:!0,next:ia,error:Ax,complete:ia};var io=typeof Symbol=="function"&&Symbol.observable||"@@observable";function It(n){return n}function Cf(...n){return Tf(n)}function Tf(n){return n.length===0?It:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var le=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Mx(t)?t:new $n(t,r,i);return ro(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=eI(r),new r((i,o)=>{let s=new $n({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[io](){return this}pipe(...t){return Tf(t)(this)}toPromise(t){return t=eI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function eI(n){var e;return(e=n??an.Promise)!==null&&e!==void 0?e:Promise}function Rx(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function Mx(n){return n&&n instanceof oi||Rx(n)&&lc(n)}function bf(n){return te(n?.lift)}function se(n){return e=>{if(bf(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(n,e,t,r,i){return new Sf(n,e,t,r,i)}var Sf=class extends oi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function oo(){return se((n,e)=>{let t=null;n._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var so=class extends le{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,bf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $e;let t=this.getSubject();e.add(this.source.subscribe(ue(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$e.EMPTY)}return e}refCount(){return oo()(this)}};var tI=to(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ze=(()=>{class n extends le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new fc(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new tI}next(t){ro(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ro(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ro(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?_f:(this.currentObservers=null,o.push(t),new $e(()=>{this.currentObservers=null,ri(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new le;return t.source=this,t}}return n.create=(e,t)=>new fc(e,t),n})(),fc=class extends ze{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:_f}};var ut=class extends ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var oa={now(){return(oa.delegate||Date).now()},delegate:void 0};var pc=class extends ze{constructor(e=1/0,t=1/0,r=oa){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var gc=class extends $e{constructor(e,t){super()}schedule(e,t=0){return this}};var sa={setInterval(n,e,...t){let{delegate:r}=sa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=sa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ao=class extends gc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return sa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&sa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ri(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var uo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};uo.now=oa.now;var co=class extends uo{constructor(e,t=uo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var aa=new co(ao);var mc=class extends ao{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var yc=class extends co{};var Af=new yc(mc);var Et=new le(n=>n.complete());function nI(n){return n&&te(n.schedule)}function xf(n){return n[n.length-1]}function rI(n){return te(xf(n))?n.pop():void 0}function wn(n){return nI(xf(n))?n.pop():void 0}function iI(n,e){return typeof xf(n)=="number"?n.pop():e}var vc=n=>n&&typeof n.length=="number"&&typeof n!="function";function _c(n){return te(n?.then)}function wc(n){return te(n[io])}function Ic(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function Ec(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Nx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Dc=Nx();function Cc(n){return te(n?.[Dc])}function Tc(n){return Lw(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield sc(t.read());if(i)return yield sc(void 0);yield yield sc(r)}}finally{t.releaseLock()}})}function bc(n){return te(n?.getReader)}function Ve(n){if(n instanceof le)return n;if(n!=null){if(wc(n))return Px(n);if(vc(n))return kx(n);if(_c(n))return Ox(n);if(Ic(n))return oI(n);if(Cc(n))return Fx(n);if(bc(n))return Lx(n)}throw Ec(n)}function Px(n){return new le(e=>{let t=n[io]();if(te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function kx(n){return new le(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Ox(n){return new le(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,dc)})}function Fx(n){return new le(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function oI(n){return new le(e=>{Vx(n,e).catch(t=>e.error(t))})}function Lx(n){return oI(Tc(n))}function Vx(n,e){var t,r,i,o;return Fw(this,void 0,void 0,function*(){try{for(t=Vw(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Rt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Wt(n,e=0){return se((t,r)=>{t.subscribe(ue(r,i=>Rt(r,n,()=>r.next(i),e),()=>Rt(r,n,()=>r.complete(),e),i=>Rt(r,n,()=>r.error(i),e)))})}function un(n,e=0){return se((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function sI(n,e){return Ve(n).pipe(un(e),Wt(e))}function aI(n,e){return Ve(n).pipe(un(e),Wt(e))}function uI(n,e){return new le(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function cI(n,e){return new le(t=>{let r;return Rt(t,e,()=>{r=n[Dc](),Rt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function Sc(n,e){if(!n)throw new Error("Iterable cannot be null");return new le(t=>{Rt(t,e,()=>{let r=n[Symbol.asyncIterator]();Rt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function lI(n,e){return Sc(Tc(n),e)}function dI(n,e){if(n!=null){if(wc(n))return sI(n,e);if(vc(n))return uI(n,e);if(_c(n))return aI(n,e);if(Ic(n))return Sc(n,e);if(Cc(n))return cI(n,e);if(bc(n))return lI(n,e)}throw Ec(n)}function ve(n,e){return e?dI(n,e):Ve(n)}function J(...n){let e=wn(n);return ve(n,e)}function lo(n,e){let t=te(n)?n:()=>n,r=i=>i.error(t());return new le(e?i=>e.schedule(r,0,i):r)}function Rf(n){return!!n&&(n instanceof le||te(n.lift)&&te(n.subscribe))}var Hn=to(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function G(n,e){return se((t,r)=>{let i=0;t.subscribe(ue(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:jx}=Array;function Bx(n,e){return jx(e)?n(...e):n(e)}function hI(n){return G(e=>Bx(n,e))}var{isArray:Ux}=Array,{getPrototypeOf:$x,prototype:Hx,keys:qx}=Object;function fI(n){if(n.length===1){let e=n[0];if(Ux(e))return{args:e,keys:null};if(zx(e)){let t=qx(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function zx(n){return n&&typeof n=="object"&&$x(n)===Hx}function pI(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ua(...n){let e=wn(n),t=rI(n),{args:r,keys:i}=fI(n);if(r.length===0)return ve([],e);let o=new le(Gx(r,e,i?s=>pI(i,s):It));return t?o.pipe(hI(t)):o}function Gx(n,e,t=It){return r=>{gI(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)gI(e,()=>{let l=ve(n[c],e),h=!1;l.subscribe(ue(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function gI(n,e,t){n?Rt(t,n,e):e()}function mI(n,e,t,r,i,o,s,a){let c=[],l=0,h=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},v=M=>l<r?b(M):c.push(M),b=M=>{o&&e.next(M),l++;let N=!1;Ve(t(M,h++)).subscribe(ue(e,B=>{i?.(B),o?v(B):e.next(B)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;c.length&&l<r;){let B=c.shift();s?Rt(e,s,()=>b(B)):b(B)}m()}catch(B){e.error(B)}}))};return n.subscribe(ue(e,v,()=>{p=!0,m()})),()=>{a?.()}}function Ye(n,e,t=1/0){return te(e)?Ye((r,i)=>G((o,s)=>e(r,o,i,s))(Ve(n(r,i))),t):(typeof e=="number"&&(t=e),se((r,i)=>mI(r,i,n,t)))}function mr(n=1/0){return Ye(It,n)}function yI(){return mr(1)}function ho(...n){return yI()(ve(n,wn(n)))}function Ac(n){return new le(e=>{Ve(n()).subscribe(e)})}function Mf(...n){let e=wn(n),t=iI(n,1/0),r=n;return r.length?r.length===1?Ve(r[0]):mr(t)(ve(r,e)):Et}function ct(n,e){return se((t,r)=>{let i=0;t.subscribe(ue(r,o=>n.call(e,o,i++)&&r.next(o)))})}function yr(n){return se((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ue(t,void 0,void 0,s=>{o=Ve(n(s,yr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function vI(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(ue(s,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function si(n,e){return te(e)?Ye(n,e,1):Ye(n,1)}function vr(n){return se((e,t)=>{let r=!1;e.subscribe(ue(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function qn(n){return n<=0?()=>Et:se((e,t)=>{let r=0;e.subscribe(ue(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Nf(n){return G(()=>n)}function Pf(n,e=It){return n=n??Wx,se((t,r)=>{let i,o=!0;t.subscribe(ue(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function Wx(n,e){return n===e}function xc(n=Kx){return se((e,t)=>{let r=!1;e.subscribe(ue(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Kx(){return new Hn}function ca(n){return se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Kt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ct((i,o)=>n(i,o,r)):It,qn(1),t?vr(e):xc(()=>new Hn))}function fo(n){return n<=0?()=>Et:se((e,t)=>{let r=[];e.subscribe(ue(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function kf(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ct((i,o)=>n(i,o,r)):It,fo(1),t?vr(e):xc(()=>new Hn))}function la(){return se((n,e)=>{let t,r=!1;n.subscribe(ue(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function ai(n,e){return se(vI(n,e,arguments.length>=2,!0))}function _I(n={}){let{connector:e=()=>new ze,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},v=()=>{m(),s=c=void 0,h=p=!1},b=()=>{let M=s;v(),M?.unsubscribe()};return se((M,N)=>{l++,!p&&!h&&m();let B=c=c??e();N.add(()=>{l--,l===0&&!p&&!h&&(a=Of(b,i))}),B.subscribe(N),!s&&l>0&&(s=new $n({next:q=>B.next(q),error:q=>{p=!0,m(),a=Of(v,t,q),B.error(q)},complete:()=>{h=!0,m(),a=Of(v,r),B.complete()}}),Ve(M).subscribe(s))})(o)}}function Of(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new $n({next:()=>{r.unsubscribe(),n()}});return Ve(e(...t)).subscribe(r)}function Rc(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,_I({connector:()=>new pc(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function ui(...n){let e=wn(n);return se((t,r)=>{(e?ho(n,t,e):ho(n,t)).subscribe(r)})}function He(n,e){return se((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ue(r,c=>{i?.unsubscribe();let l=0,h=o++;Ve(n(c,h)).subscribe(i=ue(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Mc(n,e){return te(e)?He(()=>n,e):He(()=>n)}function Ff(n){return se((e,t)=>{Ve(n).subscribe(ue(t,()=>t.complete(),ia)),!t.closed&&e.subscribe(t)})}function nt(n,e,t){let r=te(n)||e||t?{next:n,error:e,complete:t}:n;return r?se((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ue(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):It}var X=class extends Error{constructor(e,t){super(Ap(e,t)),this.code=e}};function Ap(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Ia(n){return{toString:n}.toString()}var Nc="__parameters__";function Qx(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function nE(n,e,t){return Ia(()=>{let r=Qx(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,h){let p=c.hasOwnProperty(Nc)?c[Nc]:Object.defineProperty(c,Nc,{value:[]})[Nc];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Kn=globalThis;function be(n){for(let e in n)if(n[e]===be)return e;throw Error("Could not find renamed property on target object.")}function Vt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Vt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function wI(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var Yx=be({__forward_ref__:be});function rE(n){return n.__forward_ref__=rE,n.toString=function(){return Vt(this())},n}function Yt(n){return iE(n)?n():n}function iE(n){return typeof n=="function"&&n.hasOwnProperty(Yx)&&n.__forward_ref__===rE}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Tt(n){return{providers:n.providers||[],imports:n.imports||[]}}function dl(n){return II(n,sE)||II(n,aE)}function oE(n){return dl(n)!==null}function II(n,e){return n.hasOwnProperty(e)?n[e]:null}function Zx(n){let e=n&&(n[sE]||n[aE]);return e||null}function EI(n){return n&&(n.hasOwnProperty(DI)||n.hasOwnProperty(Jx))?n[DI]:null}var sE=be({\u0275prov:be}),DI=be({\u0275inj:be}),aE=be({ngInjectableDef:be}),Jx=be({ngInjectorDef:be}),W=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function uE(n){return n&&!!n.\u0275providers}var Xx=be({\u0275cmp:be}),eR=be({\u0275dir:be}),tR=be({\u0275pipe:be}),nR=be({\u0275mod:be}),jc=be({\u0275fac:be}),ha=be({__NG_ELEMENT_ID__:be}),CI=be({__NG_ENV_ID__:be});function Bc(n){return typeof n=="string"?n:n==null?"":String(n)}function rR(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Bc(n)}function iR(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new X(-200,n)}function xp(n,e){throw new X(-201,!1)}var ae=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ae||{}),zf;function cE(){return zf}function Qt(n){let e=zf;return zf=n,e}function lE(n,e,t){let r=dl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ae.Optional)return null;if(e!==void 0)return e;xp(n,"Injector")}var oR={},pa=oR,Gf="__NG_DI_FLAG__",Uc="ngTempTokenPath",sR="ngTokenPath",aR=/\n/gm,uR="\u0275",TI="__source",vo;function cR(){return vo}function _r(n){let e=vo;return vo=n,e}function lR(n,e=ae.Default){if(vo===void 0)throw new X(-203,!1);return vo===null?lE(n,void 0,e):vo.get(n,e&ae.Optional?null:void 0,e)}function O(n,e=ae.Default){return(cE()||lR)(Yt(n),e)}function j(n,e=ae.Default){return O(n,hl(e))}function hl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Wf(n){let e=[];for(let t=0;t<n.length;t++){let r=Yt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new X(900,!1);let i,o=ae.Default;for(let s=0;s<r.length;s++){let a=r[s],c=dR(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(O(i,o))}else e.push(O(r))}return e}function dE(n,e){return n[Gf]=e,n.prototype[Gf]=e,n}function dR(n){return n[Gf]}function hR(n,e,t,r){let i=n[Uc];throw e[TI]&&i.unshift(e[TI]),n.message=fR(`
`+n.message,i,t,r),n[sR]=i,n[Uc]=null,n}function fR(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==uR?n.slice(2):n;let i=Vt(e);if(Array.isArray(e))i=e.map(Vt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Vt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(aR,`
  `)}`}var xo=dE(nE("Optional"),8);var Rp=dE(nE("SkipSelf"),4);function wo(n,e){let t=n.hasOwnProperty(jc);return t?n[jc]:null}function Mp(n,e){n.forEach(t=>Array.isArray(t)?Mp(t,e):e(t))}function hE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function $c(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var ga={},In=[],Io=new W(""),fE=new W("",-1),pE=new W(""),Hc=class{get(e,t=pa){if(t===pa){let r=new Error(`NullInjectorError: No provider for ${Vt(e)}!`);throw r.name="NullInjectorError",r}return t}},gE=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(gE||{}),Dn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Dn||{}),Er=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Er||{});function pR(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Kf(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];mR(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function gR(n){return n===3||n===4||n===6}function mR(n){return n.charCodeAt(0)===64}function Np(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?bI(n,t,i,null,e[++r]):bI(n,t,i,null,null))}}return n}function bI(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var mE="ng-template";function yR(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&pR(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Pp(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Pp(n){return n.type===4&&n.value!==mE}function vR(n,e,t){let r=n.type===4&&!t?mE:n.value;return e===r}function _R(n,e,t){let r=4,i=n.attrs,o=i!==null?ER(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!cn(r)&&!cn(c))return!1;if(s&&cn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!vR(n,c,t)||c===""&&e.length===1){if(cn(r))return!1;s=!0}}else if(r&8){if(i===null||!yR(n,i,c,t)){if(cn(r))return!1;s=!0}}else{let l=e[++a],h=wR(c,i,Pp(n),t);if(h===-1){if(cn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(cn(r))return!1;s=!0}}}}return cn(r)||s}function cn(n){return(n&1)===0}function wR(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return DR(e,n)}function IR(n,e,t=!1){for(let r=0;r<e.length;r++)if(_R(n,e[r],t))return!0;return!1}function ER(n){for(let e=0;e<n.length;e++){let t=n[e];if(gR(t))return e}return n.length}function DR(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function SI(n,e){return n?":not("+e.trim()+")":e}function CR(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!cn(s)&&(e+=SI(o,i),i=""),r=s,o=o||!cn(r);t++}return i!==""&&(e+=SI(o,i)),e}function TR(n){return n.map(CR).join(",")}function bR(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!cn(i))break;i=o}r++}return{attrs:e,classes:t}}function ot(n){return Ia(()=>{let e=IE(n),t=Ae(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===gE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Dn.Emulated,styles:n.styles||In,_:null,schemas:n.schemas||null,tView:null,id:""});EE(t);let r=n.dependencies;return t.directiveDefs=xI(r,!1),t.pipeDefs=xI(r,!0),t.id=xR(t),t})}function SR(n){return Dr(n)||yE(n)}function AR(n){return n!==null}function bt(n){return Ia(()=>({type:n.type,bootstrap:n.bootstrap||In,declarations:n.declarations||In,imports:n.imports||In,exports:n.exports||In,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function AI(n,e){if(n==null)return ga;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Er.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Er.None?[r,a]:r,e[o]=s):t[o]=r}return t}function fl(n){return Ia(()=>{let e=IE(n);return EE(e),e})}function Dr(n){return n[Xx]||null}function yE(n){return n[eR]||null}function vE(n){return n[tR]||null}function _E(n){let e=Dr(n)||yE(n)||vE(n);return e!==null?e.standalone:!1}function wE(n,e){let t=n[nR]||null;if(!t&&e===!0)throw new Error(`Type ${Vt(n)} does not have '\u0275mod' property.`);return t}function IE(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ga,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||In,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:AI(n.inputs,e),outputs:AI(n.outputs),debugInfo:null}}function EE(n){n.features?.forEach(e=>e(n))}function xI(n,e){if(!n)return null;let t=e?vE:SR;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(AR)}function xR(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function RR(...n){return{\u0275providers:DE(!0,n),\u0275fromNgModule:!0}}function DE(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Mp(e,s=>{let a=s;Qf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&CE(i,o),t}function CE(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];kp(i,o=>{e(o,r)})}}function Qf(n,e,t,r){if(n=Yt(n),!n)return!1;let i=null,o=EI(n),s=!o&&Dr(n);if(!o&&!s){let c=n.ngModule;if(o=EI(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Qf(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Mp(o.imports,h=>{Qf(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&CE(l,e)}if(!a){let l=wo(i)||(()=>new i);e({provide:i,useFactory:l,deps:In},i),e({provide:pE,useValue:i,multi:!0},i),e({provide:Io,useValue:()=>O(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;kp(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function kp(n,e){for(let t of n)uE(t)&&(t=t.\u0275providers),Array.isArray(t)?kp(t,e):e(t)}var MR=be({provide:String,useValue:be});function TE(n){return n!==null&&typeof n=="object"&&MR in n}function NR(n){return!!(n&&n.useExisting)}function PR(n){return!!(n&&n.useFactory)}function Yf(n){return typeof n=="function"}var pl=new W(""),Oc={},kR={},Lf;function Op(){return Lf===void 0&&(Lf=new Hc),Lf}var jt=class{},ma=class extends jt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Jf(e,s=>this.processProvider(s)),this.records.set(fE,po(void 0,this)),i.has("environment")&&this.records.set(jt,po(void 0,this));let o=this.records.get(pl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(pE,In,ae.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=we(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),we(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=_r(this),r=Qt(void 0),i;try{return e()}finally{_r(t),Qt(r)}}get(e,t=pa,r=ae.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(CI))return e[CI](this);r=hl(r);let i,o=_r(this),s=Qt(void 0);try{if(!(r&ae.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=BR(e)&&dl(e);l&&this.injectableDefInScope(l)?c=po(Zf(e),Oc):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ae.Self?Op():this.parent;return t=r&ae.Optional&&t===pa?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Uc]=a[Uc]||[]).unshift(Vt(e)),o)throw a;return hR(a,e,"R3InjectorError",this.source)}else throw a}finally{Qt(s),_r(o)}}resolveInjectorInitializers(){let e=we(null),t=_r(this),r=Qt(void 0),i;try{let o=this.get(Io,In,ae.Self);for(let s of o)s()}finally{_r(t),Qt(r),we(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Vt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new X(205,!1)}processProvider(e){e=Yt(e);let t=Yf(e)?e:Yt(e&&e.provide),r=FR(e);if(!Yf(e)&&e.multi===!0){let i=this.records.get(t);i||(i=po(void 0,Oc,!0),i.factory=()=>Wf(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=we(null);try{return t.value===Oc&&(t.value=kR,t.value=t.factory()),typeof t.value=="object"&&t.value&&jR(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{we(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Yt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Zf(n){let e=dl(n),t=e!==null?e.factory:wo(n);if(t!==null)return t;if(n instanceof W)throw new X(204,!1);if(n instanceof Function)return OR(n);throw new X(204,!1)}function OR(n){if(n.length>0)throw new X(204,!1);let t=Zx(n);return t!==null?()=>t.factory(n):()=>new n}function FR(n){if(TE(n))return po(void 0,n.useValue);{let e=LR(n);return po(e,Oc)}}function LR(n,e,t){let r;if(Yf(n)){let i=Yt(n);return wo(i)||Zf(i)}else if(TE(n))r=()=>Yt(n.useValue);else if(PR(n))r=()=>n.useFactory(...Wf(n.deps||[]));else if(NR(n))r=()=>O(Yt(n.useExisting));else{let i=Yt(n&&(n.useClass||n.provide));if(VR(n))r=()=>new i(...Wf(n.deps));else return wo(i)||Zf(i)}return r}function po(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function VR(n){return!!n.deps}function jR(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function BR(n){return typeof n=="function"||typeof n=="object"&&n instanceof W}function Jf(n,e){for(let t of n)Array.isArray(t)?Jf(t,e):t&&uE(t)?Jf(t.\u0275providers,e):e(t)}function Tn(n,e){n instanceof ma&&n.assertNotDestroyed();let t,r=_r(n),i=Qt(void 0);try{return e()}finally{_r(r),Qt(i)}}function bE(){return cE()!==void 0||cR()!=null}function UR(n){if(!bE())throw new X(-203,!1)}function $R(n){let e=Kn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function HR(n){return typeof n=="function"}var Qn=0,de=1,ne=2,Ct=3,ln=4,dn=5,qc=6,RI=7,Cr=8,Eo=9,zn=10,Bt=11,ya=12,MI=13,Ea=14,Cn=15,Do=16,go=17,Co=18,gl=19,SE=20,Ir=21,Vf=22,Zt=23,Tr=25,AE=1;var di=7,zc=8,Gc=9,Jt=10,Wc=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Wc||{});function ci(n){return Array.isArray(n)&&typeof n[AE]=="object"}function Yn(n){return Array.isArray(n)&&n[AE]===!0}function xE(n){return(n.flags&4)!==0}function ml(n){return n.componentOffset>-1}function RE(n){return(n.flags&1)===1}function Da(n){return!!n.template}function Xf(n){return(n[ne]&512)!==0}var ep=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function ME(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function yl(){return NE}function NE(n){return n.type.prototype.ngOnChanges&&(n.setInput=zR),qR}yl.ngInherit=!0;function qR(){let n=kE(this),e=n?.current;if(e){let t=n.previous;if(t===ga)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function zR(n,e,t,r,i){let o=this.declaredInputs[r],s=kE(n)||GR(n,{previous:ga,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new ep(l&&l.currentValue,t,c===ga),ME(n,e,i,t)}var PE="__ngSimpleChanges__";function kE(n){return n[PE]||null}function GR(n,e){return n[PE]=e}var NI=null;var wr=function(n,e,t){NI?.(n,e,t)},WR="svg",KR="math";function Gn(n){for(;Array.isArray(n);)n=n[Qn];return n}function QR(n,e){return Gn(e[n])}function bn(n,e){return Gn(e[n.index])}function OE(n,e){return n.data[e]}function Ro(n,e){let t=e[n];return ci(t)?t:t[Qn]}function Fp(n){return(n[ne]&128)===128}function YR(n){return Yn(n[Ct])}function Kc(n,e){return e==null?null:n[e]}function FE(n){n[go]=0}function LE(n){n[ne]&1024||(n[ne]|=1024,Fp(n)&&_l(n))}function vl(n){return!!(n[ne]&9216||n[Zt]?.dirty)}function tp(n){n[zn].changeDetectionScheduler?.notify(8),n[ne]&64&&(n[ne]|=1024),vl(n)&&_l(n)}function _l(n){n[zn].changeDetectionScheduler?.notify(0);let e=hi(n);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!Fp(e)));)e=hi(e)}function VE(n,e){if((n[ne]&256)===256)throw new X(911,!1);n[Ir]===null&&(n[Ir]=[]),n[Ir].push(e)}function ZR(n,e){if(n[Ir]===null)return;let t=n[Ir].indexOf(e);t!==-1&&n[Ir].splice(t,1)}function hi(n){let e=n[Ct];return Yn(e)?e[Ct]:e}var ye={lFrame:KE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var jE=!1;function JR(){return ye.lFrame.elementDepthCount}function XR(){ye.lFrame.elementDepthCount++}function eM(){ye.lFrame.elementDepthCount--}function BE(){return ye.bindingsEnabled}function tM(){return ye.skipHydrationRootTNode!==null}function nM(n){return ye.skipHydrationRootTNode===n}function rM(){ye.skipHydrationRootTNode=null}function lt(){return ye.lFrame.lView}function Mo(){return ye.lFrame.tView}function Sn(){let n=UE();for(;n!==null&&n.type===64;)n=n.parent;return n}function UE(){return ye.lFrame.currentTNode}function iM(){let n=ye.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ca(n,e){let t=ye.lFrame;t.currentTNode=n,t.isParent=e}function $E(){return ye.lFrame.isParent}function oM(){ye.lFrame.isParent=!1}function HE(){return jE}function PI(n){jE=n}function sM(){return ye.lFrame.bindingIndex}function aM(n){return ye.lFrame.bindingIndex=n}function qE(){return ye.lFrame.bindingIndex++}function uM(n){let e=ye.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function cM(){return ye.lFrame.inI18n}function lM(n,e){let t=ye.lFrame;t.bindingIndex=t.bindingRootIndex=n,np(e)}function dM(){return ye.lFrame.currentDirectiveIndex}function np(n){ye.lFrame.currentDirectiveIndex=n}function zE(n){ye.lFrame.currentQueryIndex=n}function hM(n){let e=n[de];return e.type===2?e.declTNode:e.type===1?n[dn]:null}function GE(n,e,t){if(t&ae.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ae.Host);)if(i=hM(o),i===null||(o=o[Ea],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ye.lFrame=WE();return r.currentTNode=e,r.lView=n,!0}function Lp(n){let e=WE(),t=n[de];ye.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function WE(){let n=ye.lFrame,e=n===null?null:n.child;return e===null?KE(n):e}function KE(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function QE(){let n=ye.lFrame;return ye.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var YE=QE;function Vp(){let n=QE();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function wl(){return ye.lFrame.selectedIndex}function fi(n){ye.lFrame.selectedIndex=n}function fM(){let n=ye.lFrame;return OE(n.tView,n.selectedIndex)}function pM(){return ye.lFrame.currentNamespace}var ZE=!0;function jp(){return ZE}function Bp(n){ZE=n}function gM(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=NE(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Up(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Fc(n,e,t){JE(n,e,3,t)}function Lc(n,e,t,r){(n[ne]&3)===t&&JE(n,e,t,r)}function jf(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function JE(n,e,t,r){let i=r!==void 0?n[go]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[go]+=65536),(a<o||o==-1)&&(mM(n,t,e,c),n[go]=(n[go]&4294901760)+c+2),c++}function kI(n,e){wr(4,n,e);let t=we(null);try{e.call(n)}finally{we(t),wr(5,n,e)}}function mM(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ne]>>14<n[go]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,kI(a,o)):kI(a,o)}var _o=-1,va=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function yM(n){return n instanceof va}function vM(n){return(n.flags&8)!==0}function _M(n){return(n.flags&16)!==0}var Bf={},rp=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=hl(r);let i=this.injector.get(e,Bf,r);return i!==Bf||t===Bf?i:this.parentInjector.get(e,t,r)}};function XE(n){return n!==_o}function Qc(n){return n&32767}function wM(n){return n>>16}function Yc(n,e){let t=wM(n),r=e;for(;t>0;)r=r[Ea],t--;return r}var ip=!0;function OI(n){let e=ip;return ip=n,e}var IM=256,eD=IM-1,tD=5,EM=0,En={};function DM(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ha)&&(r=t[ha]),r==null&&(r=t[ha]=EM++);let i=r&eD,o=1<<i;e.data[n+(i>>tD)]|=o}function nD(n,e){let t=rD(n,e);if(t!==-1)return t;let r=e[de];r.firstCreatePass&&(n.injectorIndex=e.length,Uf(r.data,n),Uf(e,null),Uf(r.blueprint,null));let i=$p(n,e),o=n.injectorIndex;if(XE(i)){let s=Qc(i),a=Yc(i,e),c=a[de].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Uf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function rD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function $p(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=uD(i),r===null)return _o;if(t++,i=i[Ea],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return _o}function CM(n,e,t){DM(n,e,t)}function iD(n,e,t){if(t&ae.Optional||n!==void 0)return n;xp(e,"NodeInjector")}function oD(n,e,t,r){if(t&ae.Optional&&r===void 0&&(r=null),!(t&(ae.Self|ae.Host))){let i=n[Eo],o=Qt(void 0);try{return i?i.get(e,r,t&ae.Optional):lE(e,r,t&ae.Optional)}finally{Qt(o)}}return iD(r,e,t)}function sD(n,e,t,r=ae.Default,i){if(n!==null){if(e[ne]&2048&&!(r&ae.Self)){let s=xM(n,e,t,r,En);if(s!==En)return s}let o=aD(n,e,t,r,En);if(o!==En)return o}return oD(e,t,r,i)}function aD(n,e,t,r,i){let o=SM(t);if(typeof o=="function"){if(!GE(e,n,r))return r&ae.Host?iD(i,t,r):oD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ae.Optional))xp(t);else return s}finally{YE()}}else if(typeof o=="number"){let s=null,a=rD(n,e),c=_o,l=r&ae.Host?e[Cn][dn]:null;for((a===-1||r&ae.SkipSelf)&&(c=a===-1?$p(n,e):e[a+8],c===_o||!LI(r,!1)?a=-1:(s=e[de],a=Qc(c),e=Yc(c,e)));a!==-1;){let h=e[de];if(FI(o,a,h.data)){let p=TM(a,e,t,s,r,l);if(p!==En)return p}c=e[a+8],c!==_o&&LI(r,e[de].data[a+8]===l)&&FI(o,a,e)?(s=h,a=Qc(c),e=Yc(c,e)):a=-1}}return i}function TM(n,e,t,r,i,o){let s=e[de],a=s.data[n+8],c=r==null?ml(a)&&ip:r!=s&&(a.type&3)!==0,l=i&ae.Host&&o===a,h=bM(a,s,t,c,l);return h!==null?_a(e,s,h,a):En}function bM(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let b=s[v];if(v<c&&t===b||v>=c&&b.type===t)return v}if(i){let v=s[c];if(v&&Da(v)&&v.type===t)return c}return null}function _a(n,e,t,r){let i=n[t],o=e.data;if(yM(i)){let s=i;s.resolving&&iR(rR(o[t]));let a=OI(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Qt(s.injectImpl):null,h=GE(n,r,ae.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&gM(t,o[t],e)}finally{l!==null&&Qt(l),OI(a),s.resolving=!1,YE()}}return i}function SM(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ha)?n[ha]:void 0;return typeof e=="number"?e>=0?e&eD:AM:e}function FI(n,e,t){let r=1<<n;return!!(t[e+(n>>tD)]&r)}function LI(n,e){return!(n&ae.Self)&&!(n&ae.Host&&e)}var li=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return sD(this._tNode,this._lView,e,hl(r),t)}};function AM(){return new li(Sn(),lt())}function Hp(n){return Ia(()=>{let e=n.prototype.constructor,t=e[jc]||op(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[jc]||op(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function op(n){return iE(n)?()=>{let e=op(Yt(n));return e&&e()}:wo(n)}function xM(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ne]&2048&&!(s[ne]&512);){let a=aD(o,s,t,r|ae.Self,En);if(a!==En)return a;let c=o.parent;if(!c){let l=s[SE];if(l){let h=l.get(t,En,r);if(h!==En)return h}c=uD(s),s=s[Ea]}o=c}return i}function uD(n){let e=n[de],t=e.type;return t===2?e.declTNode:t===1?n[dn]:null}function VI(n,e=null,t=null,r){let i=cD(n,e,t,r);return i.resolveInjectorInitializers(),i}function cD(n,e=null,t=null,r,i=new Set){let o=[t||In,RR(n)];return r=r||(typeof n=="object"?void 0:Vt(n)),new ma(o,e||Op(),r||null,i)}var Xt=class n{static{this.THROW_IF_NOT_FOUND=pa}static{this.NULL=new Hc}static create(e,t){if(Array.isArray(e))return VI({name:""},t,e,"");{let r=e.name??"";return VI({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=H({token:n,providedIn:"any",factory:()=>O(fE)})}static{this.__NG_ELEMENT_ID__=-1}};var RM=new W("");RM.__NG_ELEMENT_ID__=n=>{let e=Sn();if(e===null)throw new X(204,!1);if(e.type&2)return e.value;if(n&ae.Optional)return null;throw new X(204,!1)};var MM="ngOriginalError";function $f(n){return n[MM]}var lD=!0,qp=(()=>{class n{static{this.__NG_ELEMENT_ID__=NM}static{this.__NG_ENV_ID__=t=>t}}return n})(),sp=class extends qp{constructor(e){super(),this._lView=e}onDestroy(e){return VE(this._lView,e),()=>ZR(this._lView,e)}};function NM(){return new sp(lt())}var No=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ut(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})();var ap=class extends ze{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,bE()&&(this.destroyRef=j(qp,{optional:!0})??void 0,this.pendingTasks=j(No,{optional:!0})??void 0)}emit(e){let t=we(null);try{super.next(e)}finally{we(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof $e&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Dt=ap;function Zc(...n){}function dD(n){let e,t;function r(){n=Zc;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function jI(n){return queueMicrotask(()=>n()),()=>{n=Zc}}var zp="isAngularZone",Jc=zp+"_ID",PM=0,he=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Dt(!1),this.onMicrotaskEmpty=new Dt(!1),this.onStable=new Dt(!1),this.onError=new Dt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=lD}=e;if(typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,FM(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(zp)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new X(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,kM,Zc,Zc);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},kM={};function Gp(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function OM(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){dD(()=>{n.callbackScheduled=!1,up(n),n.isCheckStableRunning=!0,Gp(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),up(n)}function FM(n){let e=()=>{OM(n)},t=PM++;n._inner=n._inner.fork({name:"angular",properties:{[zp]:!0,[Jc]:t,[Jc+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(LM(c))return r.invokeTask(o,s,a,c);try{return BI(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),UI(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return BI(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!VM(c)&&e(),UI(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,up(n),Gp(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function up(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function BI(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function UI(n){n._nesting--,Gp(n)}var Xc=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Dt,this.onMicrotaskEmpty=new Dt,this.onStable=new Dt,this.onError=new Dt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function LM(n){return hD(n,"__ignore_ng_zone__")}function VM(n){return hD(n,"__scheduler_tick__")}function hD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function jM(n="zone.js",e){return n==="noop"?new Xc:n==="zone.js"?new he(e):n}var Wn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&$f(e);for(;t&&$f(t);)t=$f(t);return t||null}},BM=new W("",{providedIn:"root",factory:()=>{let n=j(he),e=j(Wn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function UM(){return Il(Sn(),lt())}function Il(n,e){return new El(bn(n,e))}var El=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=UM}}return n})();function fD(n){return(n.flags&128)===128}var pD=new Map,$M=0;function HM(){return $M++}function qM(n){pD.set(n[gl],n)}function cp(n){pD.delete(n[gl])}var $I="__ngContext__";function pi(n,e){ci(e)?(n[$I]=e[gl],qM(e)):n[$I]=e}function gD(n){return yD(n[ya])}function mD(n){return yD(n[ln])}function yD(n){for(;n!==null&&!Yn(n);)n=n[ln];return n}var lp;function vD(n){lp=n}function zM(){if(lp!==void 0)return lp;if(typeof document<"u")return document;throw new X(210,!1)}var Dl=new W("",{providedIn:"root",factory:()=>GM}),GM="ng",Wp=new W(""),Mt=new W("",{providedIn:"platform",factory:()=>"unknown"});var Kp=new W("",{providedIn:"root",factory:()=>zM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var WM="h",KM="b";var QM=()=>null;function Qp(n,e,t=!1){return QM(n,e,t)}var _D=!1,YM=new W("",{providedIn:"root",factory:()=>_D});function wD(n){return n instanceof Function?n():n}function ZM(n){return(n??j(Xt)).get(Mt)==="browser"}var mi=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(mi||{}),JM;function Yp(n,e){return JM(n,e)}function mo(n,e,t,r,i){if(r!=null){let o,s=!1;Yn(r)?o=r:ci(r)&&(s=!0,r=r[Qn]);let a=Gn(r);n===0&&t!==null?i==null?TD(e,t,a):el(e,t,a,i||null,!0):n===1&&t!==null?el(e,t,a,i||null,!0):n===2?fN(e,a,s):n===3&&e.destroyNode(a),o!=null&&gN(e,n,o,t,i)}}function XM(n,e){return n.createText(e)}function eN(n,e,t){n.setValue(e,t)}function ID(n,e,t){return n.createElement(e,t)}function tN(n,e){ED(n,e),e[Qn]=null,e[dn]=null}function nN(n,e,t,r,i,o){r[Qn]=i,r[dn]=e,Cl(n,r,t,1,i,o)}function ED(n,e){e[zn].changeDetectionScheduler?.notify(9),Cl(n,e,e[Bt],2,null,null)}function rN(n){let e=n[ya];if(!e)return Hf(n[de],n);for(;e;){let t=null;if(ci(e))t=e[ya];else{let r=e[Jt];r&&(t=r)}if(!t){for(;e&&!e[ln]&&e!==n;)ci(e)&&Hf(e[de],e),e=e[Ct];e===null&&(e=n),ci(e)&&Hf(e[de],e),t=e&&e[ln]}e=t}}function iN(n,e,t,r){let i=Jt+r,o=t.length;r>0&&(t[i-1][ln]=e),r<o-Jt?(e[ln]=t[i],hE(t,Jt+r,e)):(t.push(e),e[ln]=null),e[Ct]=t;let s=e[Do];s!==null&&t!==s&&DD(s,e);let a=e[Co];a!==null&&a.insertView(n),tp(e),e[ne]|=128}function DD(n,e){let t=n[Gc],r=e[Ct];if(ci(r))n[ne]|=Wc.HasTransplantedViews;else{let i=r[Ct][Cn];e[Cn]!==i&&(n[ne]|=Wc.HasTransplantedViews)}t===null?n[Gc]=[e]:t.push(e)}function Zp(n,e){let t=n[Gc],r=t.indexOf(e);t.splice(r,1)}function dp(n,e){if(n.length<=Jt)return;let t=Jt+e,r=n[t];if(r){let i=r[Do];i!==null&&i!==n&&Zp(i,r),e>0&&(n[t-1][ln]=r[ln]);let o=$c(n,Jt+e);tN(r[de],r);let s=o[Co];s!==null&&s.detachView(o[de]),r[Ct]=null,r[ln]=null,r[ne]&=-129}return r}function CD(n,e){if(!(e[ne]&256)){let t=e[Bt];t.destroyNode&&Cl(n,e,t,3,null,null),rN(e)}}function Hf(n,e){if(e[ne]&256)return;let t=we(null);try{e[ne]&=-129,e[ne]|=256,e[Zt]&&gf(e[Zt]),sN(n,e),oN(n,e),e[de].type===1&&e[Bt].destroy();let r=e[Do];if(r!==null&&Yn(e[Ct])){r!==e[Ct]&&Zp(r,e);let i=e[Co];i!==null&&i.detachView(n)}cp(e)}finally{we(t)}}function oN(n,e){let t=n.cleanup,r=e[RI];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[RI]=null);let i=e[Ir];if(i!==null){e[Ir]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function sN(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof va)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];wr(4,a,c);try{c.call(a)}finally{wr(5,a,c)}}else{wr(4,i,o);try{o.call(i)}finally{wr(5,i,o)}}}}}function aN(n,e,t){return uN(n,e.parent,t)}function uN(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Qn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Dn.None||o===Dn.Emulated)return null}return bn(r,t)}}function el(n,e,t,r,i){n.insertBefore(e,t,r,i)}function TD(n,e,t){n.appendChild(e,t)}function HI(n,e,t,r,i){r!==null?el(n,e,t,r,i):TD(n,e,t)}function bD(n,e){return n.parentNode(e)}function cN(n,e){return n.nextSibling(e)}function lN(n,e,t){return hN(n,e,t)}function dN(n,e,t){return n.type&40?bn(n,t):null}var hN=dN,qI;function Jp(n,e,t,r){let i=aN(n,r,e),o=e[Bt],s=r.parent||e[dn],a=lN(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)HI(o,i,t[c],a,!1);else HI(o,i,t,a,!1);qI!==void 0&&qI(o,r,e,t,i)}function da(n,e){if(e!==null){let t=e.type;if(t&3)return bn(e,n);if(t&4)return hp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return da(n,r);{let i=n[e.index];return Yn(i)?hp(-1,i):Gn(i)}}else{if(t&128)return da(n,e.next);if(t&32)return Yp(e,n)()||Gn(n[e.index]);{let r=SD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=hi(n[Cn]);return da(i,r)}else return da(n,e.next)}}}return null}function SD(n,e){if(e!==null){let r=n[Cn][dn],i=e.projection;return r.projection[i]}return null}function hp(n,e){let t=Jt+n+1;if(t<e.length){let r=e[t],i=r[de].firstChild;if(i!==null)return da(r,i)}return e[di]}function fN(n,e,t){n.removeChild(null,e,t)}function Xp(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&pi(Gn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)Xp(n,e,t.child,r,i,o,!1),mo(e,n,i,a,o);else if(c&32){let l=Yp(t,r),h;for(;h=l();)mo(e,n,i,h,o);mo(e,n,i,a,o)}else c&16?pN(n,e,r,t,i,o):mo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Cl(n,e,t,r,i,o){Xp(t,r,n.firstChild,e,i,o,!1)}function pN(n,e,t,r,i,o){let s=t[Cn],c=s[dn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];mo(e,n,i,h,o)}else{let l=c,h=s[Ct];fD(r)&&(l.flags|=128),Xp(n,e,l,h,i,o,!0)}}function gN(n,e,t,r,i){let o=t[di],s=Gn(t);o!==s&&mo(e,n,r,o,i);for(let a=Jt;a<t.length;a++){let c=t[a];Cl(c[de],c,n,e,r,o)}}function mN(n,e,t){n.setAttribute(e,"style",t)}function AD(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function xD(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Kf(n,e,r),i!==null&&AD(n,e,i),o!==null&&mN(n,e,o)}var Po={};function Ne(n=1){RD(Mo(),lt(),wl()+n,!1)}function RD(n,e,t,r){if(!r)if((e[ne]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Fc(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Lc(e,o,0,t)}fi(t)}function Ze(n,e=ae.Default){let t=lt();if(t===null)return O(n,e);let r=Sn();return sD(r,t,Yt(n),e)}function MD(){let n="invalid";throw new Error(n)}function ND(n,e,t,r,i,o){let s=we(null);try{let a=null;i&Er.SignalBased&&(a=e[r][zw]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Er.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):ME(e,a,r,o)}finally{we(s)}}function yN(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)fi(~i);else{let o=i,s=t[++r],a=t[++r];lM(s,o);let c=e[o];a(2,c)}}}finally{fi(-1)}}function Tl(n,e,t,r,i,o,s,a,c,l,h){let p=e.blueprint.slice();return p[Qn]=i,p[ne]=r|4|128|8|64,(l!==null||n&&n[ne]&2048)&&(p[ne]|=2048),FE(p),p[Ct]=p[Ea]=n,p[Cr]=t,p[zn]=s||n&&n[zn],p[Bt]=a||n&&n[Bt],p[Eo]=c||n&&n[Eo]||null,p[dn]=o,p[gl]=HM(),p[qc]=h,p[SE]=l,p[Cn]=e.type==2?n[Cn]:p,p}function bl(n,e,t,r,i){let o=n.data[e];if(o===null)o=vN(n,e,t,r,i),cM()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=iM();o.injectorIndex=s===null?-1:s.injectorIndex}return Ca(o,!0),o}function vN(n,e,t,r,i){let o=UE(),s=$E(),a=s?o:o&&o.parent,c=n.data[e]=DN(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function PD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function kD(n,e,t,r,i){let o=wl(),s=r&2;try{fi(-1),s&&e.length>Tr&&RD(n,e,Tr,!1),wr(s?2:0,i),t(r,i)}finally{fi(o),wr(s?3:1,i)}}function OD(n,e,t){if(xE(e)){let r=we(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{we(r)}}}function FD(n,e,t){BE()&&(RN(n,e,t,bn(t,e)),(t.flags&64)===64&&UD(n,e,t))}function LD(n,e,t=bn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function VD(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=eg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function eg(n,e,t,r,i,o,s,a,c,l,h){let p=Tr+r,m=p+i,v=_N(p,m),b=typeof l=="function"?l():l;return v[de]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:b,incompleteFirstPass:!1,ssrId:h}}function _N(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Po);return t}function wN(n,e,t,r){let o=r.get(YM,_D)||t===Dn.ShadowDom,s=n.selectRootElement(e,o);return IN(s),s}function IN(n){EN(n)}var EN=()=>null;function DN(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return tM()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function zI(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Er.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?GI(r,t,l,a,c):GI(r,t,l,a)}return r}function GI(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function CN(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,v=m?m.inputs:null,b=m?m.outputs:null;c=zI(0,p.inputs,h,c,v),l=zI(1,p.outputs,h,l,b);let M=c!==null&&s!==null&&!Pp(e)?jN(c,h,s):null;a.push(M)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function TN(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function bN(n,e,t,r,i,o,s,a){let c=bn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(tg(n,t,h,r,i),ml(e)&&SN(t,e.index)):e.type&3?(r=TN(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function SN(n,e){let t=Ro(e,n);t[ne]&16||(t[ne]|=64)}function jD(n,e,t,r){if(BE()){let i=r===null?null:{"":-1},o=NN(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&BD(n,e,t,s,i,a),i&&PN(t,r,i)}t.mergedAttrs=Np(t.mergedAttrs,t.attrs)}function BD(n,e,t,r,i,o){for(let l=0;l<r.length;l++)CM(nD(t,e),n,r[l].type);ON(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,c=PD(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=Np(t.mergedAttrs,h.hostAttrs),FN(n,t,e,c,h),kN(c,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}CN(n,t,o)}function AN(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;xN(s)!=a&&s.push(a),s.push(t,r,o)}}function xN(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function RN(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;ml(t)&&LN(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||nD(t,e),pi(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=_a(e,n,a,t);if(pi(l,e),s!==null&&VN(e,a-i,l,c,t,s),Da(c)){let h=Ro(t.index,e);h[Cr]=_a(e,n,a,t)}}}function UD(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=dM();try{fi(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];np(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&MN(c,l)}}finally{fi(-1),np(s)}}function MN(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function NN(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(IR(e,s.selectors,!1))if(r||(r=[]),Da(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;fp(n,e,c)}else r.unshift(s),fp(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function fp(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function PN(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new X(-301,!1);r.push(e[i],o)}}}function kN(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Da(e)&&(t[""]=n)}}function ON(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function FN(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=wo(i.type,!0)),s=new va(o,Da(i),Ze);n.blueprint[r]=s,t[r]=s,AN(n,e,r,PD(n,t,i.hostVars,Po),i)}function LN(n,e,t){let r=bn(e,n),i=VD(t),o=n[zn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Sl(n,Tl(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function VN(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],h=s[a++],p=s[a++];ND(r,t,c,l,h,p)}}function jN(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function $D(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function HD(n,e){let t=n.contentQueries;if(t!==null){let r=we(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];zE(o),a.contentQueries(2,e[s],s)}}}finally{we(r)}}}function Sl(n,e){return n[ya]?n[MI][ln]=e:n[ya]=e,n[MI]=e,e}function pp(n,e,t){zE(0);let r=we(null);try{e(n,t)}finally{we(r)}}function BN(n,e){let t=n[Eo],r=t?t.get(Wn,null):null;r&&r.handleError(e)}function tg(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],h=n.data[s];ND(h,l,r,a,c,i)}}function qD(n,e,t){let r=QR(e,n);eN(n[Bt],r,t)}function UN(n,e){let t=Ro(e,n),r=t[de];$N(r,t);let i=t[Qn];i!==null&&t[qc]===null&&(t[qc]=Qp(i,t[Eo])),ng(r,t,t[Cr])}function $N(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function ng(n,e,t){Lp(e);try{let r=n.viewQuery;r!==null&&pp(1,r,t);let i=n.template;i!==null&&kD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Co]?.finishViewCreation(n),n.staticContentQueries&&HD(n,e),n.staticViewQueries&&pp(2,n.viewQuery,t);let o=n.components;o!==null&&HN(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ne]&=-5,Vp()}}function HN(n,e){for(let t=0;t<e.length;t++)UN(n,e[t])}function qN(n,e,t,r){let i=we(null);try{let o=e.tView,a=n[ne]&4096?4096:16,c=Tl(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Do]=l;let h=n[Co];return h!==null&&(c[Co]=h.createEmbeddedView(o)),ng(o,c,t),c}finally{we(i)}}function WI(n,e){return!e||e.firstChild===null||fD(n)}function zN(n,e,t,r=!0){let i=e[de];if(iN(i,e,n,t),r){let s=hp(t,n),a=e[Bt],c=bD(a,n[di]);c!==null&&nN(i,n[dn],a,e,c,s)}let o=e[qc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function tl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Gn(o)),Yn(o)&&GN(o,r);let s=t.type;if(s&8)tl(n,e,t.child,r);else if(s&32){let a=Yp(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=SD(e,t);if(Array.isArray(a))r.push(...a);else{let c=hi(e[Cn]);tl(c[de],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function GN(n,e){for(let t=Jt;t<n.length;t++){let r=n[t],i=r[de].firstChild;i!==null&&tl(r[de],r,i,e)}n[di]!==n[Qn]&&e.push(n[di])}var zD=[];function WN(n){return n[Zt]??KN(n)}function KN(n){let e=zD.pop()??Object.create(YN);return e.lView=n,e}function QN(n){n.lView[Zt]!==n&&(n.lView=null,zD.push(n))}var YN=Ae(V({},hf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{_l(n.lView)},consumerOnSignalRead(){this.lView[Zt]=this}});function ZN(n){let e=n[Zt]??Object.create(JN);return e.lView=n,e}var JN=Ae(V({},hf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=hi(n.lView);for(;e&&!GD(e[de]);)e=hi(e);e&&LE(e)},consumerOnSignalRead(){this.lView[Zt]=this}});function GD(n){return n.type!==2}var XN=100;function WD(n,e=!0,t=0){let r=n[zn],i=r.rendererFactory,o=!1;o||i.begin?.();try{eP(n,t)}catch(s){throw e&&BN(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function eP(n,e){let t=HE();try{PI(!0),gp(n,e);let r=0;for(;vl(n);){if(r===XN)throw new X(103,!1);r++,gp(n,1)}}finally{PI(t)}}function tP(n,e,t,r){let i=e[ne];if((i&256)===256)return;let o=!1,s=!1;!o&&e[zn].inlineEffectRunner?.flush(),Lp(e);let a=!0,c=null,l=null;o||(GD(n)?(l=WN(e),c=ff(l)):Gw()===null?(a=!1,l=ZN(e),c=ff(l)):e[Zt]&&(gf(e[Zt]),e[Zt]=null));try{FE(e),aM(n.bindingStartIndex),t!==null&&kD(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let v=n.preOrderCheckHooks;v!==null&&Fc(e,v,null)}else{let v=n.preOrderHooks;v!==null&&Lc(e,v,0,null),jf(e,0)}if(s||nP(e),KD(e,0),n.contentQueries!==null&&HD(n,e),!o)if(h){let v=n.contentCheckHooks;v!==null&&Fc(e,v)}else{let v=n.contentHooks;v!==null&&Lc(e,v,1),jf(e,1)}yN(n,e);let p=n.components;p!==null&&YD(e,p,0);let m=n.viewQuery;if(m!==null&&pp(2,m,r),!o)if(h){let v=n.viewCheckHooks;v!==null&&Fc(e,v)}else{let v=n.viewHooks;v!==null&&Lc(e,v,2),jf(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Vf]){for(let v of e[Vf])v();e[Vf]=null}o||(e[ne]&=-73)}catch(h){throw o||_l(e),h}finally{l!==null&&(Ww(l,c),a&&QN(l)),Vp()}}function KD(n,e){for(let t=gD(n);t!==null;t=mD(t))for(let r=Jt;r<t.length;r++){let i=t[r];QD(i,e)}}function nP(n){for(let e=gD(n);e!==null;e=mD(e)){if(!(e[ne]&Wc.HasTransplantedViews))continue;let t=e[Gc];for(let r=0;r<t.length;r++){let i=t[r];LE(i)}}}function rP(n,e,t){let r=Ro(e,n);QD(r,t)}function QD(n,e){Fp(n)&&gp(n,e)}function gp(n,e){let r=n[de],i=n[ne],o=n[Zt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&pf(o)),s||=!1,o&&(o.dirty=!1),n[ne]&=-9217,s)tP(r,n,r.template,n[Cr]);else if(i&8192){KD(n,1);let a=r.components;a!==null&&YD(n,a,1)}}function YD(n,e,t){for(let r=0;r<e.length;r++)rP(n,e[r],t)}function ZD(n,e){let t=HE()?64:1088;for(n[zn].changeDetectionScheduler?.notify(e);n;){n[ne]|=t;let r=hi(n);if(Xf(n)&&!r)return n;n=r}return null}var gi=class{get rootNodes(){let e=this._lView,t=e[de];return tl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Cr]}set context(e){this._lView[Cr]=e}get destroyed(){return(this._lView[ne]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ct];if(Yn(e)){let t=e[zc],r=t?t.indexOf(this):-1;r>-1&&(dp(e,r),$c(t,r))}this._attachedToViewContainer=!1}CD(this._lView[de],this._lView)}onDestroy(e){VE(this._lView,e)}markForCheck(){ZD(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){tp(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,WD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Xf(this._lView),t=this._lView[Do];t!==null&&!e&&Zp(t,this._lView),ED(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=e;let t=Xf(this._lView),r=this._lView[Do];r!==null&&!t&&DD(r,this._lView),tp(this._lView)}},rg=(()=>{class n{static{this.__NG_ELEMENT_ID__=sP}}return n})(),iP=rg,oP=class extends iP{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=qN(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new gi(i)}};function sP(){return aP(Sn(),lt())}function aP(n,e){return n.type&4?new oP(e,n,Il(n,e)):null}var d4=new RegExp(`^(\\d+)*(${KM}|${WM})*(.*)`);var uP=()=>null;function KI(n,e){return uP(n,e)}var To=class{},ig=new W("",{providedIn:"root",factory:()=>!1});var JD=new W(""),XD=new W(""),mp=class{},nl=class{};function cP(n){let e=Error(`No component factory found for ${Vt(n)}.`);return e[lP]=n,e}var lP="ngComponent";var yp=class{resolveComponentFactory(e){throw cP(e)}},bo=class{static{this.NULL=new yp}},So=class{};var dP=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>null})}}return n})();function vp(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=wI(i,a);else if(o==2){let c=a,l=e[++s];r=wI(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var rl=class extends bo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Dr(e);return new Ao(t,this.ngModule)}};function QI(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Er.None;e?t.push({propName:s,templateName:r,isSignal:(a&Er.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function hP(n){let e=n.toLowerCase();return e==="svg"?WR:e==="math"?KR:null}var Ao=class extends nl{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=QI(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return QI(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=TR(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=we(null);try{i=i||this.ngModule;let s=i instanceof jt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new rp(e,s):e,c=a.get(So,null);if(c===null)throw new X(407,!1);let l=a.get(dP,null),h=a.get(To,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",b=r?wN(m,r,this.componentDef.encapsulation,a):ID(m,v,hP(v)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let N=null;b!==null&&(N=Qp(b,a,!0));let B=eg(0,null,null,1,0,null,null,null,null,null,null),q=Tl(null,B,null,M,null,null,p,m,a,null,N);Lp(q);let F,Y,ee=null;try{let Z=this.componentDef,I,y=null;Z.findHostDirectiveDefs?(I=[],y=new Map,Z.findHostDirectiveDefs(Z,I,y),I.push(Z)):I=[Z];let w=fP(q,b);ee=pP(w,b,Z,I,q,p,m),Y=OE(B,Tr),b&&yP(m,Z,b,r),t!==void 0&&vP(Y,this.ngContentSelectors,t),F=mP(ee,Z,I,y,q,[_P]),ng(B,q,null)}catch(Z){throw ee!==null&&cp(ee),cp(q),Z}finally{Vp()}return new _p(this.componentType,F,Il(Y,q),q,Y)}finally{we(o)}}},_p=class extends mp{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new gi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;tg(o[de],o,i,e,t),this.previousInputValues.set(e,t);let s=Ro(this._tNode.index,o);ZD(s,1)}}get injector(){return new li(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function fP(n,e){let t=n[de],r=Tr;return n[r]=e,bl(t,r,2,"#host",null)}function pP(n,e,t,r,i,o,s){let a=i[de];gP(r,n,e,s);let c=null;e!==null&&(c=Qp(e,i[Eo]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Tl(i,VD(t),null,h,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&fp(a,n,r.length-1),Sl(i,p),i[n.index]=p}function gP(n,e,t,r){for(let i of n)e.mergedAttrs=Np(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(vp(e,e.mergedAttrs,!0),t!==null&&xD(r,t,e))}function mP(n,e,t,r,i,o){let s=Sn(),a=i[de],c=bn(s,i);BD(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=_a(i,a,p,s);pi(m,i)}UD(a,i,s),c&&pi(c,i);let l=_a(i,a,s.directiveStart+s.componentOffset,s);if(n[Cr]=i[Cr]=l,o!==null)for(let h of o)h(l,e);return OD(a,s,i),l}function yP(n,e,t,r){if(r)Kf(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=bR(e.selectors[0]);i&&Kf(n,t,i),o&&o.length>0&&AD(n,t,o.join(" "))}}function vP(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function _P(){let n=Sn();Up(lt()[de],n)}var Ta=(()=>{class n{static{this.__NG_ELEMENT_ID__=wP}}return n})();function wP(){let n=Sn();return EP(n,lt())}var IP=Ta,eC=class extends IP{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Il(this._hostTNode,this._hostLView)}get injector(){return new li(this._hostTNode,this._hostLView)}get parentInjector(){let e=$p(this._hostTNode,this._hostLView);if(XE(e)){let t=Yc(e,this._hostLView),r=Qc(e),i=t[de].data[r+8];return new li(i,t)}else return new li(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=YI(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Jt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=KI(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,WI(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!HR(e),a;if(s)a=t;else{let b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let c=s?e:new Ao(Dr(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let M=(s?l:this.parentInjector).get(jt,null);M&&(o=M)}let h=Dr(c.componentType??{}),p=KI(this._lContainer,h?.id??null),m=p?.firstChild??null,v=c.create(l,i,m,o);return this.insertImpl(v.hostView,a,WI(this._hostTNode,p)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(YR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ct],l=new eC(c,c[dn],c[Ct]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return zN(s,i,o,r),e.attachToViewContainerRef(),hE(qf(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=YI(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=dp(this._lContainer,t);r&&($c(qf(this._lContainer),t),CD(r[de],r))}detach(e){let t=this._adjustIndex(e,-1),r=dp(this._lContainer,t);return r&&$c(qf(this._lContainer),t)!=null?new gi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function YI(n){return n[zc]}function qf(n){return n[zc]||(n[zc]=[])}function EP(n,e){let t,r=e[n.index];return Yn(r)?t=r:(t=$D(r,e,null,n),e[n.index]=t,Sl(e,t)),CP(t,e,n,r),new eC(t,n,e)}function DP(n,e){let t=n[Bt],r=t.createComment(""),i=bn(e,n),o=bD(t,i);return el(t,o,r,cN(t,i),!1),r}var CP=SP,TP=()=>!1;function bP(n,e,t){return TP(n,e,t)}function SP(n,e,t,r){if(n[di])return;let i;t.type&8?i=Gn(r):i=DP(e,t),n[di]=i}var ZI=new Set;function og(n){ZI.has(n)||(ZI.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function AP(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(NP))}return o}return il.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(v=>{a[l+m]=v,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>PP(o));e.push(c)}),RP(),Promise.all(e).then(()=>{})}var il=new Map,xP=new Set;function RP(){let n=il;return il=new Map,n}function MP(){return il.size===0}function NP(n){return typeof n=="string"?n:n.text()}function PP(n){xP.delete(n)}var br=class{},wa=class{};var ol=class extends br{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new rl(this);let o=wE(e);this._bootstrapComponents=wD(o.bootstrap),this._r3Injector=cD(e,t,[{provide:br,useValue:this},{provide:bo,useValue:this.componentFactoryResolver},...r],Vt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},sl=class extends wa{constructor(e){super(),this.moduleType=e}create(e){return new ol(this.moduleType,e,[])}};function kP(n,e,t){return new ol(n,e,t,!1)}var wp=class extends br{constructor(e){super(),this.componentFactoryResolver=new rl(this),this.instance=null;let t=new ma([...e.providers,{provide:br,useValue:this},{provide:bo,useValue:this.componentFactoryResolver}],e.parent||Op(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Al(n,e,t=null){return new wp({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function tC(n){return FP(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function OP(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function FP(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function al(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function LP(n,e,t,r){let i=al(n,e,t);return al(n,e+1,r)||i}function VP(n){return(n.flags&32)===32}function jP(n,e,t,r,i,o,s,a,c){let l=e.consts,h=bl(e,n,4,s||null,a||null);jD(e,t,h,Kc(l,c)),Up(e,h);let p=h.tView=eg(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function BP(n,e,t,r,i,o,s,a,c,l){let h=t+Tr,p=e.firstCreatePass?jP(h,e,n,r,i,o,s,a,c):e.data[h];Ca(p,!1);let m=UP(e,n,p,t);jp()&&Jp(e,n,m,p),pi(m,n);let v=$D(m,n,m,p);return n[h]=v,Sl(n,v),bP(v,p,n),RE(p)&&FD(e,n,p),c!=null&&LD(n,p,l),p}function Ut(n,e,t,r,i,o,s,a){let c=lt(),l=Mo(),h=Kc(l.consts,o);return BP(c,l,n,e,t,r,i,h,s,a),Ut}var UP=$P;function $P(n,e,t,r){return Bp(!0),e[Bt].createComment("")}var yo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(yo||{}),nC=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Ip=class n{constructor(){this.ngZone=j(he),this.scheduler=j(To),this.errorHandler=j(Wn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[yo.EarlyRead,yo.Write,yo.MixedReadWrite,yo.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}},Ep=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function sg(n,e){!e?.injector&&UR(sg);let t=e?.injector??j(Xt);return ZM(t)?(og("NgAfterNextRender"),qP(n,t,e,!0)):zP}function HP(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function qP(n,e,t,r){let i=e.get(nC);i.impl??=e.get(Ip);let o=t?.phase??yo.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(qp):null,a=new Ep(i.impl,HP(n,o),r,s);return i.impl.register(a),a}var zP={destroy(){}};function GP(n,e,t,r){return al(n,qE(),t)?e+Bc(t)+r:Po}function WP(n,e,t,r,i,o){let s=sM(),a=LP(n,s,t,i);return uM(2),a?e+Bc(t)+r+Bc(i)+o:Po}function $t(n,e,t){let r=lt(),i=qE();if(al(r,i,e)){let o=Mo(),s=fM();bN(o,s,r,n,e,r[Bt],t,!1)}return $t}function JI(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";tg(n,t,o[s],s,r)}function KP(n,e,t,r,i,o){let s=e.consts,a=Kc(s,i),c=bl(e,n,2,r,a);return jD(e,t,c,Kc(s,o)),c.attrs!==null&&vp(c,c.attrs,!1),c.mergedAttrs!==null&&vp(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Ee(n,e,t,r){let i=lt(),o=Mo(),s=Tr+n,a=i[Bt],c=o.firstCreatePass?KP(s,o,i,e,t,r):o.data[s],l=QP(o,i,c,a,e,n);i[s]=l;let h=RE(c);return Ca(c,!0),xD(a,l,c),!VP(c)&&jp()&&Jp(o,i,l,c),JR()===0&&pi(l,i),XR(),h&&(FD(o,i,c),OD(o,c,i)),r!==null&&LD(i,c),Ee}function De(){let n=Sn();$E()?oM():(n=n.parent,Ca(n,!1));let e=n;nM(e)&&rM(),eM();let t=Mo();return t.firstCreatePass&&(Up(t,n),xE(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&vM(e)&&JI(t,e,lt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&_M(e)&&JI(t,e,lt(),e.stylesWithoutHost,!1),De}function Ce(n,e,t,r){return Ee(n,e,t,r),De(),Ce}var QP=(n,e,t,r,i,o)=>(Bp(!0),ID(r,i,pM()));var ul="en-US";var YP=ul;function ZP(n){typeof n=="string"&&(YP=n.toLowerCase().replace(/_/g,"-"))}function xe(n,e=""){let t=lt(),r=Mo(),i=n+Tr,o=r.firstCreatePass?bl(r,i,1,e,null):r.data[i],s=JP(r,t,o,e,n);t[i]=s,jp()&&Jp(r,t,s,o),Ca(o,!1)}var JP=(n,e,t,r,i)=>(Bp(!0),XM(e[Bt],r));function Pe(n,e,t){let r=lt(),i=GP(r,n,e,t);return i!==Po&&qD(r,wl(),i),Pe}function ag(n,e,t,r,i){let o=lt(),s=WP(o,n,e,t,r,i);return s!==Po&&qD(o,wl(),s),ag}var XP=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=DE(!1,t.type),i=r.length>0?Al([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(O(jt))})}}return n})();function rC(n){og("NgStandalone"),n.getStandaloneInjector=e=>e.get(XP).getOrCreateStandaloneInjector(n)}var Pc=null;function e1(n){Pc!==null&&(n.defaultEncapsulation!==Pc.defaultEncapsulation||n.preserveWhitespaces!==Pc.preserveWhitespaces)||(Pc=n)}var Sr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},iC=new Sr("18.2.13");var xl=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var ug=new W(""),ba=new W(""),Rl=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,cg||(t1(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(O(he),O(Ml),O(ba))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Ml=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return cg?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function t1(n){cg=n}var cg;function Sa(n){return!!n&&typeof n.then=="function"}function oC(n){return!!n&&typeof n.subscribe=="function"}var Nl=new W(""),sC=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=j(Nl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Sa(o))t.push(o);else if(oC(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),lg=new W("");function n1(){Kw(()=>{throw new X(600,!1)})}function r1(n){return n.isBoundToModule}var i1=10;function o1(n,e,t){try{let r=t();return Sa(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function aC(n,e){return Array.isArray(e)?e.reduce(aC,n):V(V({},n),e)}var Ar=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=j(BM),this.afterRenderManager=j(nC),this.zonelessEnabled=j(ig),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ze,this.afterTick=new ze,this.componentTypes=[],this.components=[],this.isStable=j(No).hasPendingTasks.pipe(G(t=>!t)),this._injector=j(jt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof nl;if(!this._injector.get(sC).done){let m=!i&&_E(t),v=!1;throw new X(405,v)}let s;i?s=t:s=this._injector.get(bo).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=r1(s)?void 0:this._injector.get(br),c=r||s.selector,l=s.create(Xt.NULL,[],c,a),h=l.location.nativeElement,p=l.injector.get(ug,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Vc(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new X(101,!1);let t=we(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,we(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(So,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<i1;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)s1(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>vl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Vc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(lg,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Vc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new X(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Vc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function s1(n,e,t,r){if(!t&&!vl(n))return;WD(n,e,t&&!r?0:1)}var Dp=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Pl=(()=>{class n{compileModuleSync(t){return new sl(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=wE(t),o=wD(i.declarations).reduce((s,a)=>{let c=Dr(a);return c&&s.push(new Ao(c)),s},[]);return new Dp(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),a1=new W("");function u1(n,e,t){let r=new sl(t);return Promise.resolve(r)}function XI(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var c1=(()=>{class n{constructor(){this.zone=j(he),this.changeDetectionScheduler=j(To),this.applicationRef=j(Ar)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function l1({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new he(Ae(V({},uC()),{scheduleInRootZone:t})),[{provide:he,useFactory:n},{provide:Io,multi:!0,useFactory:()=>{let r=j(c1,{optional:!0});return()=>r.initialize()}},{provide:Io,multi:!0,useFactory:()=>{let r=j(d1);return()=>{r.initialize()}}},e===!0?{provide:JD,useValue:!0}:[],{provide:XD,useValue:t??lD}]}function uC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var d1=(()=>{class n{constructor(){this.subscription=new $e,this.initialized=!1,this.zone=j(he),this.pendingTasks=j(No)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{he.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var h1=(()=>{class n{constructor(){this.appRef=j(Ar),this.taskService=j(No),this.ngZone=j(he),this.zonelessEnabled=j(ig),this.disableScheduling=j(JD,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new $e,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Jc):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(XD,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Xc||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?jI:dD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Jc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,jI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function f1(){return typeof $localize<"u"&&$localize.locale||ul}var dg=new W("",{providedIn:"root",factory:()=>j(dg,ae.Optional|ae.SkipSelf)||f1()});var cl=new W("");function kc(n){return!n.moduleRef}function p1(n){let e=kc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(he);return t.run(()=>{kc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Wn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),kc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(cl);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(cl);s.add(o),n.moduleRef.onDestroy(()=>{Vc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return o1(r,t,()=>{let o=e.get(sC);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(dg,ul);if(ZP(s||ul),kc(n)){let a=e.get(Ar);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return g1(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function g1(n,e){let t=n.injector.get(Ar);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new X(-403,!1);e.push(n)}var cC=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>jM(r?.ngZone,Ae(V({},uC({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[l1({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:To,useExisting:h1}],c=kP(t.moduleType,this.injector,a);return p1({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=aC({},r);return u1(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new X(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(cl,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(O(Xt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),fa=null,lC=new W("");function m1(n){if(fa&&!fa.get(lC,!1))throw new X(400,!1);n1(),fa=n;let e=n.get(cC);return _1(n),e}function hg(n,e,t=[]){let r=`Platform: ${e}`,i=new W(r);return(o=[])=>{let s=dC();if(!s||s.injector.get(lC,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):m1(y1(a,r))}return v1(i)}}function y1(n=[],e){return Xt.create({name:e,providers:[{provide:pl,useValue:"platform"},{provide:cl,useValue:new Set([()=>fa=null])},...n]})}function v1(n){let e=dC();if(!e)throw new X(401,!1);return e}function dC(){return fa?.get(cC)??null}function _1(n){n.get(Wp,null)?.forEach(t=>t())}function fg(){return!1}var Aa=(()=>{class n{static{this.__NG_ELEMENT_ID__=w1}}return n})();function w1(n){return I1(Sn(),lt(),(n&16)===16)}function I1(n,e,t){if(ml(n)&&!t){let r=Ro(n.index,e);return new gi(r,r)}else if(n.type&175){let r=e[Cn];return new gi(r,e)}return null}var Cp=class{constructor(){}supports(e){return tC(e)}create(e){return new Tp(e)}},E1=(n,e)=>e,Tp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||E1}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<eE(r,i,o)?t:r,a=eE(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=c-i;if(l!=h){for(let m=0;m<l;m++){let v=m<o.length?o[m]:o[m]=0,b=v+m;h<=b&&b<l&&(o[m]=v+1)}let p=s.previousIndex;o[p]=h-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!tC(e))throw new X(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,OP(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new bp(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new ll),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ll),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},bp=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Sp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},ll=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Sp,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function eE(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function tE(){return new pg([new Cp])}var pg=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:tE})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||tE()),deps:[[n,new Rp,new xo]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new X(901,!1)}}return n})();var hC=hg(null,"core",[]),fC=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(O(Ar))}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({})}}return n})();function pC(n){let e=Dr(n);if(!e)return null;let t=new Ao(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var _C=null;function yi(){return _C}function wC(n){_C??=n}var kl=class{};var Nt=new W(""),vg=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(S1),providedIn:"platform"})}}return n})(),IC=new W(""),S1=(()=>{class n extends vg{constructor(){super(),this._doc=j(Nt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return yi().getBaseHref(this._doc)}onPopState(t){let r=yi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=yi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function _g(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function gC(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Zn(n){return n&&n[0]!=="?"?"?"+n:n}var vi=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(wg),providedIn:"root"})}}return n})(),EC=new W(""),wg=(()=>{class n extends vi{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(Nt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return _g(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Zn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Zn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Zn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(vg),O(EC,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),DC=(()=>{class n extends vi{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=_g(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Zn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Zn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(vg),O(EC,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),ko=(()=>{class n{constructor(t){this._subject=new Dt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=R1(gC(mC(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Zn(r))}normalize(t){return n.stripTrailingSlash(x1(this._basePath,mC(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Zn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Zn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Zn}static{this.joinWithSlash=_g}static{this.stripTrailingSlash=gC}static{this.\u0275fac=function(r){return new(r||n)(O(vi))}}static{this.\u0275prov=H({token:n,factory:()=>A1(),providedIn:"root"})}}return n})();function A1(){return new ko(O(vi))}function x1(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function mC(n){return n.replace(/\/index.html$/,"")}function R1(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function CC(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var gg=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},en=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new gg(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),yC(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);yC(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Ze(Ta),Ze(rg),Ze(pg))}}static{this.\u0275dir=fl({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function yC(n,e){n.context.$implicit=e.item}var TC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({})}}return n})(),Ig="browser",M1="server";function N1(n){return n===Ig}function _i(n){return n===M1}var bC=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>N1(j(Mt))?new mg(j(Nt),window):new yg})}}return n})(),mg=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=P1(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function P1(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var yg=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Ol=class{};var Cg=class extends kl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Tg=class n extends Cg{static makeCurrent(){wC(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=O1();return t==null?null:F1(t)}resetBaseElement(){xa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return CC(document.cookie,e)}},xa=null;function O1(){return xa=xa||document.querySelector("base"),xa?xa.getAttribute("href"):null}function F1(n){return new URL(n,document.baseURI).pathname}var bg=class{addToWindow(e){Kn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new X(5103,!1);return o},Kn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Kn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Kn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Kn.frameworkStabilizers||(Kn.frameworkStabilizers=[]),Kn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?yi().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},L1=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Sg=new W(""),RC=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new X(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(O(Sg),O(he))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Fl=class{constructor(e){this._doc=e}},Eg="ng-app-id",MC=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=_i(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Eg}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Eg),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Eg,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(O(Nt),O(Dl),O(Kp,8),O(Mt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Dg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},xg=/%COMP%/g,NC="%COMP%",V1=`_nghost-${NC}`,j1=`_ngcontent-${NC}`,B1=!0,U1=new W("",{providedIn:"root",factory:()=>B1});function $1(n){return j1.replace(xg,n)}function H1(n){return V1.replace(xg,n)}function PC(n,e){return e.map(t=>t.replace(xg,n))}var SC=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=_i(a),this.defaultRenderer=new Ra(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Dn.ShadowDom&&(r=Ae(V({},r),{encapsulation:Dn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Ll?i.applyToHost(t):i instanceof Ma&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Dn.Emulated:o=new Ll(c,l,r,this.appId,h,s,a,p);break;case Dn.ShadowDom:return new Ag(c,l,t,r,s,a,this.nonce,p);default:o=new Ma(c,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(O(RC),O(MC),O(Dl),O(U1),O(Nt),O(Mt),O(he),O(Kp))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Ra=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Dg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(AC(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(AC(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new X(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Dg[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Dg[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(mi.DashCase|mi.Important)?e.style.setProperty(t,r,i&mi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&mi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=yi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function AC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Ag=class extends Ra{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=PC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ma=class extends Ra{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?PC(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ll=class extends Ma{constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=$1(l),this.hostAttr=H1(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},q1=(()=>{class n extends Fl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(O(Nt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),xC=["alt","control","meta","shift"],z1={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},G1={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},W1=(()=>{class n extends Fl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>yi().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),xC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=z1[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),xC.forEach(s=>{if(s!==i){let a=G1[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(O(Nt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function K1(){Tg.makeCurrent()}function Q1(){return new Wn}function Y1(){return vD(document),document}var Z1=[{provide:Mt,useValue:Ig},{provide:Wp,useValue:K1,multi:!0},{provide:Nt,useFactory:Y1,deps:[]}],kC=hg(hC,"browser",Z1),J1=new W(""),X1=[{provide:ba,useClass:bg,deps:[]},{provide:ug,useClass:Rl,deps:[he,Ml,ba]},{provide:Rl,useClass:Rl,deps:[he,Ml,ba]}],ek=[{provide:pl,useValue:"root"},{provide:Wn,useFactory:Q1,deps:[]},{provide:Sg,useClass:q1,multi:!0,deps:[Nt,he,Mt]},{provide:Sg,useClass:W1,multi:!0,deps:[Nt]},SC,MC,RC,{provide:So,useExisting:SC},{provide:Ol,useClass:L1,deps:[]},[]],OC=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Dl,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(O(J1,12))}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({providers:[...ek,...X1],imports:[TC,fC]})}}return n})();var FC=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(O(Nt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var oe="primary",Ga=Symbol("RouteTitle"),kg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Uo(n){return new kg(n)}function tk(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function nk(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!An(n[t],e[t]))return!1;return!0}function An(n,e){let t=n?Og(n):void 0,r=e?Og(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!KC(n[i],e[i]))return!1;return!0}function Og(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function KC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function QC(n){return n.length>0?n[n.length-1]:null}function Rr(n){return Rf(n)?n:Sa(n)?ve(Promise.resolve(n)):J(n)}var rk={exact:ZC,subset:JC},YC={exact:ik,subset:ok,ignored:()=>!0};function VC(n,e,t){return rk[t.paths](n.root,e.root,t.matrixParams)&&YC[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function ik(n,e){return An(n,e)}function ZC(n,e,t){if(!Ii(n.segments,e.segments)||!Bl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!ZC(n.children[r],e.children[r],t))return!1;return!0}function ok(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>KC(n[t],e[t]))}function JC(n,e,t){return XC(n,e,e.segments,t)}function XC(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ii(i,t)||e.hasChildren()||!Bl(i,t,r))}else if(n.segments.length===t.length){if(!Ii(n.segments,t)||!Bl(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!JC(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ii(n.segments,i)||!Bl(n.segments,i,r)||!n.children[oe]?!1:XC(n.children[oe],e,o,r)}}function Bl(n,e,t){return e.every((r,i)=>YC[t](n[i].parameters,r.parameters))}var Xn=class{constructor(e=new _e([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Uo(this.queryParams),this._queryParamMap}toString(){return uk.serialize(this)}},_e=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ul(this)}},wi=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Uo(this.parameters),this._parameterMap}toString(){return tT(this)}};function sk(n,e){return Ii(n,e)&&n.every((t,r)=>An(t.parameters,e[r].parameters))}function Ii(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function ak(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===oe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==oe&&(t=t.concat(e(i,r)))}),t}var Wa=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new $o,providedIn:"root"})}}return n})(),$o=class{parse(e){let t=new Lg(e);return new Xn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Na(e.root,!0)}`,r=dk(e.queryParams),i=typeof e.fragment=="string"?`#${ck(e.fragment)}`:"";return`${t}${r}${i}`}},uk=new $o;function Ul(n){return n.segments.map(e=>tT(e)).join("/")}function Na(n,e){if(!n.hasChildren())return Ul(n);if(e){let t=n.children[oe]?Na(n.children[oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==oe&&r.push(`${i}:${Na(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=ak(n,(r,i)=>i===oe?[Na(n.children[oe],!1)]:[`${i}:${Na(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[oe]!=null?`${Ul(n)}/${t[0]}`:`${Ul(n)}/(${t.join("//")})`}}function eT(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vl(n){return eT(n).replace(/%3B/gi,";")}function ck(n){return encodeURI(n)}function Fg(n){return eT(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $l(n){return decodeURIComponent(n)}function jC(n){return $l(n.replace(/\+/g,"%20"))}function tT(n){return`${Fg(n.path)}${lk(n.parameters)}`}function lk(n){return Object.entries(n).map(([e,t])=>`;${Fg(e)}=${Fg(t)}`).join("")}function dk(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Vl(t)}=${Vl(i)}`).join("&"):`${Vl(t)}=${Vl(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var hk=/^[^\/()?;#]+/;function Rg(n){let e=n.match(hk);return e?e[0]:""}var fk=/^[^\/()?;=#]+/;function pk(n){let e=n.match(fk);return e?e[0]:""}var gk=/^[^=?&#]+/;function mk(n){let e=n.match(gk);return e?e[0]:""}var yk=/^[^&#]+/;function vk(n){let e=n.match(yk);return e?e[0]:""}var Lg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new _e([],{}):new _e([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[oe]=new _e(e,t)),r}parseSegment(){let e=Rg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new X(4009,!1);return this.capture(e),new wi($l(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=pk(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Rg(this.remaining);i&&(r=i,this.capture(r))}e[$l(t)]=$l(r)}parseQueryParam(e){let t=mk(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=vk(this.remaining);s&&(r=s,this.capture(r))}let i=jC(t),o=jC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Rg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new X(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=oe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[oe]:new _e([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new X(4011,!1)}};function nT(n){return n.segments.length>0?new _e([],{[oe]:n}):n}function rT(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=rT(i);if(r===oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new _e(n.segments,e);return _k(t)}function _k(n){if(n.numberOfChildren===1&&n.children[oe]){let e=n.children[oe];return new _e(n.segments.concat(e.segments),e.children)}return n}function Va(n){return n instanceof Xn}function wk(n,e,t=null,r=null){let i=iT(n);return oT(i,e,t,r)}function iT(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new _e(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=nT(r);return e??i}function oT(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Mg(i,i,i,t,r);let o=Ik(e);if(o.toRoot())return Mg(i,i,new _e([],{}),t,r);let s=Ek(o,i,n),a=s.processChildren?Oa(s.segmentGroup,s.index,o.commands):aT(s.segmentGroup,s.index,o.commands);return Mg(i,s.segmentGroup,a,t,r)}function Hl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ja(n){return typeof n=="object"&&n!=null&&n.outlets}function Mg(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=sT(n,e,t);let a=nT(rT(s));return new Xn(a,o,i)}function sT(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=sT(o,e,t)}),new _e(n.segments,r)}var ql=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Hl(r[0]))throw new X(4003,!1);let i=r.find(ja);if(i&&i!==QC(r))throw new X(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Ik(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new ql(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new ql(t,e,r)}var Vo=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Ek(n,e,t){if(n.isAbsolute)return new Vo(e,!0,0);if(!t)return new Vo(e,!1,NaN);if(t.parent===null)return new Vo(t,!0,0);let r=Hl(n.commands[0])?0:1,i=t.segments.length-1+r;return Dk(t,i,n.numberOfDoubleDots)}function Dk(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new X(4005,!1);i=r.segments.length}return new Vo(r,!1,i-o)}function Ck(n){return ja(n[0])?n[0].outlets:{[oe]:n}}function aT(n,e,t){if(n??=new _e([],{}),n.segments.length===0&&n.hasChildren())return Oa(n,e,t);let r=Tk(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new _e(n.segments.slice(0,r.pathIndex),{});return o.children[oe]=new _e(n.segments.slice(r.pathIndex),n.children),Oa(o,0,i)}else return r.match&&i.length===0?new _e(n.segments,{}):r.match&&!n.hasChildren()?Vg(n,e,t):r.match?Oa(n,0,i):Vg(n,e,t)}function Oa(n,e,t){if(t.length===0)return new _e(n.segments,{});{let r=Ck(t),i={};if(Object.keys(r).some(o=>o!==oe)&&n.children[oe]&&n.numberOfChildren===1&&n.children[oe].segments.length===0){let o=Oa(n.children[oe],e,t);return new _e(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=aT(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new _e(n.segments,i)}}function Tk(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(ja(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!UC(c,l,s))return o;r+=2}else{if(!UC(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Vg(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(ja(o)){let c=bk(o.outlets);return new _e(r,c)}if(i===0&&Hl(t[0])){let c=n.segments[e];r.push(new wi(c.path,BC(t[0]))),i++;continue}let s=ja(o)?o.outlets[oe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Hl(a)?(r.push(new wi(s,BC(a))),i+=2):(r.push(new wi(s,{})),i++)}return new _e(r,{})}function bk(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Vg(new _e([],{}),0,r))}),e}function BC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function UC(n,e,t){return n==t.path&&An(e,t.parameters)}var Fa="imperative",st=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(st||{}),tn=class{constructor(e,t){this.id=e,this.url=t}},Ho=class extends tn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=st.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},er=class extends tn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=st.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},qt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(qt||{}),zl=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(zl||{}),Jn=class extends tn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=st.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},xr=class extends tn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=st.NavigationSkipped}},Ba=class extends tn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=st.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Gl=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=st.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jg=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=st.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bg=class extends tn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=st.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ug=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=st.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$g=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=st.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hg=class{constructor(e){this.route=e,this.type=st.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},qg=class{constructor(e){this.route=e,this.type=st.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},zg=class{constructor(e){this.snapshot=e,this.type=st.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gg=class{constructor(e){this.snapshot=e,this.type=st.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wg=class{constructor(e){this.snapshot=e,this.type=st.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Kg=class{constructor(e){this.snapshot=e,this.type=st.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wl=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=st.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ua=class{},qo=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Sk(n,e){return n.providers&&!n._injector&&(n._injector=Al(n.providers,e,`Route: ${n.path}`)),n._injector??e}function hn(n){return n.outlet||oe}function Ak(n,e){let t=n.filter(r=>hn(r)===e);return t.push(...n.filter(r=>hn(r)!==e)),t}function Ka(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Qg=class{get injector(){return Ka(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Qa(this.rootInjector),this.attachRef=null}},Qa=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Qg(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Kl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Yg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Yg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Zg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Zg(e,this._root).map(t=>t.value)}};function Yg(n,e){if(n===e.value)return e;for(let t of e.children){let r=Yg(n,t);if(r)return r}return null}function Zg(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Zg(n,t);if(r.length)return r.unshift(e),r}return[]}var Ht=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Lo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ql=class extends Kl{constructor(e,t){super(e),this.snapshot=t,sm(this,e)}toString(){return this.snapshot.toString()}};function uT(n){let e=xk(n),t=new ut([new wi("",{})]),r=new ut({}),i=new ut({}),o=new ut({}),s=new ut(""),a=new zo(t,r,o,s,i,oe,n,e.root);return a.snapshot=e.root,new Ql(new Ht(a,[]),e)}function xk(n){let e={},t={},r={},i="",o=new jo([],e,r,i,t,oe,n,null,{});return new Zl("",new Ht(o,[]))}var zo=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(G(l=>l[Ga]))??J(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(G(e=>Uo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(G(e=>Uo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Yl(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&lT(i)&&(r.resolve[Ga]=i.title),r}var jo=class{get title(){return this.data?.[Ga]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Uo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Uo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Zl=class extends Kl{constructor(e,t){super(t),this.url=e,sm(this,t)}toString(){return cT(this._root)}};function sm(n,e){e.value._routerState=n,e.children.forEach(t=>sm(n,t))}function cT(n){let e=n.children.length>0?` { ${n.children.map(cT).join(", ")} } `:"";return`${n.value}${e}`}function Ng(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,An(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),An(e.params,t.params)||n.paramsSubject.next(t.params),nk(e.url,t.url)||n.urlSubject.next(t.url),An(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Jg(n,e){let t=An(n.params,e.params)&&sk(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Jg(n.parent,e.parent))}function lT(n){return typeof n.title=="string"||n.title===null}var Rk=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new Dt,this.deactivateEvents=new Dt,this.attachEvents=new Dt,this.detachEvents=new Dt,this.parentContexts=j(Qa),this.location=j(Ta),this.changeDetector=j(Aa),this.inputBinder=j(nd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new X(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new X(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new X(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new X(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Xg(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=fl({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[yl]})}}return n})(),Xg=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===zo?this.route:e===Qa?this.childContexts:this.parent.get(e,t)}},nd=new W(""),$C=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=ua([r.queryParams,r.params,r.data]).pipe(He(([o,s,a],c)=>(a=V(V(V({},o),s),a),c===0?J(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=pC(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function Mk(n,e,t){let r=$a(n,e._root,t?t._root:void 0);return new Ql(r,e)}function $a(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Nk(n,e,t);return new Ht(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>$a(n,a)),s}}let r=Pk(e.value),i=e.children.map(o=>$a(n,o));return new Ht(r,i)}}function Nk(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return $a(n,r,i);return $a(n,r)})}function Pk(n){return new zo(new ut(n.url),new ut(n.params),new ut(n.queryParams),new ut(n.fragment),new ut(n.data),n.outlet,n.component,n)}var Ha=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},dT="ngNavigationCancelingError";function Jl(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Va(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=hT(!1,qt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function hT(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[dT]=!0,t.cancellationCode=e,t}function kk(n){return fT(n)&&Va(n.url)}function fT(n){return!!n&&n[dT]}var Ok=(n,e,t,r)=>G(i=>(new em(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),em=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ng(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Lo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Lo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Lo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Lo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Kg(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Gg(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Ng(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Ng(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Xl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Bo=class{constructor(e,t){this.component=e,this.route=t}};function Fk(n,e,t){let r=n._root,i=e?e._root:null;return Pa(r,i,t,[r.value])}function Lk(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Wo(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!oE(n)?n:e.get(n):r}function Pa(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Lo(e);return n.children.forEach(s=>{Vk(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>La(a,t.getContext(s),i)),i}function Vk(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=jk(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Xl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Pa(n,e,a?a.children:null,r,i):Pa(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Bo(a.outlet.component,s))}else s&&La(e,a,i),i.canActivateChecks.push(new Xl(r)),o.component?Pa(n,null,a?a.children:null,r,i):Pa(n,null,t,r,i);return i}function jk(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ii(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ii(n.url,e.url)||!An(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Jg(n,e)||!An(n.queryParams,e.queryParams);case"paramsChange":default:return!Jg(n,e)}}function La(n,e,t){let r=Lo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?La(s,e.children.getContext(o),t):La(s,null,t):La(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Bo(e.outlet.component,i)):t.canDeactivateChecks.push(new Bo(null,i)):t.canDeactivateChecks.push(new Bo(null,i))}function Ya(n){return typeof n=="function"}function Bk(n){return typeof n=="boolean"}function Uk(n){return n&&Ya(n.canLoad)}function $k(n){return n&&Ya(n.canActivate)}function Hk(n){return n&&Ya(n.canActivateChild)}function qk(n){return n&&Ya(n.canDeactivate)}function zk(n){return n&&Ya(n.canMatch)}function pT(n){return n instanceof Hn||n?.name==="EmptyError"}var jl=Symbol("INITIAL_VALUE");function Go(){return He(n=>ua(n.map(e=>e.pipe(qn(1),ui(jl)))).pipe(G(e=>{for(let t of e)if(t!==!0){if(t===jl)return jl;if(t===!1||Gk(t))return t}return!0}),ct(e=>e!==jl),qn(1)))}function Gk(n){return Va(n)||n instanceof Ha}function Wk(n,e){return Ye(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?J(Ae(V({},t),{guardsResult:!0})):Kk(s,r,i,n).pipe(Ye(a=>a&&Bk(a)?Qk(r,o,n,e):J(a)),G(a=>Ae(V({},t),{guardsResult:a})))})}function Kk(n,e,t,r){return ve(n).pipe(Ye(i=>eO(i.component,i.route,t,e,r)),Kt(i=>i!==!0,!0))}function Qk(n,e,t,r){return ve(e).pipe(si(i=>ho(Zk(i.route.parent,r),Yk(i.route,r),Xk(n,i.path,t),Jk(n,i.route,t))),Kt(i=>i!==!0,!0))}function Yk(n,e){return n!==null&&e&&e(new Wg(n)),J(!0)}function Zk(n,e){return n!==null&&e&&e(new zg(n)),J(!0)}function Jk(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return J(!0);let i=r.map(o=>Ac(()=>{let s=Ka(e)??t,a=Wo(o,s),c=$k(a)?a.canActivate(e,n):Tn(s,()=>a(e,n));return Rr(c).pipe(Kt())}));return J(i).pipe(Go())}function Xk(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Lk(s)).filter(s=>s!==null).map(s=>Ac(()=>{let a=s.guards.map(c=>{let l=Ka(s.node)??t,h=Wo(c,l),p=Hk(h)?h.canActivateChild(r,n):Tn(l,()=>h(r,n));return Rr(p).pipe(Kt())});return J(a).pipe(Go())}));return J(o).pipe(Go())}function eO(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return J(!0);let s=o.map(a=>{let c=Ka(e)??i,l=Wo(a,c),h=qk(l)?l.canDeactivate(n,e,t,r):Tn(c,()=>l(n,e,t,r));return Rr(h).pipe(Kt())});return J(s).pipe(Go())}function tO(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return J(!0);let o=i.map(s=>{let a=Wo(s,n),c=Uk(a)?a.canLoad(e,t):Tn(n,()=>a(e,t));return Rr(c)});return J(o).pipe(Go(),gT(r))}function gT(n){return Cf(nt(e=>{if(typeof e!="boolean")throw Jl(n,e)}),G(e=>e===!0))}function nO(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return J(!0);let o=i.map(s=>{let a=Wo(s,n),c=zk(a)?a.canMatch(e,t):Tn(n,()=>a(e,t));return Rr(c)});return J(o).pipe(Go(),gT(r))}var qa=class{constructor(e){this.segmentGroup=e||null}},za=class extends Error{constructor(e){super(),this.urlTree=e}};function Fo(n){return lo(new qa(n))}function rO(n){return lo(new X(4e3,!1))}function iO(n){return lo(hT(!1,qt.GuardRejected))}var tm=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return J(r);if(i.numberOfChildren>1||!i.children[oe])return rO(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:b,title:M}=i,N=Tn(o,()=>a({params:v,data:b,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,title:M}));if(N instanceof Xn)throw new za(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new za(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Xn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new _e(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new X(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},nm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function oO(n,e,t,r,i){let o=mT(n,e,t);return o.matched?(r=Sk(e,r),nO(r,e,t,i).pipe(G(s=>s===!0?o:V({},nm)))):J(o)}function mT(n,e,t){if(e.path==="**")return sO(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},nm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||tk)(t,n,e);if(!i)return V({},nm);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function sO(n){return{matched:!0,parameters:n.length>0?QC(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function HC(n,e,t,r){return t.length>0&&cO(n,t,r)?{segmentGroup:new _e(e,uO(r,new _e(t,n.children))),slicedSegments:[]}:t.length===0&&lO(n,t,r)?{segmentGroup:new _e(n.segments,aO(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new _e(n.segments,n.children),slicedSegments:t}}function aO(n,e,t,r){let i={};for(let o of t)if(rd(n,e,o)&&!r[hn(o)]){let s=new _e([],{});i[hn(o)]=s}return V(V({},r),i)}function uO(n,e){let t={};t[oe]=e;for(let r of n)if(r.path===""&&hn(r)!==oe){let i=new _e([],{});t[hn(r)]=i}return t}function cO(n,e,t){return t.some(r=>rd(n,e,r)&&hn(r)!==oe)}function lO(n,e,t){return t.some(r=>rd(n,e,r))}function rd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function dO(n,e,t){return e.length===0&&!n.children[t]}var rm=class{};function hO(n,e,t,r,i,o,s="emptyOnly"){return new im(n,e,t,r,i,s,o).recognize()}var fO=31,im=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new tm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new X(4002,`'${e.segmentGroup}'`)}recognize(){let e=HC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(G(({children:t,rootSnapshot:r})=>{let i=new Ht(r,t),o=new Zl("",i),s=wk(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new jo([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,t).pipe(G(r=>({children:r,rootSnapshot:t})),yr(r=>{if(r instanceof za)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof qa?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(G(s=>s instanceof Ht?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ve(o).pipe(si(s=>{let a=r.children[s],c=Ak(t,s);return this.processSegmentGroup(e,c,a,s,i)}),ai((s,a)=>(s.push(...a),s)),vr(null),kf(),Ye(s=>{if(s===null)return Fo(r);let a=yT(s);return pO(a),J(a)}))}processSegment(e,t,r,i,o,s,a){return ve(t).pipe(si(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(yr(l=>{if(l instanceof qa)return J(null);throw l}))),Kt(c=>!!c),yr(c=>{if(pT(c))return dO(r,i,o)?J(new rm):Fo(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return hn(r)!==s&&(s===oe||!rd(i,o,r))?Fo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Fo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=mT(t,i,o);if(!c)return Fo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>fO&&(this.allowRedirects=!1));let v=new jo(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,qC(i),hn(i),i.component??i._loadedComponent??null,i,zC(i)),b=Yl(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(b.params),v.data=Object.freeze(b.data);let M=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,M).pipe(Ye(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=oO(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(He(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(He(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=c,b=new jo(m,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,qC(r),hn(r),r.component??r._loadedComponent??null,r,zC(r)),M=Yl(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(M.params),b.data=Object.freeze(M.data);let{segmentGroup:N,slicedSegments:B}=HC(t,m,v,l);if(B.length===0&&N.hasChildren())return this.processChildren(h,l,N,b).pipe(G(F=>new Ht(b,F)));if(l.length===0&&B.length===0)return J(new Ht(b,[]));let q=hn(r)===o;return this.processSegment(h,l,N,B,q?oe:o,!0,b).pipe(G(F=>new Ht(b,F instanceof Ht?[F]:[])))}))):Fo(t)))}getChildConfig(e,t,r){return t.children?J({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?J({routes:t._loadedRoutes,injector:t._loadedInjector}):tO(e,t,r,this.urlSerializer).pipe(Ye(i=>i?this.configLoader.loadChildren(e,t).pipe(nt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):iO(t))):J({routes:[],injector:e})}};function pO(n){n.sort((e,t)=>e.value.outlet===oe?-1:t.value.outlet===oe?1:e.value.outlet.localeCompare(t.value.outlet))}function gO(n){let e=n.value.routeConfig;return e&&e.path===""}function yT(n){let e=[],t=new Set;for(let r of n){if(!gO(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=yT(r.children);e.push(new Ht(r.value,i))}return e.filter(r=>!t.has(r))}function qC(n){return n.data||{}}function zC(n){return n.resolve||{}}function mO(n,e,t,r,i,o){return Ye(s=>hO(n,e,t,r,s.extractedUrl,i,o).pipe(G(({state:a,tree:c})=>Ae(V({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function yO(n,e){return Ye(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return J(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of vT(c))s.add(l);let a=0;return ve(s).pipe(si(c=>o.has(c)?vO(c,r,n,e):(c.data=Yl(c,c.parent,n).resolve,J(void 0))),nt(()=>a++),fo(1),Ye(c=>a===s.size?J(t):Et))})}function vT(n){let e=n.children.map(t=>vT(t)).flat();return[n,...e]}function vO(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!lT(i)&&(o[Ga]=i.title),_O(o,n,e,r).pipe(G(s=>(n._resolvedData=s,n.data=Yl(n,n.parent,t).resolve,null)))}function _O(n,e,t,r){let i=Og(n);if(i.length===0)return J({});let o={};return ve(i).pipe(Ye(s=>wO(n[s],e,t,r).pipe(Kt(),nt(a=>{if(a instanceof Ha)throw Jl(new $o,a);o[s]=a}))),fo(1),Nf(o),yr(s=>pT(s)?Et:lo(s)))}function wO(n,e,t,r){let i=Ka(e)??r,o=Wo(n,i),s=o.resolve?o.resolve(e,t):Tn(i,()=>o(e,t));return Rr(s)}function Pg(n){return He(e=>{let t=n(e);return t?ve(t).pipe(G(()=>e)):J(e)})}var _T=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===oe);return r}getResolvedTitleForRoute(t){return t.data[Ga]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(IO),providedIn:"root"})}}return n})(),IO=(()=>{class n extends _T{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(O(FC))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Za=new W("",{providedIn:"root",factory:()=>({})}),EO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ot({type:n,selectors:[["ng-component"]],standalone:!0,features:[rC],decls:1,vars:0,template:function(r,i){r&1&&Ce(0,"router-outlet")},dependencies:[Rk],encapsulation:2})}}return n})();function am(n){let e=n.children&&n.children.map(am),t=e?Ae(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==oe&&(t.component=EO),t}var ed=new W(""),um=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=j(Pl)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return J(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Rr(t.loadComponent()).pipe(G(wT),nt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ca(()=>{this.componentLoaders.delete(t)})),i=new so(r,()=>new ze).pipe(oo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return J({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=DO(r,this.compiler,t,this.onLoadEndListener).pipe(ca(()=>{this.childrenLoaders.delete(r)})),s=new so(o,()=>new ze).pipe(oo());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function DO(n,e,t,r){return Rr(n.loadChildren()).pipe(G(wT),Ye(i=>i instanceof wa||Array.isArray(i)?J(i):ve(e.compileModuleAsync(i))),G(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(ed,[],{optional:!0,self:!0}).flat()),{routes:s.map(am),injector:o}}))}function CO(n){return n&&typeof n=="object"&&"default"in n}function wT(n){return CO(n)?n.default:n}var cm=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(TO),providedIn:"root"})}}return n})(),TO=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),IT=new W(""),ET=new W("");function bO(n,e,t){let r=n.get(ET),i=n.get(Nt);return n.get(he).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),SO(n))),{onViewTransitionCreated:c}=r;return c&&Tn(n,()=>c({transition:a,from:e,to:t})),s})}function SO(n){return new Promise(e=>{sg({read:()=>setTimeout(e)},{injector:n})})}var AO=new W(""),lm=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ze,this.transitionAbortSubject=new ze,this.configLoader=j(um),this.environmentInjector=j(jt),this.urlSerializer=j(Wa),this.rootContexts=j(Qa),this.location=j(ko),this.inputBindingEnabled=j(nd,{optional:!0})!==null,this.titleStrategy=j(_T),this.options=j(Za,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=j(cm),this.createViewTransition=j(IT,{optional:!0}),this.navigationErrorHandler=j(AO,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>J(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Hg(i)),r=i=>this.events.next(new qg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Ae(V(V({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new ut({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Fa,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ct(o=>o.id!==0),G(o=>Ae(V({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),He(o=>{let s=!1,a=!1;return J(o).pipe(He(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",qt.SupersededByNewNavigation),Et;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Ae(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new xr(c.id,this.urlSerializer.serialize(c.rawUrl),p,zl.IgnoredSameUrlNavigation)),c.resolve(!1),Et}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return J(c).pipe(He(p=>{let m=this.transitions?.getValue();return this.events.next(new Ho(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Et:Promise.resolve(p)}),mO(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),nt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Ae(V({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Gl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:v,restoredState:b,extras:M}=c,N=new Ho(p,this.urlSerializer.serialize(m),v,b);this.events.next(N);let B=uT(this.rootComponentType).snapshot;return this.currentTransition=o=Ae(V({},c),{targetSnapshot:B,urlAfterRedirects:m,extras:Ae(V({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,J(o)}else{let p="";return this.events.next(new xr(c.id,this.urlSerializer.serialize(c.extractedUrl),p,zl.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Et}}),nt(c=>{let l=new jg(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),G(c=>(this.currentTransition=o=Ae(V({},c),{guards:Fk(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),Wk(this.environmentInjector,c=>this.events.next(c)),nt(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Jl(this.urlSerializer,c.guardsResult);let l=new Bg(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),ct(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",qt.GuardRejected),!1)),Pg(c=>{if(c.guards.canActivateChecks.length)return J(c).pipe(nt(l=>{let h=new Ug(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),He(l=>{let h=!1;return J(l).pipe(yO(this.paramsInheritanceStrategy,this.environmentInjector),nt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",qt.NoDataFromResolver)}}))}),nt(l=>{let h=new $g(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Pg(c=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(nt(m=>{h.component=m}),G(()=>{})));for(let m of h.children)p.push(...l(m));return p};return ua(l(c.targetSnapshot.root)).pipe(vr(null),qn(1))}),Pg(()=>this.afterPreactivation()),He(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?ve(h).pipe(G(()=>o)):J(o)}),G(c=>{let l=Mk(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=Ae(V({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),nt(()=>{this.events.next(new Ua)}),Ok(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),qn(1),nt({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new er(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Ff(this.transitionAbortSubject.pipe(nt(c=>{throw c}))),ca(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",qt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),yr(c=>{if(a=!0,fT(c))this.events.next(new Jn(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),kk(c)?this.events.next(new qo(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Ba(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let h=Tn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Ha){let{message:p,cancellationCode:m}=Jl(this.urlSerializer,h);this.events.next(new Jn(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new qo(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(c);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Et}))}))}cancelNavigationTransition(t,r,i){let o=new Jn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function xO(n){return n!==Fa}var RO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(MO),providedIn:"root"})}}return n})(),om=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},MO=(()=>{class n extends om{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Hp(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),DT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(NO),providedIn:"root"})}}return n})(),NO=(()=>{class n extends DT{constructor(){super(...arguments),this.location=j(ko),this.urlSerializer=j(Wa),this.options=j(Za,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=j(cm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Xn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=uT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Ho)this.stateMemento=this.createStateMemento();else if(t instanceof xr)this.rawUrlTree=r.initialUrl;else if(t instanceof Gl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Ua?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Jn&&(t.code===qt.GuardRejected||t.code===qt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Ba?this.restoreHistory(r,!0):t instanceof er&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Xn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=V(V({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Hp(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ka=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(ka||{});function CT(n,e){n.events.pipe(ct(t=>t instanceof er||t instanceof Jn||t instanceof Ba||t instanceof xr),G(t=>t instanceof er||t instanceof xr?ka.COMPLETE:(t instanceof Jn?t.code===qt.Redirect||t.code===qt.SupersededByNewNavigation:!1)?ka.REDIRECTING:ka.FAILED),ct(t=>t!==ka.REDIRECTING),qn(1)).subscribe(()=>{e()})}function PO(n){throw n}var kO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},OO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ei=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=j(xl),this.stateManager=j(DT),this.options=j(Za,{optional:!0})||{},this.pendingTasks=j(No),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=j(lm),this.urlSerializer=j(Wa),this.location=j(ko),this.urlHandlingStrategy=j(cm),this._events=new ze,this.errorHandler=this.options.errorHandler||PO,this.navigated=!1,this.routeReuseStrategy=j(RO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=j(ed,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!j(nd,{optional:!0}),this.eventsSubscription=new $e,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Jn&&r.code!==qt.Redirect&&r.code!==qt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof er)this.navigated=!0;else if(r instanceof qo){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||xO(i.source)},s);this.scheduleNavigation(a,Fa,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}LO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Fa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=V({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(am),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=iT(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return oT(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Va(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Fa,null,r)}navigate(t,r={skipLocationChange:!1}){return FO(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},kO):r===!1?i=V({},OO):i=r,Va(t))return VC(this.currentUrlTree,t,i);let o=this.parseUrl(t);return VC(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,c=m});let h=this.pendingTasks.add();return CT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function FO(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new X(4008,!1)}function LO(n){return!(n instanceof Ua)&&!(n instanceof qo)}var td=class{};var VO=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(ct(t=>t instanceof er),si(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Al(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ve(i).pipe(mr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=J(null);let o=i.pipe(Ye(s=>s===null?J(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return ve([o,s]).pipe(mr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(O(Ei),O(Pl),O(jt),O(td),O(um))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),TT=new W(""),jO=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ho?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof er?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof xr&&t.code===zl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Wl&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Wl(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){MD()}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function BO(n){return n.routerState.root}function Ja(n,e){return{\u0275kind:n,\u0275providers:e}}function UO(){let n=j(Xt);return e=>{let t=n.get(Ar);if(e!==t.components[0])return;let r=n.get(Ei),i=n.get(bT);n.get(dm)===1&&r.initialNavigation(),n.get(ST,null,ae.Optional)?.setUpPreloading(),n.get(TT,null,ae.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var bT=new W("",{factory:()=>new ze}),dm=new W("",{providedIn:"root",factory:()=>1});function $O(){return Ja(2,[{provide:dm,useValue:0},{provide:Nl,multi:!0,deps:[Xt],useFactory:e=>{let t=e.get(IC,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Ei),o=e.get(bT);CT(i,()=>{r(!0)}),e.get(lm).afterPreactivation=()=>(r(!0),o.closed?J(void 0):o),i.initialNavigation()}))}}])}function HO(){return Ja(3,[{provide:Nl,multi:!0,useFactory:()=>{let e=j(Ei);return()=>{e.setUpLocationChangeListener()}}},{provide:dm,useValue:2}])}var ST=new W("");function qO(n){return Ja(0,[{provide:ST,useExisting:VO},{provide:td,useExisting:n}])}function zO(){return Ja(8,[$C,{provide:nd,useExisting:$C}])}function GO(n){let e=[{provide:IT,useValue:bO},{provide:ET,useValue:V({skipNextTransition:!!n?.skipInitialTransition},n)}];return Ja(9,e)}var GC=new W("ROUTER_FORROOT_GUARD"),WO=[ko,{provide:Wa,useClass:$o},Ei,Qa,{provide:zo,useFactory:BO,deps:[Ei]},um,[]],hm=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[WO,[],{provide:ed,multi:!0,useValue:t},{provide:GC,useFactory:ZO,deps:[[Ei,new xo,new Rp]]},{provide:Za,useValue:r||{}},r?.useHash?QO():YO(),KO(),r?.preloadingStrategy?qO(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?JO(r):[],r?.bindToComponentInputs?zO().\u0275providers:[],r?.enableViewTransitions?GO().\u0275providers:[],XO()]}}static forChild(t){return{ngModule:n,providers:[{provide:ed,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(O(GC,8))}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({})}}return n})();function KO(){return{provide:TT,useFactory:()=>{let n=j(bC),e=j(he),t=j(Za),r=j(lm),i=j(Wa);return t.scrollOffset&&n.setOffset(t.scrollOffset),new jO(i,r,n,e,t)}}}function QO(){return{provide:vi,useClass:DC}}function YO(){return{provide:vi,useClass:wg}}function ZO(n){return"guarded"}function JO(n){return[n.initialNavigation==="disabled"?HO().\u0275providers:[],n.initialNavigation==="enabledBlocking"?$O().\u0275providers:[]]}var WC=new W("");function XO(){return[{provide:WC,useFactory:UO},{provide:lg,multi:!0,useExisting:WC}]}var eF=[],AT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({imports:[hm.forRoot(eF),hm]})}}return n})();var id=class{constructor(){this.name="name",this.goalLife="goal",this.photoUrl="photo",this.email="email@domain.com",this.phoneNumber="999-999-9999",this.location="city, country",this.socialNetwork="@facebook"}};var tF="firebase",nF="10.14.1";gr(tF,nF,"app");var Xa=new Sr("ANGULARFIRE2_VERSION");var rF=(n,e)=>{let t=e?[e]:qw(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Di=class{constructor(){return rF(iF)}},iF="app-check";function fm(){}var od=class{zone;delegate;constructor(e,t=Af){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},pm=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fm,{},fm,fm)),t.pipe(nt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},sd=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new od(Zone.current)),this.insideAngular=t.run(()=>new od(Zone.current,aa)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(O(he))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oF(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Pt(n){return sF(oF())(n)}function sF(n){return function(t){return t=t.lift(new pm(n.ngZone)),t.pipe(un(n.outsideAngular),Wt(n.insideAngular))}}var cF=new Map,lF={activated:!1,tokenObservers:[]},dF={initialized:!1,enabled:!1};function fn(n){return cF.get(n)||Object.assign({},lF)}function kT(){return dF}var hF="https://content-firebaseappcheck.googleapis.com/v1";var fF="exchangeDebugToken",RT={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Jz=24*60*60*1e3;var mm=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return R(this,null,function*(){this.stop();try{this.pending=new af,this.pending.promise.catch(t=>{}),yield pF(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new af,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function pF(n){return new Promise(e=>{setTimeout(e,n)})}var gF={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Mr=new $w("appCheck","AppCheck",gF);function OT(n){if(!fn(n).activated)throw Mr.create("use-before-activation",{appName:n.name})}function FT(r,i){return R(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(v){throw Mr.create("fetch-network-error",{originalErrorMessage:v?.message})}if(c.status!==200)throw Mr.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(v){throw Mr.create("fetch-parse-error",{originalErrorMessage:v?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Mr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function LT(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${hF}/projects/${t}/apps/${r}:${fF}?key=${i}`,body:{debug_token:e}}}var mF="firebase-app-check-database",yF=1,ym="firebase-app-check-store";var ad=null;function vF(){return ad||(ad=new Promise((n,e)=>{try{let t=indexedDB.open(mF,yF);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Mr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(ym,{keyPath:"compositeKey"})}}}catch(t){e(Mr.create("storage-open",{originalErrorMessage:t?.message}))}}),ad)}function _F(n,e){return wF(IF(n),e)}function wF(n,e){return R(this,null,function*(){let r=(yield vF()).transaction(ym,"readwrite"),o=r.objectStore(ym).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Mr.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function IF(n){return`${n.options.appId}-${n.name}`}var vm=new uc("@firebase/app-check");function gm(n,e){return ac()?_F(n,e).catch(t=>{vm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function VT(){return kT().enabled}function jT(){return R(this,null,function*(){let n=kT();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var EF={error:"UNKNOWN_ERROR"};function DF(n){return jw.encodeString(JSON.stringify(n),!1)}function _m(n,e=!1){return R(this,null,function*(){let t=n.app;OT(t);let r=fn(t),i=r.token,o;if(i&&!eu(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(eu(c)?i=c:yield gm(t,void 0))}if(!e&&i&&eu(i))return{token:i.token};let s=!1;if(VT()){r.exchangeTokenPromise||(r.exchangeTokenPromise=FT(LT(t,yield jT()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield gm(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield fn(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?vm.warn(c.message):vm.error(c),o=c}let a;return i?o?eu(i)?a={token:i.token,internalError:o}:a=NT(o):(a={token:i.token},r.token=i,yield gm(t,i)):a=NT(o),s&&SF(t,a),a})}function CF(n){return R(this,null,function*(){let e=n.app;OT(e);let{provider:t}=fn(e);if(VT()){let r=yield jT(),{token:i}=yield FT(LT(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function TF(n,e,t,r){let{app:i}=n,o=fn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&eu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),MT(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>MT(n))}function BT(n,e){let t=fn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function MT(n){let{app:e}=n,t=fn(e),r=t.tokenRefresher;r||(r=bF(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function bF(n){let{app:e}=n;return new mm(()=>R(this,null,function*(){let t=fn(e),r;if(t.token?r=yield _m(n,!0):r=yield _m(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=fn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},RT.RETRIAL_MIN_WAIT,RT.RETRIAL_MAX_WAIT)}function SF(n,e){let t=fn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function eu(n){return n.expireTimeMillis-Date.now()>0}function NT(n){return{token:DF(EF),error:n}}var wm=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=fn(this.app);for(let t of e)BT(this.app,t.next);return Promise.resolve()}};function AF(n,e){return new wm(n,e)}function xF(n){return{getToken:e=>_m(n,e),getLimitedUseToken:()=>CF(n),addTokenListener:e=>TF(n,"INTERNAL",e),removeTokenListener:e=>BT(n.app,e)}}var RF="@firebase/app-check",MF="0.8.8";var NF="app-check",PT="app-check-internal";function PF(){ra(new ni(NF,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return AF(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(PT).initialize()})),ra(new ni(PT,n=>{let e=n.getProvider("app-check").getImmediate();return xF(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),gr(RF,MF)}PF();var kF=["localhost","0.0.0.0","127.0.0.1"],l9=typeof window<"u"&&kF.includes(window.location.hostname);var OF="firebase",FF="10.14.1";Lt.registerVersion(OF,FF,"app-compat");var LF=["ngOnDestroy"],HT=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(LF.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var ud=class{constructor(e){return e}},Ko=new W("angularfire2.app.options"),Qo=new W("angularfire2.app.name");function tu(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Lt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Lt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;VF("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new ud(s)}var VF=(n,...e)=>{fg()&&typeof console<"u"&&console[n](...e)},jF={provide:ud,useFactory:tu,deps:[Ko,he,[new xo,Qo]]},qT=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Ko,useValue:t},{provide:Qo,useValue:r}]}}constructor(t){Lt.registerVersion("angularfire",Xa.full,"core"),Lt.registerVersion("angularfire",Xa.full,"app-compat"),Lt.registerVersion("angular",iC.full,t.toString())}static \u0275fac=function(r){return new(r||n)(O(Mt))};static \u0275mod=bt({type:n});static \u0275inj=Tt({providers:[jF]})}return n})();function cd(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return BF(i,s)||($T("error",`${e} was already initialized on the ${t} Firebase App with different settings.${UF?" You may need to reload as Firebase is not HMR aware.":""}`),$T("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function BF(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var UF=typeof module<"u"&&!!module.hot,$T=(n,...e)=>{fg()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Im=new W("angularfire2.auth.use-emulator"),Em=new W("angularfire2.auth.settings"),Dm=new W("angularfire2.auth.tenant-id"),Cm=new W("angularfire2.auth.langugage-code"),Tm=new W("angularfire2.auth.use-device-language"),bm=new W("angularfire.auth.persistence"),Sm=(n,e,t,r,i,o,s,a)=>cd(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))c.settings[l]=h;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),zT=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,h,p,m,v){let b=new ze,M=J(void 0).pipe(Wt(s.outsideAngular),He(()=>o.runOutsideAngular(()=>import("./chunk-DT56ZVVI.js"))),G(()=>tu(t,o,r)),G(N=>Sm(N,o,a,l,h,p,c,m)),Rc({bufferSize:1,refCount:!1}));if(_i(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=J(null);else{M.pipe(Kt()).subscribe();let N=M.pipe(He(F=>F.getRedirectResult().then(Y=>Y,()=>null)),Pt,Rc({bufferSize:1,refCount:!1})),B=M.pipe(He(F=>new le(Y=>({unsubscribe:o.runOutsideAngular(()=>F.onAuthStateChanged(ee=>Y.next(ee),ee=>Y.error(ee),()=>Y.complete()))})))),q=M.pipe(He(F=>new le(Y=>({unsubscribe:o.runOutsideAngular(()=>F.onIdTokenChanged(ee=>Y.next(ee),ee=>Y.error(ee),()=>Y.complete()))}))));this.authState=N.pipe(Mc(B),un(s.outsideAngular),Wt(s.insideAngular)),this.user=N.pipe(Mc(q),un(s.outsideAngular),Wt(s.insideAngular)),this.idToken=this.user.pipe(He(F=>F?ve(F.getIdToken()):J(null))),this.idTokenResult=this.user.pipe(He(F=>F?ve(F.getIdTokenResult()):J(null))),this.credential=Mf(N,b,this.authState.pipe(ct(F=>!F))).pipe(G(F=>F?.user?F:null),un(s.outsideAngular),Wt(s.insideAngular))}return HT(this,M,o,{spy:{apply:(N,B,q)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&q.then(F=>b.next(F))}}})}static \u0275fac=function(r){return new(r||n)(O(Ko),O(Qo,8),O(Mt),O(he),O(sd),O(Im,8),O(Em,8),O(Dm,8),O(Cm,8),O(Tm,8),O(bm,8),O(Di,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var GT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},WT={};var Nr,Am;(function(){var n;function e(I,y){function w(){}w.prototype=y.prototype,I.D=y.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(E,D,T){for(var _=Array(arguments.length-2),jn=2;jn<arguments.length;jn++)_[jn-2]=arguments[jn];return y.prototype[D].apply(E,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,y,w){w||(w=0);var E=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)E[D]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(D=0;16>D;++D)E[D]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=I.g[0],w=I.g[1],D=I.g[2];var T=I.g[3],_=y+(T^w&(D^T))+E[0]+3614090360&4294967295;y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[1]+3905402710&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[2]+606105819&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[3]+3250441966&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[4]+4118548399&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[5]+1200080426&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[6]+2821735955&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[7]+4249261313&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[8]+1770035416&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[9]+2336552879&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[10]+4294925233&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[11]+2304563134&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[12]+1804603682&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[13]+4254626195&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[14]+2792965006&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[15]+1236535329&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(D^T&(w^D))+E[1]+4129170786&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[6]+3225465664&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[11]+643717713&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[0]+3921069994&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[5]+3593408605&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[10]+38016083&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[15]+3634488961&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[4]+3889429448&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[9]+568446438&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[14]+3275163606&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[3]+4107603335&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[8]+1163531501&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[13]+2850285829&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[2]+4243563512&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[7]+1735328473&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[12]+2368359562&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(w^D^T)+E[5]+4294588738&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[8]+2272392833&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[11]+1839030562&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[14]+4259657740&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[1]+2763975236&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[4]+1272893353&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[7]+4139469664&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[10]+3200236656&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[13]+681279174&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[0]+3936430074&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[3]+3572445317&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[6]+76029189&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[9]+3654602809&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[12]+3873151461&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[15]+530742520&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[2]+3299628645&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(D^(w|~T))+E[0]+4096336452&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[7]+1126891415&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[14]+2878612391&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[5]+4237533241&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[12]+1700485571&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[3]+2399980690&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[10]+4293915773&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[1]+2240044497&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[8]+1873313359&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[15]+4264355552&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[6]+2734768916&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[13]+1309151649&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[4]+4149444226&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[11]+3174756917&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[2]+718787259&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var w=y-this.blockSize,E=this.B,D=this.h,T=0;T<y;){if(D==0)for(;T<=w;)i(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<y;)if(E[D++]=I.charCodeAt(T++),D==this.blockSize){i(this,E),D=0;break}}else for(;T<y;)if(E[D++]=I[T++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var w=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=w&255,w/=256;for(this.u(I),I=Array(16),y=w=0;4>y;++y)for(var E=0;32>E;E+=8)I[w++]=this.g[y]>>>E&255;return I};function o(I,y){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=y(I)}function s(I,y){this.h=y;for(var w=[],E=!0,D=I.length-1;0<=D;D--){var T=I[D]|0;E&&T==y||(w[D]=T,E=!1)}this.g=w}var a={};function c(I){return-128<=I&&128>I?o(I,function(y){return new s([y|0],0>y?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return N(l(-I));for(var y=[],w=1,E=0;I>=w;E++)y[E]=I/w|0,w*=4294967296;return new s(y,0)}function h(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return N(h(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(y,8)),E=p,D=0;D<I.length;D+=8){var T=Math.min(8,I.length-D),_=parseInt(I.substring(D,D+T),y);8>T?(T=l(Math.pow(y,T)),E=E.j(T).add(l(_))):(E=E.j(w),E=E.add(l(_)))}return E}var p=c(0),m=c(1),v=c(16777216);n=s.prototype,n.m=function(){if(M(this))return-N(this).m();for(var I=0,y=1,w=0;w<this.g.length;w++){var E=this.i(w);I+=(0<=E?E:4294967296+E)*y,y*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(M(this))return"-"+N(this).toString(I);for(var y=l(Math.pow(I,6)),w=this,E="";;){var D=Y(w,y).g;w=B(w,D.j(y));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=D,b(w))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function M(I){return I.h==-1}n.l=function(I){return I=B(this,I),M(I)?-1:b(I)?0:1};function N(I){for(var y=I.g.length,w=[],E=0;E<y;E++)w[E]=~I.g[E];return new s(w,~I.h).add(m)}n.abs=function(){return M(this)?N(this):this},n.add=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0,D=0;D<=y;D++){var T=E+(this.i(D)&65535)+(I.i(D)&65535),_=(T>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);E=_>>>16,T&=65535,_&=65535,w[D]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function B(I,y){return I.add(N(y))}n.j=function(I){if(b(this)||b(I))return p;if(M(this))return M(I)?N(this).j(N(I)):N(N(this).j(I));if(M(I))return N(this.j(N(I)));if(0>this.l(v)&&0>I.l(v))return l(this.m()*I.m());for(var y=this.g.length+I.g.length,w=[],E=0;E<2*y;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<I.g.length;D++){var T=this.i(E)>>>16,_=this.i(E)&65535,jn=I.i(D)>>>16,Ls=I.i(D)&65535;w[2*E+2*D]+=_*Ls,q(w,2*E+2*D),w[2*E+2*D+1]+=T*Ls,q(w,2*E+2*D+1),w[2*E+2*D+1]+=_*jn,q(w,2*E+2*D+1),w[2*E+2*D+2]+=T*jn,q(w,2*E+2*D+2)}for(E=0;E<y;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=y;E<2*y;E++)w[E]=0;return new s(w,0)};function q(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function F(I,y){this.g=I,this.h=y}function Y(I,y){if(b(y))throw Error("division by zero");if(b(I))return new F(p,p);if(M(I))return y=Y(N(I),y),new F(N(y.g),N(y.h));if(M(y))return y=Y(I,N(y)),new F(N(y.g),y.h);if(30<I.g.length){if(M(I)||M(y))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=y;0>=E.l(I);)w=ee(w),E=ee(E);var D=Z(w,1),T=Z(E,1);for(E=Z(E,2),w=Z(w,2);!b(E);){var _=T.add(E);0>=_.l(I)&&(D=D.add(w),T=_),E=Z(E,1),w=Z(w,1)}return y=B(I,D.j(y)),new F(D,y)}for(D=p;0<=I.l(y);){for(w=Math.max(1,Math.floor(I.m()/y.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(w),_=T.j(y);M(_)||0<_.l(I);)w-=E,T=l(w),_=T.j(y);b(T)&&(T=m),D=D.add(T),I=B(I,_)}return new F(D,I)}n.A=function(I){return Y(this,I).h},n.and=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)&I.i(E);return new s(w,this.h&I.h)},n.or=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)|I.i(E);return new s(w,this.h|I.h)},n.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)^I.i(E);return new s(w,this.h^I.h)};function ee(I){for(var y=I.g.length+1,w=[],E=0;E<y;E++)w[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(w,I.h)}function Z(I,y){var w=y>>5;y%=32;for(var E=I.g.length-w,D=[],T=0;T<E;T++)D[T]=0<y?I.i(T+w)>>>y|I.i(T+w+1)<<32-y:I.i(T+w);return new s(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Am=WT.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Nr=WT.Integer=s}).apply(typeof GT<"u"?GT:typeof self<"u"?self:typeof window<"u"?window:{});var ld=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tr={};var xm,HF,Yo,Rm,nu,dd,Mm,Nm,Pm;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ld=="object"&&ld];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var C=u[g];if(!(C in f))break e;f=f[C]}u=u[u.length-1],g=f[u],d=d(g),d!=g&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function o(u,d){u instanceof String&&(u+="");var f=0,g=!1,C={next:function(){if(!g&&f<u.length){var A=f++;return{value:d(A,u[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(u){return u||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),u.apply(d,C)}}return function(){return u.apply(d,arguments)}}function m(u,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function b(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(g,C,A){for(var L=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)L[Te-2]=arguments[Te];return d.prototype[C].apply(g,L)}}function M(u){let d=u.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=u[g];return f}return[]}function N(u,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(c(g)){let C=u.length||0,A=g.length||0;u.length=C+A;for(let L=0;L<A;L++)u[C+L]=g[L]}else u.push(g)}}class B{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function q(u){return/^[\s\xa0]*$/.test(u)}function F(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function Y(u){return Y[" "](u),u}Y[" "]=function(){};var ee=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function Z(u,d,f){for(let g in u)d.call(f,u[g],g,u)}function I(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function y(u){let d={};for(let f in u)d[f]=u[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)u[f]=g[f];for(let A=0;A<w.length;A++)f=w[A],Object.prototype.hasOwnProperty.call(g,f)&&(u[f]=g[f])}}function D(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function T(u){a.setTimeout(()=>{throw u},0)}function _(){var u=kh;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class jn{constructor(){this.h=this.g=null}add(d,f){let g=Ls.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ls=new B(()=>new $A,u=>u.reset());class $A{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Vs,js=!1,kh=new jn,O_=()=>{let u=a.Promise.resolve(void 0);Vs=()=>{u.then(HA)}};var HA=()=>{for(var u;u=_();){try{u.h.call(u.g)}catch(f){T(f)}var d=Ls;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}js=!1};function dr(){this.s=this.s,this.C=this.C}dr.prototype.s=!1,dr.prototype.ma=function(){this.s||(this.s=!0,this.N())},dr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ft(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}ft.prototype.h=function(){this.defaultPrevented=!0};var qA=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function Bs(u,d){if(ft.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(ee){e:{try{Y(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:zA[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Bs.aa.h.call(this)}}b(Bs,ft);var zA={2:"touch",3:"pen",4:"mouse"};Bs.prototype.h=function(){Bs.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Us="closure_listenable_"+(1e6*Math.random()|0),GA=0;function WA(u,d,f,g,C){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++GA,this.da=this.fa=!1}function Hu(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function qu(u){this.src=u,this.g={},this.h=0}qu.prototype.add=function(u,d,f,g,C){var A=u.toString();u=this.g[A],u||(u=this.g[A]=[],this.h++);var L=Fh(u,d,g,C);return-1<L?(d=u[L],f||(d.fa=!1)):(d=new WA(d,this.src,A,!!g,C),d.fa=f,u.push(d)),d};function Oh(u,d){var f=d.type;if(f in u.g){var g=u.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(Hu(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function Fh(u,d,f,g){for(var C=0;C<u.length;++C){var A=u[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var Lh="closure_lm_"+(1e6*Math.random()|0),Vh={};function F_(u,d,f,g,C){if(g&&g.once)return V_(u,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)F_(u,d[A],f,g,C);return null}return f=$h(f),u&&u[Us]?u.K(d,f,l(g)?!!g.capture:!!g,C):L_(u,d,f,!1,g,C)}function L_(u,d,f,g,C,A){if(!d)throw Error("Invalid event type");var L=l(C)?!!C.capture:!!C,Te=Bh(u);if(Te||(u[Lh]=Te=new qu(u)),f=Te.add(d,f,g,L,A),f.proxy)return f;if(g=KA(),f.proxy=g,g.src=u,g.listener=f,u.addEventListener)qA||(C=L),C===void 0&&(C=!1),u.addEventListener(d.toString(),g,C);else if(u.attachEvent)u.attachEvent(B_(d.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function KA(){function u(f){return d.call(u.src,u.listener,f)}let d=QA;return u}function V_(u,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)V_(u,d[A],f,g,C);return null}return f=$h(f),u&&u[Us]?u.L(d,f,l(g)?!!g.capture:!!g,C):L_(u,d,f,!0,g,C)}function j_(u,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)j_(u,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=$h(f),u&&u[Us]?(u=u.i,d=String(d).toString(),d in u.g&&(A=u.g[d],f=Fh(A,f,g,C),-1<f&&(Hu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete u.g[d],u.h--)))):u&&(u=Bh(u))&&(d=u.g[d.toString()],u=-1,d&&(u=Fh(d,f,g,C)),(f=-1<u?d[u]:null)&&jh(f))}function jh(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Us])Oh(d.i,u);else{var f=u.type,g=u.proxy;d.removeEventListener?d.removeEventListener(f,g,u.capture):d.detachEvent?d.detachEvent(B_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Bh(d))?(Oh(f,u),f.h==0&&(f.src=null,d[Lh]=null)):Hu(u)}}}function B_(u){return u in Vh?Vh[u]:Vh[u]="on"+u}function QA(u,d){if(u.da)u=!0;else{d=new Bs(d,this);var f=u.listener,g=u.ha||u.src;u.fa&&jh(u),u=f.call(g,d)}return u}function Bh(u){return u=u[Lh],u instanceof qu?u:null}var Uh="__closure_events_fn_"+(1e9*Math.random()>>>0);function $h(u){return typeof u=="function"?u:(u[Uh]||(u[Uh]=function(d){return u.handleEvent(d)}),u[Uh])}function pt(){dr.call(this),this.i=new qu(this),this.M=this,this.F=null}b(pt,dr),pt.prototype[Us]=!0,pt.prototype.removeEventListener=function(u,d,f,g){j_(this,u,d,f,g)};function _t(u,d){var f,g=u.F;if(g)for(f=[];g;g=g.F)f.push(g);if(u=u.M,g=d.type||d,typeof d=="string")d=new ft(d,u);else if(d instanceof ft)d.target=d.target||u;else{var C=d;d=new ft(g,u),E(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var L=d.g=f[A];C=zu(L,g,!0,d)&&C}if(L=d.g=u,C=zu(L,g,!0,d)&&C,C=zu(L,g,!1,d)&&C,f)for(A=0;A<f.length;A++)L=d.g=f[A],C=zu(L,g,!1,d)&&C}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],g=0;g<f.length;g++)Hu(f[g]);delete u.g[d],u.h--}}this.F=null},pt.prototype.K=function(u,d,f,g){return this.i.add(String(u),d,!1,f,g)},pt.prototype.L=function(u,d,f,g){return this.i.add(String(u),d,!0,f,g)};function zu(u,d,f,g){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var L=d[A];if(L&&!L.da&&L.capture==f){var Te=L.listener,at=L.ha||L.src;L.fa&&Oh(u.i,L),C=Te.call(at,g)!==!1&&C}}return C&&!g.defaultPrevented}function U_(u,d,f){if(typeof u=="function")f&&(u=m(u,f));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function $_(u){u.g=U_(()=>{u.g=null,u.i&&(u.i=!1,$_(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class YA extends dr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:$_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $s(u){dr.call(this),this.h=u,this.g={}}b($s,dr);var H_=[];function q_(u){Z(u.g,function(d,f){this.g.hasOwnProperty(f)&&jh(d)},u),u.g={}}$s.prototype.N=function(){$s.aa.N.call(this),q_(this)},$s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hh=a.JSON.stringify,ZA=a.JSON.parse,JA=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function qh(){}qh.prototype.h=null;function z_(u){return u.h||(u.h=u.i())}function G_(){}var Hs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zh(){ft.call(this,"d")}b(zh,ft);function Gh(){ft.call(this,"c")}b(Gh,ft);var Jr={},W_=null;function Gu(){return W_=W_||new pt}Jr.La="serverreachability";function K_(u){ft.call(this,Jr.La,u)}b(K_,ft);function qs(u){let d=Gu();_t(d,new K_(d))}Jr.STAT_EVENT="statevent";function Q_(u,d){ft.call(this,Jr.STAT_EVENT,u),this.stat=d}b(Q_,ft);function wt(u){let d=Gu();_t(d,new Q_(d,u))}Jr.Ma="timingevent";function Y_(u,d){ft.call(this,Jr.Ma,u),this.size=d}b(Y_,ft);function zs(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function Gs(){this.g=!0}Gs.prototype.xa=function(){this.g=!1};function XA(u,d,f,g,C,A){u.info(function(){if(u.g)if(A)for(var L="",Te=A.split("&"),at=0;at<Te.length;at++){var me=Te[at].split("=");if(1<me.length){var gt=me[0];me=me[1];var mt=gt.split("_");L=2<=mt.length&&mt[1]=="type"?L+(gt+"="+me+"&"):L+(gt+"=redacted&")}}else L=null;else L=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+L})}function ex(u,d,f,g,C,A,L){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+L})}function Zi(u,d,f,g){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+nx(u,f)+(g?" "+g:"")})}function tx(u,d){u.info(function(){return"TIMEOUT: "+d})}Gs.prototype.info=function(){};function nx(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var g=f[u];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return Hh(f)}catch{return d}}var Wu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Z_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wh;function Ku(){}b(Ku,qh),Ku.prototype.g=function(){return new XMLHttpRequest},Ku.prototype.i=function(){return{}},Wh=new Ku;function hr(u,d,f,g){this.j=u,this.i=d,this.l=f,this.R=g||1,this.U=new $s(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new J_}function J_(){this.i=null,this.g="",this.h=!1}var X_={},Kh={};function Qh(u,d,f){u.L=1,u.v=Ju(Bn(d)),u.m=f,u.P=!0,ew(u,null)}function ew(u,d){u.F=Date.now(),Qu(u),u.A=Bn(u.v);var f=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),pw(f.i,"t",g),u.C=0,f=u.j.J,u.h=new J_,u.g=Nw(u.j,f?d:null,!u.m),0<u.O&&(u.M=new YA(m(u.Y,u,u.g),u.O)),d=u.U,f=u.g,g=u.ca;var C="readystatechange";Array.isArray(C)||(C&&(H_[0]=C.toString()),C=H_);for(var A=0;A<C.length;A++){var L=F_(f,C[A],g||d.handleEvent,!1,d.h||d);if(!L)break;d.g[L.key]=L}d=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),qs(),XA(u.i,u.u,u.A,u.l,u.R,u.m)}hr.prototype.ca=function(u){u=u.target;let d=this.M;d&&Un(u)==3?d.j():this.Y(u)},hr.prototype.Y=function(u){try{if(u==this.g)e:{let mt=Un(this.g);var d=this.g.Ba();let eo=this.g.Z();if(!(3>mt)&&(mt!=3||this.g&&(this.h.h||this.g.oa()||Iw(this.g)))){this.J||mt!=4||d==7||(d==8||0>=eo?qs(3):qs(2)),Yh(this);var f=this.g.Z();this.X=f;t:if(tw(this)){var g=Iw(this.g);u="";var C=g.length,A=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xr(this),Ws(this);var L="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,u+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=u,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,ex(this.i,this.u,this.A,this.l,this.R,mt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,at=this.g;if((Te=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Te)){var me=Te;break t}}me=null}if(f=me)Zi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zh(this,f);else{this.o=!1,this.s=3,wt(12),Xr(this),Ws(this);break e}}if(this.P){f=!0;let sn;for(;!this.J&&this.C<L.length;)if(sn=rx(this,L),sn==Kh){mt==4&&(this.s=4,wt(14),f=!1),Zi(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==X_){this.s=4,wt(15),Zi(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else Zi(this.i,this.l,sn,null),Zh(this,sn);if(tw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||L.length!=0||this.h.h||(this.s=1,wt(16),f=!1),this.o=this.o&&f,!f)Zi(this.i,this.l,L,"[Invalid Chunked Response]"),Xr(this),Ws(this);else if(0<L.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),rf(gt),gt.M=!0,wt(11))}}else Zi(this.i,this.l,L,null),Zh(this,L);mt==4&&Xr(this),this.o&&!this.J&&(mt==4?Aw(this.j,this):(this.o=!1,Qu(this)))}else wx(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),Xr(this),Ws(this)}}}catch{}finally{}};function tw(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function rx(u,d){var f=u.C,g=d.indexOf(`
`,f);return g==-1?Kh:(f=Number(d.substring(f,g)),isNaN(f)?X_:(g+=1,g+f>d.length?Kh:(d=d.slice(g,g+f),u.C=g+f,d)))}hr.prototype.cancel=function(){this.J=!0,Xr(this)};function Qu(u){u.S=Date.now()+u.I,nw(u,u.I)}function nw(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=zs(m(u.ba,u),d)}function Yh(u){u.B&&(a.clearTimeout(u.B),u.B=null)}hr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(tx(this.i,this.A),this.L!=2&&(qs(),wt(17)),Xr(this),this.s=2,Ws(this)):nw(this,this.S-u)};function Ws(u){u.j.G==0||u.J||Aw(u.j,u)}function Xr(u){Yh(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,q_(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Zh(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||Jh(f.h,u))){if(!u.K&&Jh(f.h,u)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)rc(f),tc(f);else break e;nf(f),wt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=zs(m(f.Za,f),6e3));if(1>=ow(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ti(f,11)}else if((u.K||f.g==u)&&rc(f),!q(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let me=C[d];if(f.T=me[0],me=me[1],f.G==2)if(me[0]=="c"){f.K=me[1],f.ia=me[2];let gt=me[3];gt!=null&&(f.la=gt,f.j.info("VER="+f.la));let mt=me[4];mt!=null&&(f.Aa=mt,f.j.info("SVER="+f.Aa));let eo=me[5];eo!=null&&typeof eo=="number"&&0<eo&&(g=1.5*eo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let sn=u.g;if(sn){let oc=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oc){var A=g.h;A.g||oc.indexOf("spdy")==-1&&oc.indexOf("quic")==-1&&oc.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Xh(A,A.h),A.h=null))}if(g.D){let of=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;of&&(g.ya=of,Me(g.I,g.D,of))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var L=u;if(g.qa=Mw(g,g.J?g.ia:null,g.W),L.K){sw(g.h,L);var Te=L,at=g.L;at&&(Te.I=at),Te.B&&(Yh(Te),Qu(Te)),g.g=L}else bw(g);0<f.i.length&&nc(f)}else me[0]!="stop"&&me[0]!="close"||ti(f,7);else f.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?ti(f,7):tf(f):me[0]!="noop"&&f.l&&f.l.ta(me),f.v=0)}}qs(4)}catch{}}var ix=class{constructor(u,d){this.g=u,this.map=d}};function rw(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function iw(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ow(u){return u.h?1:u.g?u.g.size:0}function Jh(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Xh(u,d){u.g?u.g.add(d):u.h=d}function sw(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}rw.prototype.cancel=function(){if(this.i=aw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function aw(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return M(u.i)}function ox(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,g=0;g<f;g++)d.push(u[g]);return d}d=[],f=0;for(g in u)d[f++]=u[g];return d}function sx(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let g in u)d[f++]=g;return d}}}function uw(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=sx(u),g=ox(u),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],u)}var cw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ax(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var g=u[f].indexOf("="),C=null;if(0<=g){var A=u[f].substring(0,g);C=u[f].substring(g+1)}else A=u[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function ei(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ei){this.h=u.h,Yu(this,u.j),this.o=u.o,this.g=u.g,Zu(this,u.s),this.l=u.l;var d=u.i,f=new Ys;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),lw(this,f),this.m=u.m}else u&&(d=String(u).match(cw))?(this.h=!1,Yu(this,d[1]||"",!0),this.o=Ks(d[2]||""),this.g=Ks(d[3]||"",!0),Zu(this,d[4]),this.l=Ks(d[5]||"",!0),lw(this,d[6]||"",!0),this.m=Ks(d[7]||"")):(this.h=!1,this.i=new Ys(null,this.h))}ei.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Qs(d,dw,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Qs(d,dw,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(Qs(f,f.charAt(0)=="/"?lx:cx,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",Qs(f,hx)),u.join("")};function Bn(u){return new ei(u)}function Yu(u,d,f){u.j=f?Ks(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function Zu(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function lw(u,d,f){d instanceof Ys?(u.i=d,fx(u.i,u.h)):(f||(d=Qs(d,dx)),u.i=new Ys(d,u.h))}function Me(u,d,f){u.i.set(d,f)}function Ju(u){return Me(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ks(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qs(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,ux),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ux(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var dw=/[#\/\?@]/g,cx=/[#\?:]/g,lx=/[#\?]/g,dx=/[#\?@]/g,hx=/#/g;function Ys(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function fr(u){u.g||(u.g=new Map,u.h=0,u.i&&ax(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Ys.prototype,n.add=function(u,d){fr(this),this.i=null,u=Ji(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function hw(u,d){fr(u),d=Ji(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function fw(u,d){return fr(u),d=Ji(u,d),u.g.has(d)}n.forEach=function(u,d){fr(this),this.g.forEach(function(f,g){f.forEach(function(C){u.call(d,C,g,this)},this)},this)},n.na=function(){fr(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=u[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},n.V=function(u){fr(this);let d=[];if(typeof u=="string")fw(this,u)&&(d=d.concat(this.g.get(Ji(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return fr(this),this.i=null,u=Ji(this,u),fw(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function pw(u,d,f){hw(u,d),0<f.length&&(u.i=null,u.g.set(Ji(u,d),M(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var C=A;L[g]!==""&&(C+="="+encodeURIComponent(String(L[g]))),u.push(C)}}return this.i=u.join("&")};function Ji(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function fx(u,d){d&&!u.j&&(fr(u),u.i=null,u.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(hw(this,g),pw(this,C,f))},u)),u.j=d}function px(u,d){let f=new Gs;if(a.Image){let g=new Image;g.onload=v(pr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(pr,f,"TestLoadImage: error",!1,d,g),g.onabort=v(pr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(pr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else d(!1)}function gx(u,d){let f=new Gs,g=new AbortController,C=setTimeout(()=>{g.abort(),pr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?pr(f,"TestPingServer: ok",!0,d):pr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),pr(f,"TestPingServer: error",!1,d)})}function pr(u,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function mx(){this.g=new JA}function yx(u,d,f){let g=f||"";try{uw(u,function(C,A){let L=C;l(C)&&(L=Hh(C)),d.push(g+A+"="+encodeURIComponent(L))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function Zs(u){this.l=u.Ub||null,this.j=u.eb||!1}b(Zs,qh),Zs.prototype.g=function(){return new Xu(this.l,this.j)},Zs.prototype.i=function(u){return function(){return u}}({});function Xu(u,d){pt.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Xu,pt),n=Xu.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,Xs(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Js(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Xs(this)),this.g&&(this.readyState=3,Xs(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gw(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function gw(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Js(this):Xs(this),this.readyState==3&&gw(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Js(this))},n.Qa=function(u){this.g&&(this.response=u,Js(this))},n.ga=function(){this.g&&Js(this)};function Js(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Xs(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function Xs(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Xu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function mw(u){let d="";return Z(u,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function ef(u,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=mw(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):Me(u,d,f))}function Ue(u){pt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ue,pt);var vx=/^https?$/i,_x=["POST","PUT"];n=Ue.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wh.g(),this.v=this.o?z_(this.o):z_(Wh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(A){yw(this,A);return}if(u=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(_x,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,L]of f)this.g.setRequestHeader(A,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ww(this),this.u=!0,this.g.send(u),this.u=!1}catch(A){yw(this,A)}};function yw(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,vw(u),ec(u)}function vw(u){u.A||(u.A=!0,_t(u,"complete"),_t(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,_t(this,"complete"),_t(this,"abort"),ec(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ec(this,!0)),Ue.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?_w(this):this.bb())},n.bb=function(){_w(this)};function _w(u){if(u.h&&typeof s<"u"&&(!u.v[1]||Un(u)!=4||u.Z()!=2)){if(u.u&&Un(u)==4)U_(u.Ea,0,u);else if(_t(u,"readystatechange"),Un(u)==4){u.h=!1;try{let L=u.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=L===0){var C=String(u.D).match(cw)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!vx.test(C?C.toLowerCase():"")}f=g}if(f)_t(u,"complete"),_t(u,"success");else{u.m=6;try{var A=2<Un(u)?u.g.statusText:""}catch{A=""}u.l=A+" ["+u.Z()+"]",vw(u)}}finally{ec(u)}}}}function ec(u,d){if(u.g){ww(u);let f=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||_t(u,"ready");try{f.onreadystatechange=g}catch{}}}function ww(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Un(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),ZA(d)}};function Iw(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function wx(u){let d={};u=(u.g&&2<=Un(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(q(u[g]))continue;var f=D(u[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}I(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ea(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function Ew(u){this.Aa=0,this.i=[],this.j=new Gs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ea("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ea("baseRetryDelayMs",5e3,u),this.cb=ea("retryDelaySeedMs",1e4,u),this.Wa=ea("forwardChannelMaxRetries",2,u),this.wa=ea("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new rw(u&&u.concurrentRequestLimit),this.Da=new mx,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ew.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,g){wt(0),this.W=u,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Mw(this,null,this.W),nc(this)};function tf(u){if(Dw(u),u.G==3){var d=u.U++,f=Bn(u.I);if(Me(f,"SID",u.K),Me(f,"RID",d),Me(f,"TYPE","terminate"),ta(u,f),d=new hr(u,u.j,d),d.L=2,d.v=Ju(Bn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Nw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Qu(d)}Rw(u)}function tc(u){u.g&&(rf(u),u.g.cancel(),u.g=null)}function Dw(u){tc(u),u.u&&(a.clearTimeout(u.u),u.u=null),rc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function nc(u){if(!iw(u.h)&&!u.s){u.s=!0;var d=u.Ga;Vs||O_(),js||(Vs(),js=!0),kh.add(d,u),u.B=0}}function Ix(u,d){return ow(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=zs(m(u.Ga,u,d),xw(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let C=new hr(this,this.j,u),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Tw(this,C,d),f=Bn(this.I),Me(f,"RID",u),Me(f,"CVER",22),this.D&&Me(f,"X-HTTP-Session-Id",this.D),ta(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(mw(A)))+"&"+d:this.m&&ef(f,this.m,A)),Xh(this.h,C),this.Ua&&Me(f,"TYPE","init"),this.P?(Me(f,"$req",d),Me(f,"SID","null"),C.T=!0,Qh(C,f,null)):Qh(C,f,d),this.G=2}}else this.G==3&&(u?Cw(this,u):this.i.length==0||iw(this.h)||Cw(this))};function Cw(u,d){var f;d?f=d.l:f=u.U++;let g=Bn(u.I);Me(g,"SID",u.K),Me(g,"RID",f),Me(g,"AID",u.T),ta(u,g),u.m&&u.o&&ef(g,u.m,u.o),f=new hr(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=Tw(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Xh(u.h,f),Qh(f,g,d)}function ta(u,d){u.H&&Z(u.H,function(f,g){Me(d,g,f)}),u.l&&uw({},function(f,g){Me(d,g,f)})}function Tw(u,d,f){f=Math.min(u.i.length,f);var g=u.l?m(u.l.Na,u.l,u):null;e:{var C=u.i;let A=-1;for(;;){let L=["count="+f];A==-1?0<f?(A=C[0].g,L.push("ofs="+A)):A=0:L.push("ofs="+A);let Te=!0;for(let at=0;at<f;at++){let me=C[at].g,gt=C[at].map;if(me-=A,0>me)A=Math.max(0,C[at].g-100),Te=!1;else try{yx(gt,L,"req"+me+"_")}catch{g&&g(gt)}}if(Te){g=L.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,g}function bw(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;Vs||O_(),js||(Vs(),js=!0),kh.add(d,u),u.v=0}}function nf(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=zs(m(u.Fa,u),xw(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Sw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=zs(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),tc(this),Sw(this))};function rf(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Sw(u){u.g=new hr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=Bn(u.qa);Me(d,"RID","rpc"),Me(d,"SID",u.K),Me(d,"AID",u.T),Me(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Me(d,"TO",u.ja),Me(d,"TYPE","xmlhttp"),ta(u,d),u.m&&u.o&&ef(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=Ju(Bn(d)),f.m=null,f.P=!0,ew(f,u)}n.Za=function(){this.C!=null&&(this.C=null,tc(this),nf(this),wt(19))};function rc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Aw(u,d){var f=null;if(u.g==d){rc(u),rf(u),u.g=null;var g=2}else if(Jh(u.h,d))f=d.D,sw(u.h,d),g=1;else return;if(u.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=u.B;g=Gu(),_t(g,new Y_(g,f)),nc(u)}else bw(u);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&Ix(u,d)||g==2&&nf(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),C){case 1:ti(u,5);break;case 4:ti(u,10);break;case 3:ti(u,6);break;default:ti(u,2)}}}function xw(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function ti(u,d){if(u.j.info("Error code "+d),d==2){var f=m(u.fb,u),g=u.Xa;let C=!g;g=new ei(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Yu(g,"https"),Ju(g),C?px(g.toString(),f):gx(g.toString(),f)}else wt(2);u.G=0,u.l&&u.l.sa(d),Rw(u),Dw(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Rw(u){if(u.G=0,u.ka=[],u.l){let d=aw(u.h);(d.length!=0||u.i.length!=0)&&(N(u.ka,d),N(u.ka,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.ra()}}function Mw(u,d,f){var g=f instanceof ei?Bn(f):new ei(f);if(g.g!="")d&&(g.g=d+"."+g.g),Zu(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new ei(null);g&&Yu(A,g),d&&(A.g=d),C&&Zu(A,C),f&&(A.l=f),g=A}return f=u.D,d=u.ya,f&&d&&Me(g,f,d),Me(g,"VER",u.la),ta(u,g),g}function Nw(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Ue(new Zs({eb:f})):new Ue(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pw(){}n=Pw.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ic(){}ic.prototype.g=function(u,d){return new Ft(u,d)};function Ft(u,d){pt.call(this),this.g=new Ew(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!q(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!q(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new Xi(this)}b(Ft,pt),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){tf(this.g)},Ft.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=Hh(u),u=f);d.i.push(new ix(d.Ya++,u)),d.G==3&&nc(d)},Ft.prototype.N=function(){this.g.l=null,delete this.j,tf(this.g),delete this.g,Ft.aa.N.call(this)};function kw(u){zh.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}b(kw,zh);function Ow(){Gh.call(this),this.status=1}b(Ow,Gh);function Xi(u){this.g=u}b(Xi,Pw),Xi.prototype.ua=function(){_t(this.g,"a")},Xi.prototype.ta=function(u){_t(this.g,new kw(u))},Xi.prototype.sa=function(u){_t(this.g,new Ow)},Xi.prototype.ra=function(){_t(this.g,"b")},ic.prototype.createWebChannel=ic.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,Pm=tr.createWebChannelTransport=function(){return new ic},Nm=tr.getStatEventTarget=function(){return Gu()},Mm=tr.Event=Jr,dd=tr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wu.NO_ERROR=0,Wu.TIMEOUT=8,Wu.HTTP_ERROR=6,nu=tr.ErrorCode=Wu,Z_.COMPLETE="complete",Rm=tr.EventType=Z_,G_.EventType=Hs,Hs.OPEN="a",Hs.CLOSE="b",Hs.ERROR="c",Hs.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Yo=tr.WebChannel=G_,HF=tr.FetchXmlHttpFactory=Zs,Ue.prototype.listenOnce=Ue.prototype.L,Ue.prototype.getLastError=Ue.prototype.Ka,Ue.prototype.getLastErrorCode=Ue.prototype.Ba,Ue.prototype.getStatus=Ue.prototype.Z,Ue.prototype.getResponseJson=Ue.prototype.Oa,Ue.prototype.getResponseText=Ue.prototype.oa,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Ha,xm=tr.XhrIo=Ue}).apply(typeof ld<"u"?ld:typeof self<"u"?self:typeof window<"u"?window:{});var KT="@firebase/firestore";var et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");var Ss="10.14.0";var jr=new uc("@firebase/firestore");function ts(){return jr.logLevel}function Z0(n){jr.setLogLevel(n)}function k(n,...e){if(jr.logLevel<=_n.DEBUG){let t=e.map(Vv);jr.debug(`Firestore (${Ss}): ${n}`,...t)}}function Ge(n,...e){if(jr.logLevel<=_n.ERROR){let t=e.map(Vv);jr.error(`Firestore (${Ss}): ${n}`,...t)}}function pn(n,...e){if(jr.logLevel<=_n.WARN){let t=e.map(Vv);jr.warn(`Firestore (${Ss}): ${n}`,...t)}}function Vv(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${Ss}) INTERNAL ASSERTION FAILED: `+n;throw Ge(e),new Error(e)}function K(n,e){n||z()}function J0(n,e){n||z()}function U(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends Uw{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var rt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Id=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},jm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(et.UNAUTHENTICATED))}shutdown(){}},Bm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Um=class{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){K(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new rt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new rt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>R(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new rt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(K(typeof r.accessToken=="string"),new Id(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return K(e===null||typeof e=="string"),new et(e)}},$m=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Hm=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new $m(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},qm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},zm=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){K(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(K(typeof t.token=="string"),this.R=t.token,new qm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function qF(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Ed=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=qF(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function re(n,e){return n<e?-1:n>e?1:0}function ls(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function X0(n){return n+"\0"}var je=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Q=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new je(0,0))}static max(){return new n(new je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Dd=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(),r===void 0?r=e.length-t:r>e.length-t&&z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},pe=class n extends Dd{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},zF=/^[_a-zA-Z][_a-zA-Z0-9]*$/,We=class n extends Dd{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return zF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new P(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(pe.fromString(e))}static fromName(e){return new n(pe.fromString(e).popFirst(5))}static empty(){return new n(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new pe(e.slice()))}};var ds=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Gm(n){return n.fields.find(e=>e.kind===2)}function Ti(n){return n.fields.filter(e=>e.kind!==2)}ds.UNKNOWN_ID=-1;var as=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var pu=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,rn.min())}};function eb(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(r===1e9?new je(t+1,0):new je(t,r));return new rn(i,$.empty(),e)}function tb(n){return new rn(n.readTime,n.key,-1)}var rn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Q.min(),$.empty(),-1)}static max(){return new n(Q.max(),$.empty(),-1)}};function jv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:re(n.largestBatchId,e.largestBatchId))}var nb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Cd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Qr(n){return R(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==nb)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Td=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new rt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Mi(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Bv(r.target.error);this.V.reject(new Mi(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Mi(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Km(t)}},Br=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(na())===12.2&&Ge("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),bi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ac())return!1;if(n.v())return!0;let e=na(),t=n.S(e),r=0<t&&t<10,i=rb(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return R(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Mi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Mi(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return R(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Td.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function rb(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Wm=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return bi(this.B.delete())}},Mi=class extends P{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Yr(n){return n.name==="IndexedDbTransactionError"}var Km=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),bi(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),bi(this.store.add(e))}get(e){return bi(this.store.get(e)).next(t=>(t===void 0&&(t=null),k("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),bi(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),bi(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=Bv(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new Wm(a),l=t(a.primaryKey,a.value,c);if(l instanceof S){let h=l.catch(p=>(c.done(),S.reject(p)));r.push(h)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function bi(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Bv(r.target.error);t(i)}})}var QT=!1;function Bv(n){let e=Br.S(na());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return QT||(QT=!0,setTimeout(()=>{throw r},0)),r}}return n}var Qm=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>R(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Yr(t)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Qr(t)}yield this.X(6e4)}))}},Ym=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return R(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=tb(o);jv(s,r)>0&&(r=s)}),new rn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var zt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Ou(n){return n==null}function gu(n){return n===0&&1/n==-1/0}function ib(n){return typeof n=="number"&&Number.isInteger(n)&&!gu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function St(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=YT(e)),e=GF(n.get(t),e);return YT(e)}function GF(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function YT(n){return n+""}function xn(n){let e=n.length;if(K(e>=2),e===2)return K(n.charAt(0)===""&&n.charAt(1)===""),pe.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&z(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:z()}o=s+2}return new pe(r)}var ZT=["userId","batchId"];function md(n,e){return[n,St(e)]}function ob(n,e,t){return[n,St(e),t]}var WF={},KF=["prefixPath","collectionGroup","readTime","documentId"],QF=["prefixPath","collectionGroup","documentId"],YF=["collectionGroup","readTime","prefixPath","documentId"],ZF=["canonicalId","targetId"],JF=["targetId","path"],XF=["path","targetId"],eL=["collectionId","parent"],tL=["indexId","uid"],nL=["uid","sequenceNumber"],rL=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],iL=["indexId","uid","orderedDocumentKey"],oL=["userId","collectionPath","documentId"],sL=["userId","collectionPath","largestBatchId"],aL=["userId","collectionGroup","largestBatchId"],sb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],uL=[...sb,"documentOverlays"],ab=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ub=ab,Uv=[...ub,"indexConfiguration","indexState","indexEntries"],cL=Uv,lL=[...Uv,"globals"];var mu=class extends Cd{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function it(n,e){let t=U(n);return Br.F(t._e,e)}function JT(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Hi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cb(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ke=class n{constructor(e,t){this.comparator=e,this.root=t||Mn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ss(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ss(this.root,e,this.comparator,!1)}getReverseIterator(){return new ss(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ss(this.root,e,this.comparator,!0)}},ss=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Mn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};Mn.EMPTY=null,Mn.RED=!0,Mn.BLACK=!1;Mn.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Se=class n{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bd(this.data.getIterator())}getIteratorFrom(e){return new bd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},bd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Zo(n){return n.hasNext()?n.getNext():void 0}var Gt=class n{constructor(e){this.fields=e,e.sort(We.comparator)}static empty(){return new n([])}unionWith(e){let t=new Se(We.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ls(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Sd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function lb(){return typeof atob<"u"}var Qe=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Sd("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Qe.EMPTY_BYTE_STRING=new Qe("");var dL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ir(n){if(K(!!n),typeof n=="string"){let e=0,t=dL.exec(n);if(K(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(n.seconds),nanos:Fe(n.nanos)}}function Fe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ur(n){return typeof n=="string"?Qe.fromBase64String(n):Qe.fromUint8Array(n)}function vh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function $v(n){let e=n.mapValue.fields.__previous_value__;return vh(e)?$v(e):e}function yu(n){let e=ir(n.mapValue.fields.__local_write_time__.timestampValue);return new je(e.seconds,e.nanos)}var Zm=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},$r=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Lr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},yd={nullValue:"NULL_VALUE"};function Ni(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?vh(n)?4:db(n)?9007199254740991:_h(n)?10:11:z()}function kn(n,e){if(n===e)return!0;let t=Ni(n);if(t!==Ni(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yu(n).isEqual(yu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ir(i.timestampValue),a=ir(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Ur(i.bytesValue).isEqual(Ur(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Fe(i.geoPointValue.latitude)===Fe(o.geoPointValue.latitude)&&Fe(i.geoPointValue.longitude)===Fe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Fe(i.integerValue)===Fe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Fe(i.doubleValue),a=Fe(o.doubleValue);return s===a?gu(s)===gu(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ls(n.arrayValue.values||[],e.arrayValue.values||[],kn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(JT(s)!==JT(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!kn(s[c],a[c])))return!1;return!0}(n,e);default:return z()}}function vu(n,e){return(n.values||[]).find(t=>kn(t,e))!==void 0}function Hr(n,e){if(n===e)return 0;let t=Ni(n),r=Ni(e);if(t!==r)return re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return re(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Fe(o.integerValue||o.doubleValue),c=Fe(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return XT(n.timestampValue,e.timestampValue);case 4:return XT(yu(n),yu(e));case 5:return re(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Ur(o),c=Ur(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=re(a[l],c[l]);if(h!==0)return h}return re(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=re(Fe(o.latitude),Fe(s.latitude));return a!==0?a:re(Fe(o.longitude),Fe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return e0(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,h;let p=o.fields||{},m=s.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(c=m.value)===null||c===void 0?void 0:c.arrayValue,M=re(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:e0(v,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Lr.mapValue&&s===Lr.mapValue)return 0;if(o===Lr.mapValue)return 1;if(s===Lr.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=re(c[p],h[p]);if(m!==0)return m;let v=Hr(a[c[p]],l[h[p]]);if(v!==0)return v}return re(c.length,h.length)}(n.mapValue,e.mapValue);default:throw z()}}function XT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return re(n,e);let t=ir(n),r=ir(e),i=re(t.seconds,r.seconds);return i!==0?i:re(t.nanos,r.nanos)}function e0(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Hr(t[i],r[i]);if(o)return o}return re(t.length,r.length)}function hs(n){return Jm(n)}function Jm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=ir(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ur(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Jm(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Jm(t.fields[s])}`;return i+"}"}(n.mapValue):z()}function Pi(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Xm(n){return!!n&&"integerValue"in n}function _u(n){return!!n&&"arrayValue"in n}function t0(n){return!!n&&"nullValue"in n}function n0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vd(n){return!!n&&"mapValue"in n}function _h(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function cu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Hi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=cu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function db(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var hb={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function hL(n){return"nullValue"in n?yd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Pi($r.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?_h(n)?hb:{mapValue:{}}:z()}function fL(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Pi($r.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?hb:"mapValue"in n?_h(n)?{mapValue:{}}:Lr:z()}function r0(n,e){let t=Hr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function i0(n,e){let t=Hr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var vt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!vd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cu(t)}setAll(e){let t=We.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=cu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());vd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];vd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Hi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(cu(this.value))}};function fb(n){let e=[];return Hi(n.fields,(t,r)=>{let i=new We([t]);if(vd(r)){let o=fb(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Gt(e)}var tt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Q.min(),Q.min(),Q.min(),vt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Q.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Q.min(),Q.min(),vt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Q.min(),Q.min(),vt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var On=class{constructor(e,t){this.position=e,this.inclusive=t}};function o0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=Hr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function s0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!kn(n.position[t],e.position[t]))return!1;return!0}var ki=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function pL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ad=class{},ce=class n extends Ad{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ny(e,t,r):t==="array-contains"?new oy(e,r):t==="in"?new xd(e,r):t==="not-in"?new sy(e,r):t==="array-contains-any"?new ay(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new ry(e,r):new iy(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Hr(t,this.value)):t!==null&&Ni(this.value)===Ni(t)&&this.matchesComparison(Hr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ie=class n extends Ad{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return fs(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function fs(n){return n.op==="and"}function ey(n){return n.op==="or"}function Hv(n){return pb(n)&&fs(n)}function pb(n){for(let e of n.filters)if(e instanceof Ie)return!1;return!0}function ty(n){if(n instanceof ce)return n.field.canonicalString()+n.op.toString()+hs(n.value);if(Hv(n))return n.filters.map(e=>ty(e)).join(",");{let e=n.filters.map(t=>ty(t)).join(",");return`${n.op}(${e})`}}function gb(n,e){return n instanceof ce?function(r,i){return i instanceof ce&&r.op===i.op&&r.field.isEqual(i.field)&&kn(r.value,i.value)}(n,e):n instanceof Ie?function(r,i){return i instanceof Ie&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&gb(s,i.filters[a]),!0):!1}(n,e):void z()}function mb(n,e){let t=n.filters.concat(e);return Ie.create(t,n.op)}function yb(n){return n instanceof ce?function(t){return`${t.field.canonicalString()} ${t.op} ${hs(t.value)}`}(n):n instanceof Ie?function(t){return t.op.toString()+" {"+t.getFilters().map(yb).join(" ,")+"}"}(n):"Filter"}var ny=class extends ce{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},ry=class extends ce{constructor(e,t){super(e,"in",t),this.keys=vb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},iy=class extends ce{constructor(e,t){super(e,"not-in",t),this.keys=vb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function vb(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var oy=class extends ce{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return _u(t)&&vu(t.arrayValue,this.value)}},xd=class extends ce{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&vu(this.value.arrayValue,t)}},sy=class extends ce{constructor(e,t){super(e,"not-in",t)}matches(e){if(vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!vu(this.value.arrayValue,t)}},ay=class extends ce{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!_u(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>vu(this.value.arrayValue,r))}};var uy=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function cy(n,e=null,t=[],r=[],i=null,o=null,s=null){return new uy(n,e,t,r,i,o,s)}function Oi(n){let e=U(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ty(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Ou(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>hs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>hs(r)).join(",")),e.ue=t}return e.ue}function Fu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!pL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!s0(n.startAt,e.startAt)&&s0(n.endAt,e.endAt)}function Rd(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Md(n,e){return n.filters.filter(t=>t instanceof ce&&t.field.isEqual(e))}function a0(n,e,t){let r=yd,i=!0;for(let o of Md(n,e)){let s=yd,a=!0;switch(o.op){case"<":case"<=":s=hL(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=yd}r0({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];r0({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function u0(n,e,t){let r=Lr,i=!0;for(let o of Md(n,e)){let s=Lr,a=!0;switch(o.op){case">=":case">":s=fL(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Lr}i0({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];i0({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var gn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function _b(n,e,t,r,i,o,s,a){return new gn(n,e,t,r,i,o,s,a)}function As(n){return new gn(n)}function c0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function qv(n){return n.collectionGroup!==null}function us(n){let e=U(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Se(We.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ki(o,r))}),t.has(We.keyField().canonicalString())||e.ce.push(new ki(We.keyField(),r))}return e.ce}function At(n){let e=U(n);return e.le||(e.le=gL(e,us(n))),e.le}function gL(n,e){if(n.limitType==="F")return cy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ki(i.field,o)});let t=n.endAt?new On(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new On(n.startAt.position,n.startAt.inclusive):null;return cy(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function ly(n,e){let t=n.filters.concat([e]);return new gn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Nd(n,e,t){return new gn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lu(n,e){return Fu(At(n),At(e))&&n.limitType===e.limitType}function wb(n){return`${Oi(At(n))}|lt:${n.limitType}`}function ns(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>yb(i)).join(", ")}]`),Ou(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>hs(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>hs(i)).join(",")),`Target(${r})`}(At(n))}; limitType=${n.limitType})`}function Vu(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of us(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=o0(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,us(r),i)||r.endAt&&!function(s,a,c){let l=o0(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,us(r),i))}(n,e)}function Ib(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Eb(n){return(e,t)=>{let r=!1;for(let i of us(n)){let o=mL(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function mL(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Hr(c,l):z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var Fn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Hi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return cb(this.inner)}size(){return this.innerSize}};var yL=new ke($.comparator);function kt(){return yL}var Db=new ke($.comparator);function au(...n){let e=Db;for(let t of n)e=e.insert(t.key,t);return e}function Cb(n){let e=Db;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Rn(){return lu()}function Tb(){return lu()}function lu(){return new Fn(n=>n.toString(),(n,e)=>n.isEqual(e))}var vL=new ke($.comparator),_L=new Se($.comparator);function ie(...n){let e=_L;for(let t of n)e=e.add(t);return e}var wL=new Se(re);function zv(){return wL}function Gv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gu(e)?"-0":e}}function bb(n){return{integerValue:""+n}}function Sb(n,e){return ib(e)?bb(e):Gv(n,e)}var ps=class{constructor(){this._=void 0}};function IL(n,e,t){return n instanceof qr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&vh(o)&&(o=$v(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof or?xb(n,e):n instanceof sr?Rb(n,e):function(i,o){let s=Ab(i,o),a=l0(s)+l0(i.Pe);return Xm(s)&&Xm(i.Pe)?bb(a):Gv(i.serializer,a)}(n,e)}function EL(n,e,t){return n instanceof or?xb(n,e):n instanceof sr?Rb(n,e):t}function Ab(n,e){return n instanceof zr?function(r){return Xm(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var qr=class extends ps{},or=class extends ps{constructor(e){super(),this.elements=e}};function xb(n,e){let t=Mb(e);for(let r of n.elements)t.some(i=>kn(i,r))||t.push(r);return{arrayValue:{values:t}}}var sr=class extends ps{constructor(e){super(),this.elements=e}};function Rb(n,e){let t=Mb(e);for(let r of n.elements)t=t.filter(i=>!kn(i,r));return{arrayValue:{values:t}}}var zr=class extends ps{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function l0(n){return Fe(n.integerValue||n.doubleValue)}function Mb(n){return _u(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Fi=class{constructor(e,t){this.field=e,this.transform=t}};function DL(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof or&&i instanceof or||r instanceof sr&&i instanceof sr?ls(r.elements,i.elements,kn):r instanceof zr&&i instanceof zr?kn(r.Pe,i.Pe):r instanceof qr&&i instanceof qr}(n.transform,e.transform)}var dy=class{constructor(e,t){this.version=e,this.transformResults=t}},qe=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function _d(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var gs=class{};function Nb(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Wr(n.key,qe.none()):new Gr(n.key,n.data,qe.none());{let t=n.data,r=vt.empty(),i=new Se(We.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new mn(n.key,r,new Gt(i.toArray()),qe.none())}}function CL(n,e,t){n instanceof Gr?function(i,o,s){let a=i.value.clone(),c=h0(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof mn?function(i,o,s){if(!_d(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=h0(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(Pb(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function du(n,e,t,r){return n instanceof Gr?function(o,s,a,c){if(!_d(o.precondition,s))return a;let l=o.value.clone(),h=f0(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof mn?function(o,s,a,c){if(!_d(o.precondition,s))return a;let l=f0(o.fieldTransforms,c,s),h=s.data;return h.setAll(Pb(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return _d(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function TL(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Ab(r.transform,i||null);o!=null&&(t===null&&(t=vt.empty()),t.set(r.field,o))}return t||null}function d0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ls(r,i,(o,s)=>DL(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Gr=class extends gs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},mn=class extends gs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Pb(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function h0(n,e,t){let r=new Map;K(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,EL(s,a,t[i]))}return r}function f0(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,IL(o,s,e))}return r}var Wr=class extends gs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},wu=class extends gs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Iu=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&CL(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=du(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=du(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Tb();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=Nb(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ie())}isEqual(e){return this.batchId===e.batchId&&ls(this.mutations,e.mutations,(t,r)=>d0(t,r))&&ls(this.baseMutations,e.baseMutations,(t,r)=>d0(t,r))}},hy=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){K(e.mutations.length===r.length);let i=function(){return vL}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Eu=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var fy=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Je,fe;function kb(n){switch(n){default:return z();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function Ob(n){if(n===void 0)return Ge("GRPC error has no .code"),x.UNKNOWN;switch(n){case Je.OK:return x.OK;case Je.CANCELLED:return x.CANCELLED;case Je.UNKNOWN:return x.UNKNOWN;case Je.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Je.INTERNAL:return x.INTERNAL;case Je.UNAVAILABLE:return x.UNAVAILABLE;case Je.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Je.NOT_FOUND:return x.NOT_FOUND;case Je.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Je.ABORTED:return x.ABORTED;case Je.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Je.DATA_LOSS:return x.DATA_LOSS;default:return z()}}(fe=Je||(Je={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";var p0=null;function Fb(){return new TextEncoder}var bL=new Nr([4294967295,4294967295],0);function g0(n){let e=Fb().encode(n),t=new Am;return t.update(e),new Uint8Array(t.digest())}function m0(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Nr([t,r],0),new Nr([i,o],0)]}var py=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ri(`Invalid padding: ${t}`);if(r<0)throw new Ri(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ri(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ri(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Nr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Nr.fromNumber(r)));return i.compare(bL)===1&&(i=new Nr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=g0(e),[r,i]=m0(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=g0(e),[r,i]=m0(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ri=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Du=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Cu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Q.min(),i,new ke(re),kt(),ie())}},Cu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ie(),ie(),ie())}};var cs=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Pd=class{constructor(e,t){this.targetId=e,this.me=t}},kd=class{constructor(e,t,r=Qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Od=class{constructor(){this.fe=0,this.ge=v0(),this.pe=Qe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),t=ie(),r=ie();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z()}}),new Cu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=v0()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,K(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},gy=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=kt(),this.qe=y0(),this.Qe=new ke(re)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Rd(o))if(r===0){let s=new $(o.path);this.Ue(t,s,tt.newNoDocument(s,Q.min()))}else K(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}p0?.et(function(h,p,m,v,b){var M,N,B,q,F,Y;let ee={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Z=p.unchangedNames;return Z&&(ee.bloomFilter={applied:b===0,hashCount:(M=Z?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(q=(B=(N=Z?.bits)===null||N===void 0?void 0:N.bitmap)===null||B===void 0?void 0:B.length)!==null&&q!==void 0?q:0,padding:(Y=(F=Z?.bits)===null||F===void 0?void 0:F.padding)!==null&&Y!==void 0?Y:0,mightContain:I=>{var y;return(y=v?.mightContain(I))!==null&&y!==void 0&&y}}),ee}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Ur(r).toUint8Array()}catch(c){if(c instanceof Sd)return pn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new py(s,i,o)}catch(c){return pn(c instanceof Ri?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Rd(a.target)){let c=new $(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,tt.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ie();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Du(e,t,this.Qe,this.ke,r);return this.ke=kt(),this.qe=y0(),this.Qe=new ke(re),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Od,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Se(re),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Od),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function y0(){return new ke($.comparator)}function v0(){return new ke($.comparator)}var SL={asc:"ASCENDING",desc:"DESCENDING"},AL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xL={and:"AND",or:"OR"},my=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function yy(n,e){return n.useProto3Json||Ou(e)?e:{value:e}}function ms(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Lb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function RL(n,e){return ms(n,e.toTimestamp())}function Ke(n){return K(!!n),Q.fromTimestamp(function(t){let r=ir(t);return new je(r.seconds,r.nanos)}(n))}function Wv(n,e){return vy(n,e).canonicalString()}function vy(n,e){let t=function(i){return new pe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Vb(n){let e=pe.fromString(n);return K(Kb(e)),e}function Tu(n,e){return Wv(n.databaseId,e.path)}function Nn(n,e){let t=Vb(e);if(t.get(1)!==n.databaseId.projectId)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(Ub(t))}function jb(n,e){return Wv(n.databaseId,e)}function Bb(n){let e=Vb(n);return e.length===4?pe.emptyPath():Ub(e)}function _y(n){return new pe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Ub(n){return K(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function _0(n,e,t){return{name:Tu(n,e),fields:t.value.mapValue.fields}}function $b(n,e,t){let r=Nn(n,e.name),i=Ke(e.updateTime),o=e.createTime?Ke(e.createTime):Q.min(),s=new vt({mapValue:{fields:e.fields}}),a=tt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function ML(n,e){return"found"in e?function(r,i){K(!!i.found),i.found.name,i.found.updateTime;let o=Nn(r,i.found.name),s=Ke(i.found.updateTime),a=i.found.createTime?Ke(i.found.createTime):Q.min(),c=new vt({mapValue:{fields:i.found.fields}});return tt.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){K(!!i.missing),K(!!i.readTime);let o=Nn(r,i.missing),s=Ke(i.readTime);return tt.newNoDocument(o,s)}(n,e):z()}function NL(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(K(h===void 0||typeof h=="string"),Qe.fromBase64String(h||"")):(K(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Qe.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?x.UNKNOWN:Ob(l.code);return new P(h,l.message||"")}(s);t=new kd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Nn(n,r.document.name),o=Ke(r.document.updateTime),s=r.document.createTime?Ke(r.document.createTime):Q.min(),a=new vt({mapValue:{fields:r.document.fields}}),c=tt.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new cs(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Nn(n,r.document),o=r.readTime?Ke(r.readTime):Q.min(),s=tt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new cs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Nn(n,r.document),o=r.removedTargetIds||[];t=new cs([],o,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new fy(i,o),a=r.targetId;t=new Pd(a,s)}}return t}function bu(n,e){let t;if(e instanceof Gr)t={update:_0(n,e.key,e.value)};else if(e instanceof Wr)t={delete:Tu(n,e.key)};else if(e instanceof mn)t={update:_0(n,e.key,e.data),updateMask:VL(e.fieldMask)};else{if(!(e instanceof wu))return z();t={verify:Tu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof qr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof or)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof sr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof zr)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:RL(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z()}(n,e.precondition)),t}function wy(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?qe.updateTime(Ke(o.updateTime)):o.exists!==void 0?qe.exists(o.exists):qe.none()}(e.currentDocument):qe.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)K(a.setToServerValue==="REQUEST_TIME"),c=new qr;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new or(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new sr(h)}else"increment"in a?c=new zr(s,a.increment):z();let l=We.fromServerFormat(a.fieldPath);return new Fi(l,c)}(n,i)):[];if(e.update){e.update.name;let i=Nn(n,e.update.name),o=new vt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new Gt(l.map(h=>We.fromServerFormat(h)))}(e.updateMask);return new mn(i,o,s,t,r)}return new Gr(i,o,t,r)}if(e.delete){let i=Nn(n,e.delete);return new Wr(i,t)}if(e.verify){let i=Nn(n,e.verify);return new wu(i,t)}return z()}function PL(n,e){return n&&n.length>0?(K(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Ke(i.updateTime):Ke(o);return s.isEqual(Q.min())&&(s=Ke(o)),new dy(s,i.transformResults||[])}(t,e))):[]}function Hb(n,e){return{documents:[jb(n,e.path)]}}function qb(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=jb(n,i);let o=function(l){if(l.length!==0)return Wb(Ie.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:rs(m.field),direction:OL(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=yy(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function zb(n){let e=Bb(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){K(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=Gb(p);return m instanceof Ie&&Hv(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(b){return new ki(is(b.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Ou(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(p){let m=!!p.before,v=p.values||[];return new On(v,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new On(v,m)}(t.endAt)),_b(e,i,s,o,a,"F",c,l)}function kL(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Gb(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=is(t.unaryFilter.field);return ce.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=is(t.unaryFilter.field);return ce.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=is(t.unaryFilter.field);return ce.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=is(t.unaryFilter.field);return ce.create(s,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return ce.create(is(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ie.create(t.compositeFilter.filters.map(r=>Gb(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function OL(n){return SL[n]}function FL(n){return AL[n]}function LL(n){return xL[n]}function rs(n){return{fieldPath:n.canonicalString()}}function is(n){return We.fromServerFormat(n.fieldPath)}function Wb(n){return n instanceof ce?function(t){if(t.op==="=="){if(n0(t.value))return{unaryFilter:{field:rs(t.field),op:"IS_NAN"}};if(t0(t.value))return{unaryFilter:{field:rs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(n0(t.value))return{unaryFilter:{field:rs(t.field),op:"IS_NOT_NAN"}};if(t0(t.value))return{unaryFilter:{field:rs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rs(t.field),op:FL(t.op),value:t.value}}}(n):n instanceof Ie?function(t){let r=t.getFilters().map(i=>Wb(i));return r.length===1?r[0]:{compositeFilter:{op:LL(t.op),filters:r}}}(n):z()}function VL(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Kb(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ys=class n{constructor(e,t,r,i,o=Q.min(),s=Q.min(),a=Qe.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Fd=class{constructor(e){this.ct=e}};function jL(n,e){let t;if(e.document)t=$b(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=Vi(e.noDocument.readTime);t=tt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return z();{let r=$.fromSegments(e.unknownDocument.path),i=Vi(e.unknownDocument.version);t=tt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new je(i[0],i[1]);return Q.fromTimestamp(o)}(e.readTime)),t}function w0(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ld(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Tu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:ms(o,s.version.toTimestamp()),createTime:ms(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Li(e.version)};else{if(!e.isUnknownDocument())return z();r.unknownDocument={path:t.path.toArray(),version:Li(e.version)}}return r}function Ld(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Li(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Vi(n){let e=new je(n.seconds,n.nanoseconds);return Q.fromTimestamp(e)}function Si(n,e){let t=(e.baseMutations||[]).map(o=>wy(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>wy(n.ct,o)),i=je.fromMillis(e.localWriteTimeMs);return new Iu(e.batchId,i,t,r)}function uu(n){let e=Vi(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Vi(n.lastLimboFreeSnapshotVersion):Q.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return K(o.documents.length===1),At(As(Bb(o.documents[0])))}(n.query):function(o){return At(zb(o))}(n.query),new ys(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Qe.fromBase64String(n.resumeToken))}function Qb(n,e){let t=Li(e.snapshotVersion),r=Li(e.lastLimboFreeSnapshotVersion),i;i=Rd(e.target)?Hb(n.ct,e.target):qb(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Oi(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Kv(n){let e=zb({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Nd(e,e.limit,"L"):e}function km(n,e){return new Eu(e.largestBatchId,wy(n.ct,e.overlayMutation))}function I0(n,e){let t=e.path.lastSegment();return[n,St(e.path.popLast()),t]}function E0(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Li(r.readTime),documentKey:St(r.documentKey.path),largestBatchId:r.largestBatchId}}var Iy=class{getBundleMetadata(e,t){return D0(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Vi(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return D0(e).put(function(i){return{bundleId:i.id,createTime:Li(Ke(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return C0(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:Kv(o.bundledQuery),readTime:Vi(o.readTime)}}(r)})}saveNamedQuery(e,t){return C0(e).put(function(i){return{name:i.name,readTime:Li(Ke(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function D0(n){return it(n,"bundles")}function C0(n){return it(n,"namedQueries")}var Vd=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return ru(e).get(I0(this.userId,t)).next(r=>r?km(this.serializer,r):null)}getOverlays(e,t){let r=Rn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Eu(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(St(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(ru(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Rn(),o=St(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return ru(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=km(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Rn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ru(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,h)=>{let p=km(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return ru(e).put(function(i,o,s){let[a,c,l]=I0(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:bu(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function ru(n){return it(n,"documentOverlays")}var Ey=class{Pt(e){return it(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Qe.fromUint8Array(r):Qe.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var nr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Fe(e.integerValue));else if("doubleValue"in e){let r=Fe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),gu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=ir(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ur(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?db(e)?this.dt(t,Number.MAX_SAFE_INTEGER):_h(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Fe(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};nr.vt=new nr;function BL(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function T0(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=BL(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var Dy=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=T0(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=T0(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Cy=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},Ty=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Ai=class{constructor(){this.jt=new Dy,this.Ht=new Cy(this.jt),this.Jt=new Ty(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var xi=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Pr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=b0(n.arrayValue,e.arrayValue),t!==0?t:(t=b0(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function b0(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var jd=class{constructor(e){this.Xt=new Se((t,r)=>We.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(K(e.collectionGroup===this.collectionId),this.nn)return!1;let t=Gm(e);if(t!==void 0&&!this.sn(t))return!1;let r=Ti(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.on(a,c)||!this._n(this.en[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Se(We.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new as(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new as(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new as(r.field,r.dir==="asc"?0:1)));return new ds(ds.UNKNOWN_ID,this.collectionId,t,pu.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function Yb(n){var e,t;if(K(n instanceof ce||n instanceof Ie),n instanceof ce){if(n instanceof xd){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>ce.create(n.field,"==",o)))||[];return Ie.create(i,"or")}return n}let r=n.filters.map(i=>Yb(i));return Ie.create(r,n.op)}function UL(n){if(n.getFilters().length===0)return[];let e=Ay(Yb(n));return K(Zb(e)),by(e)||Sy(e)?[e]:e.getFilters()}function by(n){return n instanceof ce}function Sy(n){return n instanceof Ie&&Hv(n)}function Zb(n){return by(n)||Sy(n)||function(t){if(t instanceof Ie&&ey(t)){for(let r of t.getFilters())if(!by(r)&&!Sy(r))return!1;return!0}return!1}(n)}function Ay(n){if(K(n instanceof ce||n instanceof Ie),n instanceof ce)return n;if(n.filters.length===1)return Ay(n.filters[0]);let e=n.filters.map(r=>Ay(r)),t=Ie.create(e,n.op);return t=Bd(t),Zb(t)?t:(K(t instanceof Ie),K(fs(t)),K(t.filters.length>1),t.filters.reduce((r,i)=>Qv(r,i)))}function Qv(n,e){let t;return K(n instanceof ce||n instanceof Ie),K(e instanceof ce||e instanceof Ie),t=n instanceof ce?e instanceof ce?function(i,o){return Ie.create([i,o],"and")}(n,e):S0(n,e):e instanceof ce?S0(e,n):function(i,o){if(K(i.filters.length>0&&o.filters.length>0),fs(i)&&fs(o))return mb(i,o.getFilters());let s=ey(i)?i:o,a=ey(i)?o:i,c=s.filters.map(l=>Qv(l,a));return Ie.create(c,"or")}(n,e),Bd(t)}function S0(n,e){if(fs(e))return mb(e,n.getFilters());{let t=e.filters.map(r=>Qv(n,r));return Ie.create(t,"or")}}function Bd(n){if(K(n instanceof ce||n instanceof Ie),n instanceof ce)return n;let e=n.getFilters();if(e.length===1)return Bd(e[0]);if(pb(n))return n;let t=e.map(i=>Bd(i)),r=[];return t.forEach(i=>{i instanceof ce?r.push(i):i instanceof Ie&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ie.create(r,n.op)}var xy=class{constructor(){this.un=new Su}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(rn.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(rn.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},Su=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Se(pe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Se(pe.comparator)).toArray()}};var hd=new Uint8Array(0),Ry=class{constructor(e,t){this.databaseId=t,this.cn=new Su,this.ln=new Fn(r=>Oi(r),(r,i)=>Fu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:St(i)};return A0(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[X0(t),""],!1,!0);return A0(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(xn(s.parent))}return r})}addFieldIndex(e,t){let r=iu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Xo(e);return o.next(a=>{s.put(E0(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=iu(e),i=Xo(e),o=Jo(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=iu(e),r=Jo(e),i=Xo(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new jd(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Jo(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ie(),a=[];return S.forEach(o,(c,l)=>{k("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(Y=>`${Y.fieldPath}:${Y.kind}`).join(",")}`}(c)} to execute ${Oi(t)}`);let h=function(F,Y){let ee=Gm(Y);if(ee===void 0)return null;for(let Z of Md(F,ee.fieldPath))switch(Z.op){case"array-contains-any":return Z.value.arrayValue.values||[];case"array-contains":return[Z.value]}return null}(l,c),p=function(F,Y){let ee=new Map;for(let Z of Ti(Y))for(let I of Md(F,Z.fieldPath))switch(I.op){case"==":case"in":ee.set(Z.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ee.set(Z.fieldPath.canonicalString(),I.value),Array.from(ee.values())}return null}(l,c),m=function(F,Y){let ee=[],Z=!0;for(let I of Ti(Y)){let y=I.kind===0?a0(F,I.fieldPath,F.startAt):u0(F,I.fieldPath,F.startAt);ee.push(y.value),Z&&(Z=y.inclusive)}return new On(ee,Z)}(l,c),v=function(F,Y){let ee=[],Z=!0;for(let I of Ti(Y)){let y=I.kind===0?u0(F,I.fieldPath,F.endAt):a0(F,I.fieldPath,F.endAt);ee.push(y.value),Z&&(Z=y.inclusive)}return new On(ee,Z)}(l,c),b=this.In(c,l,m),M=this.In(c,l,v),N=this.Tn(c,l,p),B=this.En(c.indexId,h,b,m.inclusive,M,v.inclusive,N);return S.forEach(B,q=>r.G(q,t.limit).next(F=>{F.forEach(Y=>{let ee=$.fromSegments(Y.documentKey);s.has(ee)||(s=s.add(ee),a.push(ee))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=UL(Ie.create(e.filters,"and")).map(r=>cy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),h=[];for(let p=0;p<c;++p){let m=t?this.dn(t[p/l]):hd,v=this.An(e,m,r[p%l],i),b=this.Rn(e,m,o[p%l],s),M=a.map(N=>this.An(e,m,N,!0));h.push(...this.createRange(v,b,M))}return h}An(e,t,r,i){let o=new xi(e,$.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new xi(e,$.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new jd(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new Se(We.comparator),h=!1;for(let p of c.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Ai;for(let i of Ti(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);nr.vt.It(o,s)}return r.zt()}dn(e){let t=new Ai;return nr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Ai;return nr.vt.It(Pi(this.databaseId,t),r.Yt(function(o){let s=Ti(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Ai);let o=0;for(let s of Ti(e)){let a=r[o++];for(let c of i)if(this.fn(t,s.fieldPath)&&_u(a))i=this.gn(i,s,a);else{let l=c.Yt(s.kind);nr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Ai;c.seed(a.zt()),nr.vt.It(s,c.Yt(t.kind)),o.push(c)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof ce&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=iu(e),i=Xo(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(h,p){let m=p?new pu(p.sequenceNumber,new rn(Vi(p.readTime),new $(xn(p.documentKey)),p.largestBatchId)):pu.empty(),v=h.fields.map(([b,M])=>new as(We.fromServerFormat(b),M));return new ds(h.indexId,h.collectionGroup,v,m)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:re(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=iu(e),o=Xo(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,c=>o.put(E0(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,c=>this.wn(e,i,c).next(l=>{let h=this.Sn(o,c);return l.isEqual(h)?S.resolve():this.bn(e,o,c,l,h)}))))})}Dn(e,t,r,i){return Jo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Jo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Jo(e),o=new Se(Pr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new xi(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Se(Pr),i=this.Vn(t,e);if(i==null)return r;let o=Gm(t);if(o!=null){let s=e.data.field(o.fieldPath);if(_u(s))for(let a of s.arrayValue.values||[])r=r.add(new xi(t.indexId,e.key,this.dn(a),i))}else r=r.add(new xi(t.indexId,e.key,hd,i));return r}bn(e,t,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(c,l,h,p,m){let v=c.getIterator(),b=l.getIterator(),M=Zo(v),N=Zo(b);for(;M||N;){let B=!1,q=!1;if(M&&N){let F=h(M,N);F<0?q=!0:F>0&&(B=!0)}else M!=null?q=!0:B=!0;B?(p(N),N=Zo(b)):q?(m(M),M=Zo(v)):(M=Zo(v),N=Zo(b))}}(i,o,Pr,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return Xo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Pr(s,a)).filter((s,a,c)=>!a||Pr(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Pr(s,e),c=Pr(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(s),i.push(s.Zt());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,hd,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,hd,[]];o.push(IDBKeyRange.bound(a,c))}return o}Cn(e,t){return Pr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(x0)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||z())).next(x0)}};function A0(n){return it(n,"collectionParents")}function Jo(n){return it(n,"indexEntries")}function iu(n){return it(n,"indexConfiguration")}function Xo(n){return it(n,"indexState")}function x0(n){K(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;jv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new rn(e.readTime,e.documentKey,t)}var R0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function Jb(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(c.next(()=>{K(a===1)}));let l=[];for(let h of t.mutations){let p=ob(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function Ud(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw z();e=n.noDocument}return JSON.stringify(e).length}nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(41943040,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);var $d=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){K(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return kr(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=os(e),s=kr(e);return s.add({}).next(a=>{K(typeof a=="number");let c=new Iu(a,t,r,i),l=function(v,b,M){let N=M.baseMutations.map(q=>bu(v.ct,q)),B=M.mutations.map(q=>bu(v.ct,q));return{userId:b,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:N,mutations:B}}(this.serializer,this.userId,c),h=[],p=new Se((m,v)=>re(m.canonicalString(),v.canonicalString()));for(let m of i){let v=ob(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(v,WF))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),S.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return kr(e).get(t).next(r=>r?(K(r.userId===this.userId),Si(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return kr(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(K(a.batchId>=r),o=Si(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return kr(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return kr(e).U("userMutationsIndex",t).next(r=>r.map(i=>Si(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=md(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return os(e).J({range:i},(s,a,c)=>{let[l,h,p]=s,m=xn(h);if(l===this.userId&&t.path.isEqual(m))return kr(e).get(p).next(v=>{if(!v)throw z();K(v.userId===this.userId),o.push(Si(this.serializer,v))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Se(re),i=[];return t.forEach(o=>{let s=md(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=os(e).J({range:a},(l,h,p)=>{let[m,v,b]=l,M=xn(v);m===this.userId&&o.path.isEqual(M)?r=r.add(b):p.done()});i.push(c)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=md(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Se(re);return os(e).J({range:s},(c,l,h)=>{let[p,m,v]=c,b=xn(m);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(v)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(kr(e).get(o).next(s=>{if(s===null)throw z();K(s.userId===this.userId),r.push(Si(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Jb(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return os(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=xn(o[1]);i.push(c)}else a.done()}).next(()=>{K(i.length===0)})})}containsKey(e,t){return Xb(e,this.userId,t)}Nn(e){return eS(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function Xb(n,e,t){let r=md(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return os(n).J({range:o,H:!0},(a,c,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function kr(n){return it(n,"mutations")}function os(n){return it(n,"documentMutations")}function eS(n){return it(n,"mutationQueues")}var vs=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var My=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new vs(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Q.fromTimestamp(new je(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>es(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(K(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return es(e).J((s,a)=>{let c=uu(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return es(e).J((r,i)=>{let o=uu(i);t(o)})}qn(e){return M0(e).get("targetGlobalKey").next(t=>(K(t!==null),t))}Qn(e,t){return M0(e).put("targetGlobalKey",t)}Kn(e,t){return es(e).put(Qb(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Oi(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return es(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=uu(a);Fu(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Or(e);return t.forEach(s=>{let a=St(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=Or(e);return S.forEach(t,o=>{let s=St(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Or(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Or(e),o=ie();return i.J({range:r,H:!0},(s,a,c)=>{let l=xn(s[1]),h=new $(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=St(t.path),i=IDBKeyRange.bound([r],[X0(r)],!1,!0),o=0;return Or(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return es(e).get(t).next(r=>r?uu(r):null)}};function es(n){return it(n,"targets")}function M0(n){return it(n,"targetGlobal")}function Or(n){return it(n,"targetDocuments")}function N0([n,e],[t,r]){let i=re(n,t);return i===0?re(e,r):i}var Ny=class{constructor(e){this.Un=e,this.buffer=new Se(N0),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();N0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Py=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>R(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Yr(t)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Qr(t)}yield this.Hn(3e5)}))}},ky=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(zt.oe);let r=new Ny(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(R0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),R0):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ts()<=_n.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function $L(n,e){return new ky(n,e)}var Oy=class{constructor(e,t){this.db=e,this.garbageCollector=$L(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return fd(e,r)}removeReference(e,t,r){return fd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return fd(e,t)}nr(e,t){return function(i,o){let s=!1;return eS(i).Y(a=>Xb(i,a,o).next(c=>(c&&(s=!0),S.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let c=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Q.min()),Or(e).delete(function(p){return[0,St(p.path)]}(s))))});i.push(c)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return fd(e,t)}tr(e,t){let r=Or(e),i,o=zt.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==zt.oe&&t(new $(xn(i)),o),o=l,i=c):o=zt.oe}).next(()=>{o!==zt.oe&&t(new $(xn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function fd(n,e){return Or(n).put(function(r,i){return{targetId:0,path:St(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Hd=class{constructor(){this.changes=new Fn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Fy=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ci(e).put(r)}removeEntry(e,t,r){return Ci(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Ld(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=tt.newInvalidDocument(t);return Ci(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ou(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:tt.newInvalidDocument(t)};return Ci(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ou(t))},(i,o)=>{r={document:this.ir(t,o),size:Ud(o)}}).next(()=>r)}getEntries(e,t){let r=kt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=kt(),i=new ke($.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,Ud(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new Se(O0);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(ou(i.first()),ou(i.last())),s=i.getIterator(),a=s.getNext();return Ci(e).J({index:"documentKeyIndex",range:o},(c,l,h)=>{let p=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&O0(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(ou(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Ld(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ci(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=kt();for(let p of l){let m=this.ir($.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Vu(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=kt(),s=k0(t,r),a=k0(t,rn.max());return Ci(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,h)=>{let p=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new Ly(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return P0(e).get("remoteDocumentGlobalKey").next(t=>(K(!!t),t))}rr(e,t){return P0(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=jL(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Q.min())))return r}return tt.newInvalidDocument(e)}};function tS(n){return new Fy(n)}var Ly=class extends Hd{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Fn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Se((o,s)=>re(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=w0(this.cr.serializer,s);i=i.add(o.path.popLast());let l=Ud(c);r+=l-a.size,t.push(this.cr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=w0(this.cr.serializer,s.convertToNoDocument(Q.min()));t.push(this.cr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function P0(n){return it(n,"remoteDocumentGlobal")}function Ci(n){return it(n,"remoteDocumentsV14")}function ou(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function k0(n,e){let t=e.documentKey.path.toArray();return[n,Ld(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function O0(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=re(t[o],r[o]),i)return i;return i=re(t.length,r.length),i||(i=re(t[t.length-2],r[r.length-2]),i||re(t[t.length-1],r[r.length-1]))}var Vy=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var qd=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&du(r.mutation,i,Gt.empty(),je.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ie()){let i=Rn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=au();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Rn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ie()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=kt(),s=lu(),a=function(){return lu()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof mn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),du(h.mutation,l,h.mutation.getFieldMask(),je.now())):s.set(l.key,Gt.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new Vy(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=lu(),i=new ke((s,a)=>s-a),o=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||Gt.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||ie()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=Tb();h.forEach(m=>{if(!o.has(m)){let v=Nb(t.get(m),r.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(Rn()),a=-1,c=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,ie())).next(h=>({batchId:a,changes:Cb(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=au();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=au();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,c=>{let l=function(p,m){return new gn(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,tt.newInvalidDocument(h)))});let a=au();return s.forEach((c,l)=>{let h=o.get(c);h!==void 0&&du(h.mutation,l,Gt.empty(),je.now()),Vu(t,l)&&(a=a.insert(c,l))}),a})}};var jy=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ke(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Kv(i.bundledQuery),readTime:Ke(i.readTime)}}(t)),S.resolve()}};var By=class{constructor(){this.overlays=new ke($.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Rn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=Rn(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new ke((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Rn(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Rn(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Eu(t,r));let o=this.Ir.get(t);o===void 0&&(o=ie(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var Uy=class{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var Au=class{constructor(){this.Tr=new Se(Xe.Er),this.dr=new Se(Xe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Xe(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Xe(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new pe([])),r=new Xe(t,e),i=new Xe(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new pe([])),r=new Xe(t,e),i=new Xe(t,e+1),o=ie();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Xe(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Xe=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||re(e.wr,t.wr)}static Ar(e,t){return re(e.wr,t.wr)||$.comparator(e.key,t.key)}};var $y=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Se(Xe.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Iu(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Xe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Xe(t,0),i=new Xe(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Se(re);return t.forEach(i=>{let o=new Xe(i,0),s=new Xe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new Xe(new $(o),0),a=new Se(re);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){K(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new Xe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Xe(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Hy=class{constructor(e){this.Mr=e,this.docs=function(){return new ke($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():tt.newInvalidDocument(t))}getEntries(e,t){let r=kt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():tt.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=kt(),s=t.path,a=new $(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||jv(tb(h),r)<=0||(i.has(h.key)||Vu(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){z()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new qy(this)}getSize(e){return S.resolve(this.size)}},qy=class extends Hd{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var zy=class{constructor(e){this.persistence=e,this.Nr=new Fn(t=>Oi(t),Fu),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Au,this.targetCount=0,this.kr=vs.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new vs(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var zd=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new zt(0),this.Kr=!1,this.Kr=!0,this.$r=new Uy,this.referenceDelegate=e(this),this.Ur=new zy(this),this.indexManager=new xy,this.remoteDocumentCache=function(i){return new Hy(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Fd(t),this.Gr=new jy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new By,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new $y(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new Gy(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Gy=class extends Cd{constructor(e){super(),this.currentSequenceNumber=e}},Gd=class n{constructor(e){this.persistence=e,this.Jr=new Au,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,Q.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Wy=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Td("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ZT,{unique:!0}),c.createObjectStore("documentMutations")}(e),F0(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),F0(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Q.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ZT,{unique:!0});let p=l.store("mutations"),m=h.map(v=>p.put(v));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:oL});l.createIndex("collectionPathOverlayIndex",sL,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",aL,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:KF});l.createIndex("documentKeyIndex",QF),l.createIndex("collectionGroupIndex",YF)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:tL}).createIndex("sequenceNumberIndex",nL,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:rL}).createIndex("documentKeyIndex",iL,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Ud(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,c=>{K(c.userId===o.userId);let l=Si(this.serializer,c);return Jb(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new pe(s),l=function(p){return[0,St(p)]}(c);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:St(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:eL});let r=t.store("collectionParents"),i=new Su,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:St(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new pe(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{let h=xn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=uu(i),s=Qb(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),c=function(p){return p.document?new $(pe.fromString(p.document.name).popFirst(5)):p.noDocument?$.fromSegments(p.noDocument.path):p.unknownDocument?$.fromSegments(p.unknownDocument.path):z()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=tS(this.serializer),o=new zd(Gd.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let h=(l=a.get(c.userId))!==null&&l!==void 0?l:ie();Si(this.serializer,c).keys().forEach(p=>h=h.add(p)),a.set(c.userId,h)}),S.forEach(a,(c,l)=>{let h=new et(l),p=Vd.lt(this.serializer,h),m=o.getIndexManager(h),v=$d.lt(h,this.serializer,m,o.referenceDelegate);return new qd(i,v,p,m).recalculateAndSaveOverlaysForDocumentKeys(new mu(t,zt.oe),c).next()})})}};function F0(n){n.createObjectStore("targetDocuments",{keyPath:JF}).createIndex("documentTargetsIndex",XF,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ZF,{unique:!0}),n.createObjectStore("targetGlobal")}var Om="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ky=class n{constructor(e,t,r,i,o,s,a,c,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new P(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Oy(this,i),this.Ai=t+"main",this.serializer=new Fd(c),this.Ri=new Br(this.Ai,this.hi,new Wy(this.serializer)),this.$r=new Ey,this.Ur=new My(this.referenceDelegate,this.serializer),this.remoteDocumentCache=tS(this.serializer),this.Gr=new Iy,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Ge("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Om);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new zt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>R(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>R(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>R(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>pd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Yr(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return su(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return pd(e).delete(this.clientId)}Fi(){return R(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=it(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):su(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Om);return!1}}return!(!this.networkEnabled||!this.inForeground)||pd(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return R(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new mu(e,zt.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>pd(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return $d.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ry(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Vd.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===17?lL:c===16?cL:c===15?Uv:c===14?ub:c===13?ab:c===12?uL:c===11?sb:void z()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new mu(a,this.Qr?this.Qr.next():zt.oe),t==="readwrite-primary"?this.wi(s).next(c=>!!c||this.Si(s)).next(c=>{if(!c)throw Ge(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(x.FAILED_PRECONDITION,nb);return r(s)}).next(c=>this.Di(s).next(()=>c)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return su(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(x.FAILED_PRECONDITION,Om)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return su(e).put("owner",t)}static D(){return Br.D()}bi(e){let t=su(e);return t.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Ge(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;uf()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ge("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ge("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function su(n){return it(n,"owner")}function pd(n){return it(n,"clientMetadata")}function Yv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var Qy=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ie(),i=ie();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Yy=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Wd=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return uf()?8:rb(na())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Yy;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(ts()<=_n.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",ns(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(ts()<=_n.DEBUG&&k("QueryEngine","Query:",ns(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ts()<=_n.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",ns(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,At(t))):S.resolve())}Yi(e,t){if(c0(t))return S.resolve(null);let r=At(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Nd(t,null,"F"),r=At(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ie(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,s,c.readTime)?this.Yi(e,Nd(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return c0(t)||i.isEqual(Q.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(ts()<=_n.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ns(t)),this.rs(e,s,t,eb(i,-1)).next(a=>a))})}ts(e,t){let r=new Se(Eb(e));return t.forEach((i,o)=>{Vu(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return ts()<=_n.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",ns(t)),this.Ji.getDocumentsMatchingQuery(e,t,rn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Zy=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new ke(re),this._s=new Fn(o=>Oi(o),Fu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qd(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function nS(n,e,t,r){return new Zy(n,e,t,r)}function rS(n,e){return R(this,null,function*(){let t=U(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ie();for(let l of i){s.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function HL(n,e){let t=U(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,m=p.keys(),v=S.resolve();return m.forEach(b=>{v=v.next(()=>h.getEntry(c,b)).next(M=>{let N=l.docVersions.get(b);K(N!==null),M.version.compareTo(N)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ie();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function iS(n){let e=U(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function qL(n,e){let t=U(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Qe.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(M,N,B){return M.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(m,v,h)&&a.push(t.Ur.updateTargetData(o,v))});let c=kt(),l=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(oS(o,s,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(Q.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.os=i,o))}function oS(n,e,t){let r=ie(),i=ie();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=kt();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Q.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function zL(n,e){let t=U(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _s(n,e){let t=U(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new ys(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function ws(n,e,t){return R(this,null,function*(){let r=U(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Yr(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Kd(n,e,t){let r=U(n),i=Q.min(),o=ie();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,h){let p=U(c),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,At(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:Q.min(),t?o:ie())).next(a=>(uS(r,Ib(e),a),{documents:a,Ts:o})))}function sS(n,e){let t=U(n),r=U(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function aS(n,e){let t=U(n),r=t.us.get(e)||Q.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,eb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(uS(t,e,i),i))}function uS(n,e,t){let r=n.us.get(e)||Q.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function GL(n,e,t,r){return R(this,null,function*(){let i=U(n),o=ie(),s=kt();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield _s(i,function(h){return At(As(pe.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>oS(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function WL(r,i){return R(this,arguments,function*(n,e,t=ie()){let o=yield _s(n,At(Kv(e.bundledQuery))),s=U(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Ke(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Qe.EMPTY_BYTE_STRING,c);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function L0(n,e){return`firestore_clients_${n}_${e}`}function V0(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Fm(n,e){return`firestore_targets_${n}_${e}`}var Qd=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Ge("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},hu=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(Ge("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Yd=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=zv();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=ib(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Ge("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},Jy=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Ge("SharedClientState",`Failed to parse online state: ${e}`),null)}},xu=class{constructor(){this.activeTargetIds=zv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},fu=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new ke(re),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=L0(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new xu),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return R(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(L0(this.persistenceKey,r));if(i){let o=Yd.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Fm(this.persistenceKey,e));if(i){let o=hu.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Fm(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k("SharedClientState","READ",e,t),t}setItem(e,t){k("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(k("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Ge("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>R(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=zt.oe;if(o!=null)try{let a=JSON.parse(o);K(typeof a=="number"),s=a}catch(a){Ge("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==zt.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Qd(this.currentUser,e,t,r),o=V0(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=V0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Fm(this.persistenceKey,e),o=new hu(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Yd.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Qd.Rs(new et(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return hu.Rs(i,t)}Ls(e){return Jy.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return R(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=zv();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Zd=class{constructor(){this.so=new xu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new xu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Xy=class{_o(e){}shutdown(){}};var Jd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var gd=null;function Lm(){return gd===null?gd=function(){return 268435456+Math.round(2147483648*Math.random())}():gd++,"0x"+gd.toString(16)}var KL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var ev=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var yt="WebChannelConnection",tv=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Lm(),c=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,c,l,i).then(h=>(k("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw pn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ss}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=KL[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Lm();return new Promise((s,a)=>{let c=new xm;c.setWithCredentials(!0),c.listenOnce(Rm.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case nu.NO_ERROR:let h=c.getResponseJson();k(yt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case nu.TIMEOUT:k(yt,`RPC '${e}' ${o} timed out`),a(new P(x.DEADLINE_EXCEEDED,"Request time out"));break;case nu.HTTP_ERROR:let p=c.getStatus();if(k(yt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let b=function(N){let B=N.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(B)>=0?B:x.UNKNOWN}(v.status);a(new P(b,v.message))}else a(new P(x.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new P(x.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{k(yt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(yt,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Lm(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Pm(),a=Nm(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");k(yt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c),m=!1,v=!1,b=new ev({Io:N=>{v?k(yt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(k(yt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),k(yt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),M=(N,B,q)=>{N.listen(B,F=>{try{q(F)}catch(Y){setTimeout(()=>{throw Y},0)}})};return M(p,Yo.EventType.OPEN,()=>{v||(k(yt,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),M(p,Yo.EventType.CLOSE,()=>{v||(v=!0,k(yt,`RPC '${e}' stream ${i} transport closed`),b.So())}),M(p,Yo.EventType.ERROR,N=>{v||(v=!0,pn(yt,`RPC '${e}' stream ${i} transport errored:`,N),b.So(new P(x.UNAVAILABLE,"The operation could not be completed")))}),M(p,Yo.EventType.MESSAGE,N=>{var B;if(!v){let q=N.data[0];K(!!q);let F=q,Y=F.error||((B=F[0])===null||B===void 0?void 0:B.error);if(Y){k(yt,`RPC '${e}' stream ${i} received error:`,Y);let ee=Y.status,Z=function(w){let E=Je[w];if(E!==void 0)return Ob(E)}(ee),I=Y.message;Z===void 0&&(Z=x.INTERNAL,I="Unknown error status: "+ee+" with message "+Y.message),v=!0,b.So(new P(Z,I)),p.close()}else k(yt,`RPC '${e}' stream ${i} received:`,q),b.bo(q)}}),M(a,Mm.STAT_EVENT,N=>{N.stat===dd.PROXY?k(yt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===dd.NOPROXY&&k(yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function cS(){return typeof window<"u"?window:null}function wd(){return typeof document<"u"?document:null}function ju(n){return new my(n,!0)}var Ru=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Xd=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ru(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return R(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return R(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return R(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(Ge(t.toString()),Ge("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>R(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},nv=class extends Xd{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=NL(this.serializer,e),r=function(o){if(!("targetChange"in o))return Q.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Q.min():s.readTime?Ke(s.readTime):Q.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=_y(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=Rd(c)?{documents:Hb(o,c)}:{query:qb(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Lb(o,s.resumeToken);let l=yy(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Q.min())>0){a.readTime=ms(o,s.snapshotVersion.toTimestamp());let l=yy(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=kL(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=_y(this.serializer),t.removeTarget=e,this.a_(t)}},rv=class extends Xd{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return K(!!e.streamToken),this.lastStreamToken=e.streamToken,K(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){K(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=PL(e.writeResults,e.commitTime),r=Ke(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=_y(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>bu(this.serializer,r))};this.a_(t)}};var iv=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,vy(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(x.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,vy(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(x.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},ov=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ge(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var sv=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>R(this,null,function*(){Zr(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(c){return R(this,null,function*(){let l=U(c);l.L_.add(4),yield xs(l),l.q_.set("Unknown"),l.L_.delete(4),yield Bu(l)})}(this))}))}),this.q_=new ov(r,i)}};function Bu(n){return R(this,null,function*(){if(Zr(n))for(let e of n.B_)yield e(!0)})}function xs(n){return R(this,null,function*(){for(let e of n.B_)yield e(!1)})}function wh(n,e){let t=U(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Xv(t)?Jv(t):Ms(t).r_()&&Zv(t,e))}function Is(n,e){let t=U(n),r=Ms(t);t.N_.delete(e),r.r_()&&lS(t,e),t.N_.size===0&&(r.r_()?r.o_():Zr(t)&&t.q_.set("Unknown"))}function Zv(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ms(n).A_(e)}function lS(n,e){n.Q_.xe(e),Ms(n).R_(e)}function Jv(n){n.Q_=new gy({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ms(n).start(),n.q_.v_()}function Xv(n){return Zr(n)&&!Ms(n).n_()&&n.N_.size>0}function Zr(n){return U(n).L_.size===0}function dS(n){n.Q_=void 0}function QL(n){return R(this,null,function*(){n.q_.set("Online")})}function YL(n){return R(this,null,function*(){n.N_.forEach((e,t)=>{Zv(n,e)})})}function ZL(n,e){return R(this,null,function*(){dS(n),Xv(n)?(n.q_.M_(e),Jv(n)):n.q_.set("Unknown")})}function JL(n,e,t){return R(this,null,function*(){if(n.q_.set("Online"),e instanceof kd&&e.state===2&&e.cause)try{yield function(i,o){return R(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield eh(n,r)}else if(e instanceof cs?n.Q_.Ke(e):e instanceof Pd?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Q.min()))try{let r=yield iS(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let h=o.N_.get(c);if(!h)return;o.N_.set(c,h.withResumeToken(Qe.EMPTY_BYTE_STRING,h.snapshotVersion)),lS(o,c);let p=new ys(h.target,c,l,h.sequenceNumber);Zv(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield eh(n,r)}})}function eh(n,e,t){return R(this,null,function*(){if(!Yr(e))throw e;n.L_.add(1),yield xs(n),n.q_.set("Offline"),t||(t=()=>iS(n.localStore)),n.asyncQueue.enqueueRetryable(()=>R(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Bu(n)}))})}function hS(n,e){return e().catch(t=>eh(n,t,e))}function Rs(n){return R(this,null,function*(){let e=U(n),t=Kr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;XL(e);)try{let i=yield zL(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,eV(e,i)}catch(i){yield eh(e,i)}fS(e)&&pS(e)})}function XL(n){return Zr(n)&&n.O_.length<10}function eV(n,e){n.O_.push(e);let t=Kr(n);t.r_()&&t.V_&&t.m_(e.mutations)}function fS(n){return Zr(n)&&!Kr(n).n_()&&n.O_.length>0}function pS(n){Kr(n).start()}function tV(n){return R(this,null,function*(){Kr(n).p_()})}function nV(n){return R(this,null,function*(){let e=Kr(n);for(let t of n.O_)e.m_(t.mutations)})}function rV(n,e,t){return R(this,null,function*(){let r=n.O_.shift(),i=hy.from(r,e,t);yield hS(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Rs(n)})}function iV(n,e){return R(this,null,function*(){e&&Kr(n).V_&&(yield function(r,i){return R(this,null,function*(){if(function(s){return kb(s)&&s!==x.ABORTED}(i.code)){let o=r.O_.shift();Kr(r).s_(),yield hS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Rs(r)}})}(n,e)),fS(n)&&pS(n)})}function j0(n,e){return R(this,null,function*(){let t=U(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=Zr(t);t.L_.add(3),yield xs(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Bu(t)})}function av(n,e){return R(this,null,function*(){let t=U(n);e?(t.L_.delete(2),yield Bu(t)):e||(t.L_.add(2),yield xs(t),t.q_.set("Unknown"))})}function Ms(n){return n.K_||(n.K_=function(t,r,i){let o=U(t);return o.w_(),new nv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:QL.bind(null,n),Ro:YL.bind(null,n),mo:ZL.bind(null,n),d_:JL.bind(null,n)}),n.B_.push(e=>R(this,null,function*(){e?(n.K_.s_(),Xv(n)?Jv(n):n.q_.set("Unknown")):(yield n.K_.stop(),dS(n))}))),n.K_}function Kr(n){return n.U_||(n.U_=function(t,r,i){let o=U(t);return o.w_(),new rv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:tV.bind(null,n),mo:iV.bind(null,n),f_:nV.bind(null,n),g_:rV.bind(null,n)}),n.B_.push(e=>R(this,null,function*(){e?(n.U_.s_(),yield Rs(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var uv=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new rt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ns(n,e){if(Ge("AsyncQueue",`${e}: ${n}`),Yr(n))return new P(x.UNAVAILABLE,`${e}: ${n}`);throw n}var th=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=au(),this.sortedSet=new ke(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var nh=class{constructor(){this.W_=new ke($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Es=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,th.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var cv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},lv=class{constructor(){this.queries=B0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=U(t),o=i.queries;i.queries=B0(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new P(x.ABORTED,"Firestore shutting down"))}};function B0(){return new Fn(n=>wb(n),Lu)}function e_(n,e){return R(this,null,function*(){let t=U(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new cv,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Ns(s,`Initialization of query '${ns(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&n_(t)})}function t_(n,e){return R(this,null,function*(){let t=U(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function oV(n,e){let t=U(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&n_(t)}function sV(n,e,t){let r=U(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function n_(n){n.Y_.forEach(e=>{e.next()})}var dv,U0;(U0=dv||(dv={})).ea="default",U0.Cache="cache";var Mu=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Es(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Es.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==dv.Cache}};var hv=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var rh=class{constructor(e){this.serializer=e}Es(e){return Nn(this.serializer,e)}ds(e){return e.metadata.exists?$b(this.serializer,e.document,!1):tt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ke(e)}},fv=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gS(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=pe.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new rh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ie()).add(o);t.set(s,a)}}return t}complete(){return R(this,null,function*(){let e=yield GL(this.localStore,new rh(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield WL(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function gS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var ih=class{constructor(e){this.key=e}},oh=class{constructor(e){this.key=e}},sh=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=Eb(e),this.Ra=new th(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new nh,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=Vu(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),M=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),N=!1;m&&v?m.data.isEqual(v.data)?b!==M&&(r.track({type:3,doc:v}),N=!0):this.ga(m,v)||(r.track({type:2,doc:v}),N=!0,(c&&this.Aa(v,c)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),N=!0):m&&!v&&(r.track({type:1,doc:m}),N=!0,(c||l)&&(a=!0)),N&&(v?(s=s.add(v),o=M?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(v,b){let M=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return M(v)-M(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,s.length!==0||l?{snapshot:new Es(this.query,e.Ra,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new nh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new oh(r))}),this.da.forEach(r=>{e.has(r)||t.push(new ih(r))}),t}ba(e){this.Ta=e.Ts,this.da=ie();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Es.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},pv=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},gv=class{constructor(e){this.key=e,this.va=!1}},mv=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Fn(a=>wb(a),Lu),this.Ma=new Map,this.xa=new Set,this.Oa=new ke($.comparator),this.Na=new Map,this.La=new Au,this.Ba={},this.ka=new Map,this.qa=vs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function aV(n,e,t=!0){return R(this,null,function*(){let r=Ih(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield mS(r,e,t,!0),i})}function uV(n,e){return R(this,null,function*(){let t=Ih(n);yield mS(t,e,!0,!1)})}function mS(n,e,t,r){return R(this,null,function*(){let i=yield _s(n.localStore,At(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield r_(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&wh(n.remoteStore,i),a})}function r_(n,e,t,r,i){return R(this,null,function*(){n.Ka=(p,m,v)=>function(M,N,B,q){return R(this,null,function*(){let F=N.view.ma(B);F.ns&&(F=yield Kd(M.localStore,N.query,!1).then(({documents:I})=>N.view.ma(I,F)));let Y=q&&q.targetChanges.get(N.targetId),ee=q&&q.targetMismatches.get(N.targetId)!=null,Z=N.view.applyChanges(F,M.isPrimaryClient,Y,ee);return yv(M,N.targetId,Z.wa),Z.snapshot})}(n,p,m,v);let o=yield Kd(n.localStore,e,!0),s=new sh(e,o.Ts),a=s.ma(o.documents),c=Cu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);yv(n,t,l.wa);let h=new pv(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function cV(n,e,t){return R(this,null,function*(){let r=U(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Lu(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield ws(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Is(r.remoteStore,i.targetId),Ds(r,i.targetId)}).catch(Qr))):(Ds(r,i.targetId),yield ws(r.localStore,i.targetId,!0))})}function lV(n,e){return R(this,null,function*(){let t=U(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Is(t.remoteStore,r.targetId))})}function dV(n,e,t){return R(this,null,function*(){let r=a_(n);try{let i=yield function(s,a){let c=U(s),l=je.now(),h=a.reduce((v,b)=>v.add(b.key),ie()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let b=kt(),M=ie();return c.cs.getEntries(v,h).next(N=>{b=N,b.forEach((B,q)=>{q.isValidDocument()||(M=M.add(B))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,b)).next(N=>{p=N;let B=[];for(let q of a){let F=TL(q,p.get(q.key).overlayedDocument);F!=null&&B.push(new mn(q.key,F,fb(F.value.mapValue),qe.exists(!0)))}return c.mutationQueue.addMutationBatch(v,l,B,a)}).next(N=>{m=N;let B=N.applyToLocalDocumentSet(p,M);return c.documentOverlayCache.saveOverlays(v,N.batchId,B)})}).then(()=>({batchId:m.batchId,changes:Cb(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ba[s.currentUser.toKey()];l||(l=new ke(re)),l=l.insert(a,c),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield cr(r,i.changes),yield Rs(r.remoteStore)}catch(i){let o=Ns(i,"Failed to persist write");t.reject(o)}})}function yS(n,e){return R(this,null,function*(){let t=U(n);try{let r=yield qL(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(K(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?K(s.va):i.removedDocuments.size>0&&(K(s.va),s.va=!1))}),yield cr(t,r,e)}catch(r){yield Qr(r)}})}function $0(n,e,t){let r=U(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=U(s);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&n_(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function hV(n,e,t){return R(this,null,function*(){let r=U(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new ke($.comparator);s=s.insert(o,tt.newNoDocument(o,Q.min()));let a=ie().add(o),c=new Du(Q.min(),new Map,new ke(re),s,a);yield yS(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),s_(r)}else yield ws(r.localStore,e,!1).then(()=>Ds(r,e,t)).catch(Qr)})}function fV(n,e){return R(this,null,function*(){let t=U(n),r=e.batch.batchId;try{let i=yield HL(t.localStore,e);o_(t,r,null),i_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield cr(t,i)}catch(i){yield Qr(i)}})}function pV(n,e,t){return R(this,null,function*(){let r=U(n);try{let i=yield function(s,a){let c=U(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(K(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);o_(r,e,t),i_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield cr(r,i)}catch(i){yield Qr(i)}})}function gV(n,e){return R(this,null,function*(){let t=U(n);Zr(t.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=U(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Ns(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function i_(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function o_(n,e,t){let r=U(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ds(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||vS(n,r)})}function vS(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Is(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),s_(n))}function yv(n,e,t){for(let r of t)r instanceof ih?(n.La.addReference(r.key,e),mV(n,r)):r instanceof oh?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||vS(n,r.key)):z()}function mV(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),s_(n))}function s_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(pe.fromString(e)),r=n.qa.next();n.Na.set(r,new gv(t)),n.Oa=n.Oa.insert(t,r),wh(n.remoteStore,new ys(At(As(t.path)),r,"TargetPurposeLimboResolution",zt.oe))}}function cr(n,e,t){return R(this,null,function*(){let r=U(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Qy.Wi(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,l){return R(this,null,function*(){let h=U(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>S.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!Yr(p))throw p;k("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),b=v.snapshotVersion,M=v.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(m,M)}}})}(r.localStore,o))})}function yV(n,e){return R(this,null,function*(){let t=U(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield rS(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new P(x.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield cr(t,r.hs)}})}function vV(n,e){let t=U(n),r=t.Na.get(e);if(r&&r.va)return ie().add(r.key);{let i=ie(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function _V(n,e){return R(this,null,function*(){let t=U(n),r=yield Kd(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&yv(t,e.targetId,i.wa),i})}function wV(n,e){return R(this,null,function*(){let t=U(n);return aS(t.localStore,e).then(r=>cr(t,r))})}function IV(n,e,t,r){return R(this,null,function*(){let i=U(n),o=yield function(a,c){let l=U(a),h=U(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,c).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Rs(i.remoteStore):t==="acknowledged"||t==="rejected"?(o_(i,e,r||null),i_(i,e),function(a,c){U(U(a).mutationQueue).On(c)}(i.localStore,e)):z(),yield cr(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function EV(n,e){return R(this,null,function*(){let t=U(n);if(Ih(t),a_(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield H0(t,r.toArray());t.Qa=!0,yield av(t.remoteStore,!0);for(let o of i)wh(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Ds(t,s),ws(t.localStore,s,!0))),Is(t.remoteStore,s)}),yield i,yield H0(t,r),function(s){let a=U(s);a.Na.forEach((c,l)=>{Is(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new ke($.comparator)}(t),t.Qa=!1,yield av(t.remoteStore,!1)}})}function H0(n,e,t){return R(this,null,function*(){let r=U(n),i=[],o=[];for(let s of e){let a,c=r.Ma.get(s);if(c&&c.length!==0){a=yield _s(r.localStore,At(c[0]));for(let l of c){let h=r.Fa.get(l),p=yield _V(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield sS(r.localStore,s);a=yield _s(r.localStore,l),yield r_(r,_S(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function _S(n){return _b(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function DV(n){return function(t){return U(U(t).persistence).Qi()}(U(n).localStore)}function CV(n,e,t,r){return R(this,null,function*(){let i=U(n);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield aS(i.localStore,Ib(o[0])),a=Du.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Qe.EMPTY_BYTE_STRING);yield cr(i,s,a);break}case"rejected":yield ws(i.localStore,e,!0),Ds(i,e,r);break;default:z()}})}function TV(n,e,t){return R(this,null,function*(){let r=Ih(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield sS(r.localStore,i),s=yield _s(r.localStore,o);yield r_(r,_S(o),s.targetId,!1,s.resumeToken),wh(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield ws(r.localStore,i,!1).then(()=>{Is(r.remoteStore,i),Ds(r,i)}).catch(Qr))}})}function Ih(n){let e=U(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hV.bind(null,e),e.Ca.d_=oV.bind(null,e.eventManager),e.Ca.$a=sV.bind(null,e.eventManager),e}function a_(n){let e=U(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pV.bind(null,e),e}function bV(n,e,t){let r=U(n);(function(o,s,a){return R(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(v,b){let M=U(v),N=Ke(b.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",B=>M.Gr.getBundleMetadata(B,b.id)).then(B=>!!B&&B.createTime.compareTo(N)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(gS(c));let l=new fv(c,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield cr(o,p.Ia,void 0),yield function(v,b){let M=U(v);return M.persistence.runTransaction("Save bundle","readwrite",N=>M.Gr.saveBundleMetadata(N,b))}(o.localStore,c),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(c){return pn("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var vv=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return R(this,null,function*(){this.serializer=ju(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return nS(this.persistence,new Wd,t.initialUser,this.serializer)}Ga(t){return new zd(Gd.Zr,this.serializer)}Wa(t){return new Zd}terminate(){return R(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var ah=class n extends vv{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return R(this,null,function*(){yield sf(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield a_(this.Ja.syncEngine),yield Rs(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return nS(this.persistence,new Wd,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Py(r,e.asyncQueue,t)}Ha(e,t){let r=new Ym(t,this.persistence);return new Qm(e.asyncQueue,r)}Ga(e){let t=Yv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new Ky(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,cS(),wd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Zd}},_v=class n extends ah{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return R(this,null,function*(){yield sf(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof fu&&(this.sharedClientState.syncEngine={no:IV.bind(null,t),ro:CV.bind(null,t),io:TV.bind(null,t),Qi:DV.bind(null,t),eo:wV.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>R(this,null,function*(){yield EV(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=cS();if(!fu.D(t))throw new P(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Yv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fu(t,e.asyncQueue,r,e.clientId,e.initialUser)}},u_=(()=>{class n{initialize(t,r){return R(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>$0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=yV.bind(null,this.syncEngine),yield av(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new lv}()}createDatastore(t){let r=ju(t.databaseInfo.databaseId),i=function(s){return new tv(s)}(t.databaseInfo);return function(s,a,c,l){return new iv(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new sv(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>$0(this.syncEngine,r,0),function(){return Jd.D()?new Jd:new Xy}())}createSyncEngine(t,r){return function(o,s,a,c,l,h,p){let m=new mv(o,s,a,c,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return R(this,null,function*(){var t,r;yield function(o){return R(this,null,function*(){let s=U(o);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield xs(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function q0(n,e=10240){let t=0;return{read(){return R(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return R(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Cs=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ge("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var wv=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new rt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return R(this,null,function*(){return this.metadata.promise})}Ua(){return R(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return R(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new hv(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return R(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return R(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return R(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Iv=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return R(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return R(this,null,function*(){let s=U(i),a={documents:o.map(p=>Tu(s.serializer,p))},c=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,pe.emptyPath(),a,o.length),l=new Map;c.forEach(p=>{let m=ML(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());K(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return R(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new wu(i,this.precondition(i)))}),yield function(r,i){return R(this,null,function*(){let o=U(r),s={writes:i.map(a=>bu(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,pe.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw z();t=Q.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Q.min())?qe.exists(!1):qe.updateTime(t):qe.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Q.min()))throw new P(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qe.updateTime(t)}return qe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Ev=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Ru(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>R(this,null,function*(){let e=new Iv(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Ou(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!kb(t)}return!1}};var Dv=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=et.UNAUTHENTICATED,this.clientId=Ed.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>R(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new rt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Ns(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Vm(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>R(this,null,function*(){r.isEqual(i)||(yield rS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function z0(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield c_(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>j0(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>j0(e.remoteStore,i)),n._onlineComponents=e})}function c_(n){return R(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Vm(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;pn("Error using user provided cache. Falling back to memory cache: "+t),yield Vm(n,new vv)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield Vm(n,new vv);return n._offlineComponents})}function Eh(n){return R(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield z0(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield z0(n,new u_))),n._onlineComponents})}function wS(n){return c_(n).then(e=>e.persistence)}function l_(n){return c_(n).then(e=>e.localStore)}function IS(n){return Eh(n).then(e=>e.remoteStore)}function d_(n){return Eh(n).then(e=>e.syncEngine)}function SV(n){return Eh(n).then(e=>e.datastore)}function Ts(n){return R(this,null,function*(){let e=yield Eh(n),t=e.eventManager;return t.onListen=aV.bind(null,e.syncEngine),t.onUnlisten=cV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=uV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=lV.bind(null,e.syncEngine),t})}function AV(n){return n.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield wS(n),t=yield IS(n);return e.setNetworkEnabled(!0),function(i){let o=U(i);return o.L_.delete(0),Bu(o)}(t)}))}function xV(n){return n.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield wS(n),t=yield IS(n);return e.setNetworkEnabled(!1),function(i){return R(this,null,function*(){let o=U(i);o.L_.add(0),yield xs(o),o.q_.set("Offline")})}(t)}))}function RV(n,e){let t=new rt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o,s){return R(this,null,function*(){try{let a=yield function(l,h){let p=U(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Ns(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield l_(n),e,t)})),t.promise}function ES(n,e,t={}){let r=new rt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,c,l){let h=new Cs({next:m=>{h.Za(),s.enqueueAndForget(()=>t_(o,p));let v=m.docs.has(a);!v&&m.fromCache?l.reject(new P(x.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Mu(As(a.path),h,{includeMetadataChanges:!0,_a:!0});return e_(o,p)}(yield Ts(n),n.asyncQueue,e,t,r)})),r.promise}function MV(n,e){let t=new rt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o,s){return R(this,null,function*(){try{let a=yield Kd(i,o,!0),c=new sh(o,a.Ts),l=c.ma(a.documents),h=c.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let c=Ns(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield l_(n),e,t)})),t.promise}function DS(n,e,t={}){let r=new rt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,c,l){let h=new Cs({next:m=>{h.Za(),s.enqueueAndForget(()=>t_(o,p)),m.fromCache&&c.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Mu(a,h,{includeMetadataChanges:!0,_a:!0});return e_(o,p)}(yield Ts(n),n.asyncQueue,e,t,r)})),r.promise}function NV(n,e){let t=new Cs(e);return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o){U(i).Y_.add(o),o.next()}(yield Ts(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o){U(i).Y_.delete(o)}(yield Ts(n),t)}))}}function PV(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?Fb().encode(s):s,function(h,p){return new wv(h,p)}(function(h,p){if(h instanceof Uint8Array)return q0(h,p);if(h instanceof ArrayBuffer)return q0(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,ju(e));n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){bV(yield d_(n),i,r)}))}function kV(n,e){return n.asyncQueue.enqueue(()=>R(this,null,function*(){return function(r,i){let o=U(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield l_(n),e)}))}function CS(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var G0=new Map;function h_(n,e,t){if(!t)throw new P(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function f_(n,e,t,r){if(e===!0&&r===!0)throw new P(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function W0(n){if(!$.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function K0(n){if($.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Dh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function ge(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Dh(n);throw new P(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function TS(n,e){if(e<=0)throw new P(x.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var uh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}f_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ji=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new P(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new jm;switch(r.type){case"firstParty":return new Hm(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return R(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=G0.get(t);r&&(k("ComponentProvider","Removing Datastore"),G0.delete(t),r.terminate())}(this),Promise.resolve()}};function bS(n,e,t,r={}){var i;let o=(n=ge(n,ji))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&pn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=et.MOCK_USER;else{a=Bw(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new et(l)}n._authCredentials=new Bm(new Id(a,c))}}var dt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Re=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Pn=class n extends dt{constructor(e,t,r){super(e,t,As(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Re(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function p_(n,e,...t){if(n=Le(n),h_("collection","path",e),n instanceof ji){let r=pe.fromString(e,...t);return K0(r),new Pn(n,null,r)}{if(!(n instanceof Re||n instanceof Pn))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(pe.fromString(e,...t));return K0(r),new Pn(n.firestore,null,r)}}function SS(n,e){if(n=ge(n,ji),h_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new dt(n,null,function(r){return new gn(pe.emptyPath(),r)}(e))}function Uu(n,e,...t){if(n=Le(n),arguments.length===1&&(e=Ed.newId()),h_("doc","path",e),n instanceof ji){let r=pe.fromString(e,...t);return W0(r),new Re(n,null,new $(r))}{if(!(n instanceof Re||n instanceof Pn))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(pe.fromString(e,...t));return W0(r),new Re(n.firestore,n instanceof Pn?n.converter:null,new $(r))}}function g_(n,e){return n=Le(n),e=Le(e),(n instanceof Re||n instanceof Pn)&&(e instanceof Re||e instanceof Pn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function m_(n,e){return n=Le(n),e=Le(e),n instanceof dt&&e instanceof dt&&n.firestore===e.firestore&&Lu(n._query,e._query)&&n.converter===e.converter}var ch=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ru(this,"async_queue_retry"),this.Vu=()=>{let r=wd();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=wd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=wd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new rt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return R(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Yr(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ge("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=uv.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&z()}verifyOperationInProgress(){}wu(){return R(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function Cv(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Tv=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new rt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var AS=-1,Be=class extends ji{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ch,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return R(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ch(e),this._firestoreClient=void 0,yield e}})}};function ht(n){if(n._terminated)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||xS(n),n._firestoreClient}function xS(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,h){return new Zm(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,CS(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Dv(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function RS(n,e){pn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return NS(n,u_.provider,{build:r=>new ah(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function MS(n){return R(this,null,function*(){pn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();NS(n,u_.provider,{build:t=>new _v(t,e.cacheSizeBytes)})})}function NS(n,e,t){if((n=ge(n,Be))._firestoreClient||n._terminated)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new P(x.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},xS(n)}function PS(n){if(n._initialized&&!n._terminated)throw new P(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new rt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{yield function(r){return R(this,null,function*(){if(!Br.D())return Promise.resolve();let i=r+"main";yield Br.delete(i)})}(Yv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function kS(n){return function(t){let r=new rt;return t.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return gV(yield d_(t),r)})),r.promise}(ht(n=ge(n,Be)))}function OS(n){return AV(ht(n=ge(n,Be)))}function FS(n){return xV(ht(n=ge(n,Be)))}function LS(n,e){let t=ht(n=ge(n,Be)),r=new Tv;return PV(t,n._databaseId,e,r),r}function VS(n,e){return kV(ht(n=ge(n,Be)),e).then(t=>t?new dt(n,null,t.query):null)}var Ln=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Qe.fromBase64String(e))}catch(t){throw new P(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var yn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new We(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ar=class{constructor(e){this._methodName=e}};var Bi=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var Nu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var OV=/^__.*__$/,bv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new mn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gr(e,this.data,t,this.fieldTransforms)}},lh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new mn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function jS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var dh=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return hh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(jS(this.Cu)&&OV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Sv=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ju(e)}Qu(e,t,r,i=!1){return new dh({Cu:e,methodName:t,qu:r,path:We.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function qi(n){let e=n._freezeSettings(),t=ju(n._databaseId);return new Sv(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ch(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);__("Data must be an object, but it was:",s,r);let a=$S(r,s),c,l;if(o.merge)c=new Gt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Nv(e,p,t);if(!s.contains(m))throw new P(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);qS(h,m)||h.push(m)}c=new Gt(h),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new bv(new vt(a),c,l)}var Pu=class n extends ar{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function BS(n,e,t){return new dh({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Av=class n extends ar{_toFieldTransform(e){return new Fi(e.path,new qr)}isEqual(e){return e instanceof n}},xv=class n extends ar{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=BS(this,e,!0),r=this.Ku.map(o=>zi(o,t)),i=new or(r);return new Fi(e.path,i)}isEqual(e){return e instanceof n&&cf(this.Ku,e.Ku)}},Rv=class n extends ar{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=BS(this,e,!0),r=this.Ku.map(o=>zi(o,t)),i=new sr(r);return new Fi(e.path,i)}isEqual(e){return e instanceof n&&cf(this.Ku,e.Ku)}},Mv=class n extends ar{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new zr(e.serializer,Sb(e.serializer,this.$u));return new Fi(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function y_(n,e,t,r){let i=n.Qu(1,e,t);__("Data must be an object, but it was:",i,r);let o=[],s=vt.empty();Hi(r,(c,l)=>{let h=w_(e,c,t);l=Le(l);let p=i.Nu(h);if(l instanceof Pu)o.push(h);else{let m=zi(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new Gt(o);return new lh(s,a,i.fieldTransforms)}function v_(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[Nv(e,r,t)],c=[i];if(o.length%2!=0)throw new P(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Nv(e,o[m])),c.push(o[m+1]);let l=[],h=vt.empty();for(let m=a.length-1;m>=0;--m)if(!qS(l,a[m])){let v=a[m],b=c[m];b=Le(b);let M=s.Nu(v);if(b instanceof Pu)l.push(v);else{let N=zi(b,M);N!=null&&(l.push(v),h.set(v,N))}}let p=new Gt(l);return new lh(h,p,s.fieldTransforms)}function US(n,e,t,r=!1){return zi(t,n.Qu(r?4:3,e))}function zi(n,e){if(HS(n=Le(n)))return __("Unsupported field value:",e,n),$S(n,e);if(n instanceof ar)return function(r,i){if(!jS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=zi(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Le(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Sb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=je.fromDate(r);return{timestampValue:ms(i.serializer,o)}}if(r instanceof je){let o=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ms(i.serializer,o)}}if(r instanceof Bi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ln)return{bytesValue:Lb(i.serializer,r._byteString)};if(r instanceof Re){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Wv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Nu)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return Gv(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Dh(r)}`)}(n,e)}function $S(n,e){let t={};return cb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hi(n,(r,i)=>{let o=zi(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function HS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof je||n instanceof Bi||n instanceof Ln||n instanceof Re||n instanceof ar||n instanceof Nu)}function __(n,e,t){if(!HS(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Dh(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Nv(n,e,t){if((e=Le(e))instanceof yn)return e._internalPath;if(typeof e=="string")return w_(n,e);throw hh("Field path arguments must be of type string or ",n,!1,void 0,t)}var FV=new RegExp("[~\\*/\\[\\]]");function w_(n,e,t){if(e.search(FV)>=0)throw hh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new yn(...e.split("."))._internalPath}catch{throw hh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new P(x.INVALID_ARGUMENT,a+n+c)}function qS(n,e){return n.some(t=>t.isEqual(e))}var Ui=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Re(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Pv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Th("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Pv=class extends Ui{data(){return super.data()}};function Th(n,e){return typeof e=="string"?w_(n,e):e instanceof yn?e._internalPath:e._delegate._internalPath}function zS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ku=class{},$i=class extends ku{};function lr(n,e,...t){let r=[];e instanceof ku&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof kv).length,a=o.filter(c=>c instanceof fh).length;if(s>1||s>0&&a>0)throw new P(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var fh=class n extends $i{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return tA(e._query,t),new dt(e.firestore,e.converter,ly(e._query,t))}_parse(e){let t=qi(e.firestore);return function(o,s,a,c,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Y0(p,h);let v=[];for(let b of p)v.push(Q0(c,o,b));m={arrayValue:{values:v}}}else m=Q0(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Y0(p,h),m=US(a,s,p,h==="in"||h==="not-in");return ce.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function GS(n,e,t){let r=e,i=Th("where",n);return fh._create(i,r,t)}var kv=class n extends ku{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ie.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)tA(s,c),s=ly(s,c)}(e._query,t),new dt(e.firestore,e.converter,ly(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Ov=class n extends $i{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ki(o,s)}(e._query,this._field,this._direction);return new dt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new gn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function WS(n,e="asc"){let t=e,r=Th("orderBy",n);return Ov._create(r,t)}var ph=class n extends $i{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new dt(e.firestore,e.converter,Nd(e._query,this._limit,this._limitType))}};function KS(n){return TS("limit",n),ph._create("limit",n,"F")}function QS(n){return TS("limitToLast",n),ph._create("limitToLast",n,"L")}var gh=class n extends $i{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=eA(e,this.type,this._docOrFields,this._inclusive);return new dt(e.firestore,e.converter,function(i,o){return new gn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function YS(...n){return gh._create("startAt",n,!0)}function ZS(...n){return gh._create("startAfter",n,!1)}var mh=class n extends $i{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=eA(e,this.type,this._docOrFields,this._inclusive);return new dt(e.firestore,e.converter,function(i,o){return new gn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function JS(...n){return mh._create("endBefore",n,!1)}function XS(...n){return mh._create("endAt",n,!0)}function eA(n,e,t,r){if(t[0]=Le(t[0]),t[0]instanceof Ui)return function(o,s,a,c,l){if(!c)throw new P(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of us(o))if(p.field.isKeyField())h.push(Pi(s,c.key));else{let m=c.data.field(p.field);if(vh(m))throw new P(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let v=p.field.canonicalString();throw new P(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(m)}return new On(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=qi(n.firestore);return function(s,a,c,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new P(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let v=[];for(let b=0;b<h.length;b++){let M=h[b];if(m[b].field.isKeyField()){if(typeof M!="string")throw new P(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof M}`);if(!qv(s)&&M.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${M}' contains a slash.`);let N=s.path.child(pe.fromString(M));if(!$.isDocumentKey(N))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);let B=new $(N);v.push(Pi(a,B))}else{let N=US(c,l,M);v.push(N)}}return new On(v,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Q0(n,e,t){if(typeof(t=Le(t))=="string"){if(t==="")throw new P(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qv(e)&&t.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(pe.fromString(t));if(!$.isDocumentKey(r))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pi(n,new $(r))}if(t instanceof Re)return Pi(n,t._key);throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dh(t)}.`)}function Y0(n,e){if(!Array.isArray(n)||n.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tA(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var bs=class{convertValue(e,t="none"){switch(Ni(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ur(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Hi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Fe(s.doubleValue));return new Nu(o)}convertGeoPoint(e){return new Bi(Fe(e.latitude),Fe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=$v(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(yu(e));default:return null}}convertTimestamp(e){let t=ir(e);return new je(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=pe.fromString(e);K(Kb(r));let i=new $r(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||Ge(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function bh(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Fv=class extends bs{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,t)}};var rr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},on=class extends Ui{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Vr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Th("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Vr=class extends on{data(e={}){return super.data(e)}},vn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new rr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Vr(this._firestore,this._userDataWriter,r.key,r,new rr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Vr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new rr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Vr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new rr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:LV(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function LV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function I_(n,e){return n instanceof on&&e instanceof on?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof vn&&e instanceof vn&&n._firestore===e._firestore&&m_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function nA(n){n=ge(n,Re);let e=ge(n.firestore,Be);return ES(ht(e),n._key).then(t=>T_(e,n,t))}var ur=class extends bs{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,t)}};function rA(n){n=ge(n,Re);let e=ge(n.firestore,Be),t=ht(e),r=new ur(e);return RV(t,n._key).then(i=>new on(e,r,n._key,i,new rr(i!==null&&i.hasLocalMutations,!0),n.converter))}function iA(n){n=ge(n,Re);let e=ge(n.firestore,Be);return ES(ht(e),n._key,{source:"server"}).then(t=>T_(e,n,t))}function oA(n){n=ge(n,dt);let e=ge(n.firestore,Be),t=ht(e),r=new ur(e);return zS(n._query),DS(t,n._query).then(i=>new vn(e,r,n,i))}function sA(n){n=ge(n,dt);let e=ge(n.firestore,Be),t=ht(e),r=new ur(e);return MV(t,n._query).then(i=>new vn(e,r,n,i))}function aA(n){n=ge(n,dt);let e=ge(n.firestore,Be),t=ht(e),r=new ur(e);return DS(t,n._query,{source:"server"}).then(i=>new vn(e,r,n,i))}function E_(n,e,t){n=ge(n,Re);let r=ge(n.firestore,Be),i=bh(n.converter,e,t);return Ps(r,[Ch(qi(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,qe.none())])}function D_(n,e,t,...r){n=ge(n,Re);let i=ge(n.firestore,Be),o=qi(i),s;return s=typeof(e=Le(e))=="string"||e instanceof yn?v_(o,"updateDoc",n._key,e,t,r):y_(o,"updateDoc",n._key,e),Ps(i,[s.toMutation(n._key,qe.exists(!0))])}function uA(n){return Ps(ge(n.firestore,Be),[new Wr(n._key,qe.none())])}function cA(n,e){let t=ge(n.firestore,Be),r=Uu(n),i=bh(n.converter,e);return Ps(t,[Ch(qi(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,qe.exists(!1))]).then(()=>r)}function C_(n,...e){var t,r,i;n=Le(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Cv(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Cv(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,h;if(n instanceof Re)l=ge(n.firestore,Be),h=As(n._key.path),c={next:p=>{e[s]&&e[s](T_(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=ge(n,dt);l=ge(p.firestore,Be),h=p._query;let m=new ur(l);c={next:v=>{e[s]&&e[s](new vn(l,m,p,v))},error:e[s+1],complete:e[s+2]},zS(n._query)}return function(m,v,b,M){let N=new Cs(M),B=new Mu(v,N,b);return m.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return e_(yield Ts(m),B)})),()=>{N.Za(),m.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return t_(yield Ts(m),B)}))}}(ht(l),h,a,c)}function lA(n,e){return NV(ht(n=ge(n,Be)),Cv(e)?e:{next:e})}function Ps(n,e){return function(r,i){let o=new rt;return r.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return dV(yield d_(r),i,o)})),o.promise}(ht(n),e)}function T_(n,e,t){let r=t.docs.get(e._key),i=new ur(n);return new on(n,i,e._key,r,new rr(t.hasPendingWrites,t.fromCache),e.converter)}var VV={maxAttempts:5};var yh=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=qi(e)}set(e,t,r){this._verifyNotCommitted();let i=Fr(e,this._firestore),o=bh(i.converter,t,r),s=Ch(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,qe.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Fr(e,this._firestore),s;return s=typeof(t=Le(t))=="string"||t instanceof yn?v_(this._dataReader,"WriteBatch.update",o._key,t,r,i):y_(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,qe.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Fr(e,this._firestore);return this._mutations=this._mutations.concat(new Wr(t._key,qe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Fr(n,e){if((n=Le(n)).firestore!==e)throw new P(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Lv=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=qi(t)}get(t){let r=Fr(t,this._firestore),i=new Fv(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return z();let s=o[0];if(s.isFoundDocument())return new Ui(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Ui(this._firestore,i,r._key,null,r.converter);throw z()})}set(t,r,i){let o=Fr(t,this._firestore),s=bh(o.converter,r,i),a=Ch(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=Fr(t,this._firestore),a;return a=typeof(r=Le(r))=="string"||r instanceof yn?v_(this._dataReader,"Transaction.update",s._key,r,i,o):y_(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=Fr(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Fr(e,this._firestore),r=new ur(this._firestore);return super.get(e).then(i=>new on(this._firestore,r,t._key,i._document,new rr(!1,!1),t.converter))}};function dA(n,e,t){n=ge(n,Be);let r=Object.assign(Object.assign({},VV),t);return function(o){if(o.maxAttempts<1)throw new P(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new rt;return o.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){let l=yield SV(o);new Ev(o.asyncQueue,l,a,s,c).au()})),c.promise}(ht(n),i=>e(new Lv(n,i)),r)}function hA(){return new Pu("deleteField")}function fA(){return new Av("serverTimestamp")}function pA(...n){return new xv("arrayUnion",n)}function gA(...n){return new Rv("arrayRemove",n)}function mA(n){return new Mv("increment",n)}(function(e,t=!0){(function(i){Ss=i})(Hw),ra(new ni("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Be(new Um(r.getProvider("auth-internal")),new zm(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $r(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),gr(KT,"4.7.3",e),gr(KT,"4.7.3","esm2017")})();var jV="@firebase/firestore-compat",BV="0.3.38";function M_(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function yA(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function vA(){if(!lb())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Sh=class n{constructor(e){this._delegate=e}static fromBase64String(e){return vA(),new n(Ln.fromBase64String(e))}static fromUint8Array(e){return yA(),new n(Ln.fromUint8Array(e))}toBase64(){return vA(),this._delegate.toBase64()}toUint8Array(){return yA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function b_(n){return UV(n,["next","error","complete"])}function UV(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var S_=class{enableIndexedDbPersistence(e,t){return RS(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return MS(e._delegate)}clearIndexedDbPersistence(e){return PS(e._delegate)}},Ah=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof $r||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&pn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){bS(this._delegate,e,t,r)}enableNetwork(){return OS(this._delegate)}disableNetwork(){return FS(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,f_("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return kS(this._delegate)}onSnapshotsInSync(e){return lA(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Fs(this,p_(this._delegate,e))}catch(t){throw xt(t,"collection()","Firestore.collection()")}}doc(e){try{return new Vn(this,Uu(this._delegate,e))}catch(t){throw xt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Qi(this,SS(this._delegate,e))}catch(t){throw xt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return dA(this._delegate,t=>e(new xh(this,t)))}batch(){return ht(this._delegate),new Rh(new yh(this._delegate,e=>Ps(this._delegate,e)))}loadBundle(e){return LS(this._delegate,e)}namedQuery(e){return VS(this._delegate,e).then(t=>t?new Qi(this,t):null)}},ks=class extends bs{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sh(new Ln(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Vn.forKey(t,this.firestore,null)}};function $V(n){Z0(n)}var xh=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ks(e)}get(e){let t=Gi(e);return this._delegate.get(t).then(r=>new Wi(this._firestore,new on(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Gi(e);return r?(M_("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Gi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Gi(e);return this._delegate.delete(t),this}},Rh=class{constructor(e){this._delegate=e}set(e,t,r){let i=Gi(e);return r?(M_("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Gi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Gi(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Os=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Vr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ki(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new ks(e),t),i.set(t,o)),o}};Os.INSTANCES=new WeakMap;var Vn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ks(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Re(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Re(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Fs(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Fs(this.firestore,p_(this._delegate,e))}catch(t){throw xt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Le(e),e instanceof Re?g_(this._delegate,e):!1}set(e,t){t=M_("DocumentReference.set",t);try{return t?E_(this._delegate,e,t):E_(this._delegate,e)}catch(r){throw xt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?D_(this._delegate,e):D_(this._delegate,e,t,...r)}catch(i){throw xt(i,"updateDoc()","DocumentReference.update()")}}delete(){return uA(this._delegate)}onSnapshot(...e){let t=_A(e),r=wA(e,i=>new Wi(this.firestore,new on(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return C_(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=rA(this._delegate):e?.source==="server"?t=iA(this._delegate):t=nA(this._delegate),t.then(r=>new Wi(this.firestore,new on(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Os.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function xt(n,e,t){return n.message=n.message.replace(e,t),n}function _A(n){for(let e of n)if(typeof e=="object"&&!b_(e))return e;return{}}function wA(n,e){var t,r;let i;return b_(n[0])?i=n[0]:b_(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Wi=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Vn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return I_(this._delegate,e._delegate)}},Ki=class extends Wi{data(e){let t=this._delegate.data(e);return this._delegate._converter||J0(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Qi=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ks(e)}where(e,t,r){try{return new n(this.firestore,lr(this._delegate,GS(e,t,r)))}catch(i){throw xt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,lr(this._delegate,WS(e,t)))}catch(r){throw xt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,lr(this._delegate,KS(e)))}catch(t){throw xt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,lr(this._delegate,QS(e)))}catch(t){throw xt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,lr(this._delegate,YS(...e)))}catch(t){throw xt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,lr(this._delegate,ZS(...e)))}catch(t){throw xt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,lr(this._delegate,JS(...e)))}catch(t){throw xt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,lr(this._delegate,XS(...e)))}catch(t){throw xt(t,"endAt()","Query.endAt()")}}isEqual(e){return m_(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=sA(this._delegate):e?.source==="server"?t=aA(this._delegate):t=oA(this._delegate),t.then(r=>new $u(this.firestore,new vn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=_A(e),r=wA(e,i=>new $u(this.firestore,new vn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return C_(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Os.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},A_=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ki(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},$u=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Qi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ki(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new A_(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Ki(this._firestore,r))})}isEqual(e){return I_(this._delegate,e._delegate)}},Fs=class n extends Qi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Vn(this.firestore,e):null}doc(e){try{return e===void 0?new Vn(this.firestore,Uu(this._delegate)):new Vn(this.firestore,Uu(this._delegate,e))}catch(t){throw xt(t,"doc()","CollectionReference.doc()")}}add(e){return cA(this._delegate,e).then(t=>new Vn(this.firestore,t))}isEqual(e){return g_(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Os.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Gi(n){return ge(n,Re)}var x_=class n{constructor(...e){this._delegate=new yn(...e)}static documentId(){return new n(We.keyField().canonicalString())}isEqual(e){return e=Le(e),e instanceof yn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var R_=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=fA();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=hA();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=pA(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=gA(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=mA(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var HV={Firestore:Ah,GeoPoint:Bi,Timestamp:je,Blob:Sh,Transaction:xh,WriteBatch:Rh,DocumentReference:Vn,DocumentSnapshot:Wi,Query:Qi,QueryDocumentSnapshot:Ki,QuerySnapshot:$u,CollectionReference:Fs,FieldPath:x_,FieldValue:R_,setLogLevel:$V,CACHE_SIZE_UNLIMITED:AS};function qV(n,e){n.INTERNAL.registerComponent(new ni("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},HV)))}function zV(n){qV(n,(e,t)=>new Ah(e,t,new S_)),n.registerVersion(jV,BV)}zV(Lt);function GV(n,e=aa){return new le(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function IA(n,e){return GV(n,e)}function WV(n,e){return IA(n,e).pipe(ui(void 0),la(),G(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function k_(n,e){return IA(n,e).pipe(G(t=>({payload:t,type:"query"})))}var Mh=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=CA(r,t);return new Ph(i,o,this.afs)}snapshotChanges(){return WV(this.ref,this.afs.schedulers.outsideAngular).pipe(Pt)}valueChanges(e={}){return this.snapshotChanges().pipe(G(({payload:t})=>e.idField?Ae(V({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return ve(this.ref.get(e)).pipe(Pt)}};function Nh(n,e){return k_(n,e).pipe(ui(void 0),la(),G(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function EA(n,e,t){return Nh(n,t).pipe(ai((r,i)=>KV(r,i.map(o=>o.payload),e),[]),Pf(),G(r=>r.map(i=>({type:i.type,payload:i}))))}function KV(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=QV(n,r))}),n}function N_(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function QV(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return N_(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return N_(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return N_(n,e.oldIndex,1);break}return n}function DA(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Ph=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Nh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(G(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ui(void 0),la(),ct(([r,i])=>i.length>0||!r),G(([,r])=>r),Pt)}auditTrail(e){return this.stateChanges(e).pipe(ai((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=DA(e);return EA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Pt)}valueChanges(e={}){return k_(this.query,this.afs.schedulers.outsideAngular).pipe(G(t=>t.payload.docs.map(r=>e.idField?Ae(V({},r.data()),{[e.idField]:r.id}):r.data())),Pt)}get(e){return ve(this.query.get(e)).pipe(Pt)}add(e){return this.ref.add(e)}doc(e){return new Mh(this.ref.doc(e),this.afs)}},P_=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Nh(this.query,this.afs.schedulers.outsideAngular).pipe(Pt):Nh(this.query,this.afs.schedulers.outsideAngular).pipe(G(t=>t.filter(r=>e.indexOf(r.type)>-1)),ct(t=>t.length>0),Pt)}auditTrail(e){return this.stateChanges(e).pipe(ai((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=DA(e);return EA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Pt)}valueChanges(e={}){return k_(this.query,this.afs.schedulers.outsideAngular).pipe(G(r=>r.payload.docs.map(i=>e.idField?V({[e.idField]:i.id},i.data()):i.data())),Pt)}get(e){return ve(this.query.get(e)).pipe(Pt)}},YV=new W("angularfire2.enableFirestorePersistence"),ZV=new W("angularfire2.firestore.persistenceSettings"),JV=new W("angularfire2.firestore.settings"),XV=new W("angularfire2.firestore.use-emulator");function CA(n,e=t=>t){return{query:e(n),ref:n}}var Ot=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,h,p,m,v,b,M,N,B,q){this.schedulers=c;let F=tu(t,a,r),Y=h;p&&Sm(F,a,m,b,M,N,v,B),[this.firestore,this.persistenceEnabled$]=cd(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let ee=a.runOutsideAngular(()=>F.firestore());if(o&&ee.settings(o),Y&&ee.useEmulator(...Y),i&&!_i(s)){let Z=()=>{try{return ve(ee.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),J(!1)}};return[ee,a.runOutsideAngular(Z)]}else return[ee,J(!1)]},[o,Y,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=CA(i,r),a=this.schedulers.ngZone.run(()=>o);return new Ph(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new P_(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Mh(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(O(Ko),O(Qo,8),O(YV,8),O(JV,8),O(Mt),O(he),O(sd),O(ZV,8),O(XV,8),O(zT,8),O(Im,8),O(Em,8),O(Dm,8),O(Cm,8),O(Tm,8),O(bm,8),O(Di,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var TA=(()=>{class n{constructor(t){this.db=t,this.accesoHeader="header service running ... hello word",this.dbPath="/header",this.headerRef=t.collection(this.dbPath)}getHeader(){return this.headerRef}static{this.\u0275fac=function(r){return new(r||n)(O(Ot))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var bA=(()=>{class n{constructor(t){this.headerService=t,this.header=new id,console.log(this.headerService),this.headerService.getHeader().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.header=r[0],console.log(this.header)})}static{this.\u0275fac=function(r){return new(r||n)(Ze(TA))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-header"]],decls:15,vars:6,consts:[["src","{{header.photoUrl","width","200","height","200"]],template:function(r,i){r&1&&(Ee(0,"tr")(1,"td"),xe(2),Ce(3,"br"),xe(4),De(),Ee(5,"td"),Ce(6,"img",0),De(),Ee(7,"td"),xe(8),Ce(9,"br"),xe(10),Ce(11,"br"),xe(12),Ce(13,"br"),xe(14),De()()),r&2&&(Ne(2),Pe(" ",i.header.name," "),Ne(2),Pe(" ",i.header.goalLife," "),Ne(4),Pe(" ",i.header.email,""),Ne(2),Pe(" ",i.header.phoneNumber,""),Ne(2),Pe(" ",i.header.location,""),Ne(2),Pe(" ",i.header.socialNetwork," "))}})}}return n})();var SA=(()=>{class n{constructor(t){this.db=t,this.accesoWorkExperience="work experience running....",this.dbPath="/work-experience",this.workExperienceRef=t.collection(this.dbPath)}getWorkExperience(){return this.workExperienceRef}static{this.\u0275fac=function(r){return new(r||n)(O(Ot))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function r2(n,e){if(n&1&&(Ee(0,"ul")(1,"li"),xe(2),Ee(3,"i"),xe(4),De(),Ce(5,"br"),Ee(6,"b"),xe(7),De(),Ce(8,"br"),xe(9),Ce(10,"br"),xe(11," Logros: "),Ce(12,"br"),xe(13),Ce(14,"br"),De()()),n&2){let t=e.$implicit;Ne(2),ag(" ",t.startDate," - ",t.endDate," "),Ne(2),Pe("",t.location," "),Ne(3),Pe(" ",t.position," "),Ne(2),Pe(" ",t.company," "),Ne(4),Pe(" ",t.accomplishment," ")}}var AA=(()=>{class n{constructor(t){this.workExperienceService=t,this.workExperience=[],console.log(this.workExperienceService),this.workExperienceService.getWorkExperience().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.workExperience=r,console.log(this.workExperience)})}static{this.\u0275fac=function(r){return new(r||n)(Ze(SA))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-work-experience"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&Ut(0,r2,15,6,"ul",0),r&2&&$t("ngForOf",i.workExperience)},dependencies:[en]})}}return n})();var xA=(()=>{class n{constructor(t){this.db=t,this.accesoEducation="education service runnig...",this.dbPath="/education",this.educationRef=t.collection(this.dbPath)}getEducation(){return this.educationRef}static{this.\u0275fac=function(r){return new(r||n)(O(Ot))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function s2(n,e){if(n&1&&(Ee(0,"ul")(1,"li"),xe(2),Ce(3,"br"),xe(4),Ce(5,"br"),De()()),n&2){let t=e.$implicit;Ne(2),Pe(" ",t.highSchool," "),Ne(2),Pe(" ",t.university," ")}}var RA=(()=>{class n{constructor(t){this.educationService=t,this.education=[],console.log(this.educationService),this.educationService.getEducation().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.education=r,console.log(this.education)})}static{this.\u0275fac=function(r){return new(r||n)(Ze(xA))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-education"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&Ut(0,s2,6,2,"ul",0),r&2&&$t("ngForOf",i.education)},dependencies:[en]})}}return n})();var MA=(()=>{class n{constructor(t){this.db=t,this.accesoSkills="skills service running",this.dbPath="/skills",this.skillsRef=t.collection(this.dbPath)}getSkills(){return this.skillsRef}static{this.\u0275fac=function(r){return new(r||n)(O(Ot))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function c2(n,e){if(n&1&&(Ee(0,"ul")(1,"li"),xe(2),Ce(3,"br"),xe(4),De()()),n&2){let t=e.$implicit;Ne(2),Pe(" ",t.level," "),Ne(2),Pe(" ",t.name," ")}}var NA=(()=>{class n{constructor(t){this.skillsService=t,this.skills=[],console.log(this.skillsService),this.skillsService.getSkills().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.skills=r,console.log(this.skills)})}static{this.\u0275fac=function(r){return new(r||n)(Ze(MA))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-skills"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&Ut(0,c2,5,2,"ul",0),r&2&&$t("ngForOf",i.skills)},dependencies:[en]})}}return n})();var PA=(()=>{class n{constructor(t){this.db=t,this.accesoCertificates="certificates service runnig.....",this.dbPath="/certificates",this.certificatesRef=t.collection(this.dbPath)}getCertificates(){return this.certificatesRef}static{this.\u0275fac=function(r){return new(r||n)(O(Ot))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function h2(n,e){if(n&1&&(Ee(0,"ul")(1,"li"),xe(2),De()()),n&2){let t=e.$implicit;Ne(2),Pe(" ",t.name," ")}}var kA=(()=>{class n{constructor(t){this.certificatesService=t,this.certificates=[],console.log(this.certificatesService),this.certificatesService.getCertificates().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.certificates=r,console.log(this.certificates)})}static{this.\u0275fac=function(r){return new(r||n)(Ze(PA))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-certificates"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&Ut(0,h2,3,1,"ul",0),r&2&&$t("ngForOf",i.certificates)},dependencies:[en]})}}return n})();var OA=(()=>{class n{constructor(t){this.db=t,this.accesoLanguages="languajes service running....",this.dbPath="/languages",this.languagesRef=t.collection(this.dbPath)}getLanguages(){return this.languagesRef}static{this.\u0275fac=function(r){return new(r||n)(O(Ot))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function g2(n,e){if(n&1&&(Ee(0,"ul")(1,"li"),xe(2),De()()),n&2){let t=e.$implicit;Ne(2),Pe(" ",t.name," ")}}var FA=(()=>{class n{constructor(t){this.languagesService=t,this.languages=[],console.log(this.languagesService),this.languagesService.getLanguages().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.languages=r,console.log(this.languages)})}static{this.\u0275fac=function(r){return new(r||n)(Ze(OA))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-languages"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&Ut(0,g2,3,1,"ul",0),r&2&&$t("ngForOf",i.languages)},dependencies:[en]})}}return n})();var LA=(()=>{class n{constructor(t){this.db=t,this.accesoInterests="interests service runnig...",this.dbPath="/interests",this.interestsRef=t.collection(this.dbPath)}getInterests(){return this.interestsRef}static{this.\u0275fac=function(r){return new(r||n)(O(Ot))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function v2(n,e){if(n&1&&(Ee(0,"ul")(1,"li"),xe(2),De()()),n&2){let t=e.$implicit;Ne(2),Pe(" ",t.name," ")}}var VA=(()=>{class n{constructor(t){this.interestsService=t,this.interests=[],console.log(this.interestsService),this.interestsService.getInterests().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.interests=r,console.log(this.interests)})}static{this.\u0275fac=function(r){return new(r||n)(Ze(LA))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-interests"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&Ut(0,v2,3,1,"ul",0),r&2&&$t("ngForOf",i.interests)},dependencies:[en]})}}return n})();var jA=(()=>{class n{constructor(){this.title="mycv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ot({type:n,selectors:[["app-root"]],decls:19,vars:0,consts:[["border","1"],["colspan","2"]],template:function(r,i){r&1&&(Ee(0,"table",0)(1,"tr")(2,"td",1),Ce(3,"app-header"),De()(),Ee(4,"tr")(5,"td"),Ce(6,"app-work-experience"),De(),Ee(7,"td"),Ce(8,"app-skills"),De()(),Ee(9,"tr")(10,"td"),Ce(11,"app-education"),De(),Ee(12,"td"),Ce(13,"app-certificates"),De()(),Ee(14,"tr")(15,"td"),Ce(16,"app-languages"),De(),Ee(17,"td"),Ce(18,"app-interests"),De()()())},dependencies:[bA,AA,RA,NA,kA,FA,VA]})}}return n})();var BA={production:!1,firebase:{apiKey:"AIzaSyBeyH3Og_NyGUypBq1rS0ayK8cJAMDR2kE",authDomain:"my-cv-mrarzi.firebaseapp.com",projectId:"my-cv-mrarzi",storageBucket:"my-cv-mrarzi.firebasestorage.app",messagingSenderId:"200885917136",appId:"1:200885917136:web:30e68c37f1aec6d22d95d5"}};var UA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=bt({type:n,bootstrap:[jA]})}static{this.\u0275inj=Tt({imports:[OC,AT,qT.initializeApp(BA.firebase)]})}}return n})();kC().bootstrapModule(UA,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
